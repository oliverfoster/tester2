define("extensions/adapt-contrib-assessment/js/adapt-assessmentArticleView",["coreJS/adapt","coreViews/articleView"],function(e,t){var i={postRender:function(){if(t.prototype.postRender.call(this),this.model.isAssessmentEnabled()){this._setupEventListeners();var e=this.model.getConfig();e&&e._questions&&e._questions._canShowMarking===!1&&this.$el.addClass("no-marking")}this.$el.addClass("assessment")},_setupEventListeners:function(){this.listenTo(e,"assessments:complete",this._onAssessmentComplete),this.listenTo(e,"assessments:reset",this._onAssessmentReset),this.listenTo(e,"remove",this._onRemove)},_removeEventListeners:function(){this.stopListening(e,"assessments:complete",this._onAssessmentComplete),this.stopListening(e,"assessments:reset",this._onAssessmentReset)},_onAssessmentComplete:function(e,t){e.id==this.model.get("_assessment")._id&&console.log("assessment complete",e,t)},_onAssessmentReset:function(e,t){e.id==this.model.get("_assessment")._id&&console.log("assessment reset",e,t)},_onRemove:function(){this._removeEventListeners()}};return i}),define("extensions/adapt-contrib-assessment/js/adapt-assessmentQuestionBank",["require"],function(e){var t=function(e,t,i,s){this._id=e,this._articleId=t,this._numQuestionBlocks=i,this._uniqueQuestions=s,this.questionBlocks=[],this.unUsedQuestionBlocks=void 0,this.usedQuestionBlocks=[]};return t.prototype={getID:function(){return this._id},addBlock:function(e){this.questionBlocks.push(e)},getRandomQuestionBlocks:function(){this.checkResetUnunsedBlocks();for(var e=[],t=this.usedQuestionBlocks.slice(0),i=0;i<this._numQuestionBlocks;i++){var s=this.getRandomQuestion();if(void 0!==s)e.push(s);else{if(0===t.length)break;var n=Math.floor(Math.random()*(t.length-1));s=t.splice(n,1)[0],e.push(s)}}return e},checkResetUnunsedBlocks:function(){void 0!==this.unUsedQuestionBlocks&&this._uniqueQuestions||(this.unUsedQuestionBlocks=this.questionBlocks.slice(0))},getRandomQuestion:function(){if(void 0!==this.unUsedQuestionBlocks&&this.unUsedQuestionBlocks.length<1)return void console.warn("assessment:"+this._articleId+" No more unique questions for _assessment._quizBankID "+this._id);var e=Math.round(Math.random()*(this.unUsedQuestionBlocks.length-1)),t=this.unUsedQuestionBlocks[e];return this.usedQuestionBlocks.push(t),this.unUsedQuestionBlocks.splice(e,1),t}},t}),define("extensions/adapt-contrib-assessment/js/adapt-assessmentArticleModel",["coreJS/adapt","./adapt-assessmentQuestionBank"],function(e,t){var i=0,s={_isEnabled:!0,_questions:{_resetType:"soft",_canShowFeedback:!1,_canShowMarking:!1,_canShowModelAnswer:!1},_isPercentageBased:!0,_scoreToPass:100,_includeInTotalScore:!0,_assessmentWeight:1,_isResetOnRevisit:!0,_reloadPageOnReset:!0,_attempts:"infinite"},n={_postInitialize:function(){if(this.isAssessmentEnabled()){var t=this.getConfig();_.extend(this,{_currentQuestionComponents:null,_originalChildModels:null,_questionBanks:null,_forceResetOnRevisit:!1});var i;switch(t._attempts){case"infinite":case 0:case void 0:case-1:case null:i="infinite";break;default:i=t._attempts}var s=e.assessment.getState();t._includeInTotalScore&&s.requireAssessmentPassed&&(i="infinite"),this.set({_currentQuestionComponentIds:[],_assessmentCompleteInSession:!1,_attemptInProgress:!1,_isAssessmentComplete:!1,_numberOfQuestionsAnswered:0,_lastAttemptScoreAsPercent:0,_attempts:i,_attemptsLeft:i,_attemptsSpent:0}),this.listenToOnce(e,"app:dataReady",this._onDataReady),this.listenTo(e,"remove",this._onRemove)}},init:function(){this._originalChildModels=this.getChildren().models,this._currentQuestionComponents=this.findDescendants("components").where({_isQuestionType:!0});var e=new Backbone.Collection(this._currentQuestionComponents);this.set("_currentQuestionComponentIds",e.pluck("_id")),this._setAssessmentOwnershipOnChildrenModels()},_setAssessmentOwnershipOnChildrenModels:function(){for(var e=0,t=this._originalChildModels.length;e<t;e++){var i=this._originalChildModels[e];i.set({_isPartOfAssessment:!0}),i.setOnChildren({_isPartOfAssessment:!0})}},_onDataReady:function(){e.assessment.register(this)},_setupAssessmentData:function(t){var i,s=this.getConfig(),n=this.getState(),o=!this.get("_attemptInProgress")&&!n.isPass||1==t;o&&(this.set("_numberOfQuestionsAnswered",0),this.set("_isAssessmentComplete",!1),this.set("_assessmentCompleteInSession",!1),this.set("_score",0),this.getChildren().models=this._originalChildModels,s._banks&&s._banks._isEnabled&&s._banks._split.length>1?i=this._setupBankedAssessment():s._randomisation&&s._randomisation._isEnabled&&(i=this._setupRandomisedAssessment())),i?0===i.length&&(i=this.getChildren().models,console.warn("assessment: Not enough unique questions to create a fresh assessment, using last selection")):i=this.getChildren().models,this.getChildren().models=i,this._currentQuestionComponents=this.findDescendants("components").where({_isQuestionType:!0});var r=new Backbone.Collection(this._currentQuestionComponents);this.set("_currentQuestionComponentIds",r.pluck("_id"));var a=s._isResetOnRevisit!==!1&&!n.isPass||1==t;(o||a)&&(this._resetQuestions(),this.set("_attemptInProgress",!0),e.trigger("assessments:reset",this.getState(),this)),n.isComplete||this.set("_attemptInProgress",!0),this._overrideQuestionComponentSettings(),this._setupQuestionListeners(),this._checkNumberOfQuestionsAnswered(),this._updateQuestionsState(),e.assessment.saveState()},_setupBankedAssessment:function(){var e=this.getConfig();this._setupBanks();var t=[];for(var i in this._questionBanks){var s=this._questionBanks[i],n=s.getRandomQuestionBlocks();t=t.concat(n)}return e._banks._randomisation&&(t=_.shuffle(t)),t},_setupBanks:function(){var e=this.getConfig(),i=e._banks._split.split(",");this._questionBanks=[];for(var s=0,n=i.length;s<n;s++){var o=i[s],r=s+1,a=new t(r,this.get("_id"),o,!0);this._questionBanks[r]=a}for(var l=this.getChildren().models,s=0,n=l.length;s<n;s++){var c=l[s],d=c.get("_assessment"),r=d._quizBankID;this._questionBanks[r].addBlock(c)}},_setupRandomisedAssessment:function(){var e=this.getConfig(),t=e._randomisation,i=this.getChildren().models,s=_.shuffle(i);return s=s.slice(0,t._blockCount)},_overrideQuestionComponentSettings:function(){var e=this.getConfig()._questions,t=this._currentQuestionComponents,i={};if(e.hasOwnProperty("_canShowFeedback")&&(i._canShowFeedback=e._canShowFeedback),e.hasOwnProperty("_canShowModelAnswer")&&(i._canShowModelAnswer=e._canShowModelAnswer),!_.isEmpty(i))for(var s=0,n=t.length;s<n;s++)t[s].set(i,{pluginName:"_assessment"})},_setupQuestionListeners:function(){for(var e=this._currentQuestionComponents,t=0,i=e.length;t<i;t++){var s=e[t];s.get("_isInteractionComplete")||this.listenTo(s,"change:_isInteractionComplete",this._onQuestionCompleted)}},_checkNumberOfQuestionsAnswered:function(){for(var e=this._currentQuestionComponents,t=0,i=0,s=e.length;i<s;i++){var n=e[i];n.get("_isInteractionComplete")&&t++}this.set("_numberOfQuestionsAnswered",t)},_removeQuestionListeners:function(){for(var e=this._currentQuestionComponents,t=0,i=e.length;t<i;t++){var s=e[t];this.stopListening(s,"change:_isInteractionComplete",this._onQuestionCompleted)}},_onQuestionCompleted:function(t,i){if(i!==!1&&t.get("_isInteractionComplete")){var s=this.get("_numberOfQuestionsAnswered");s++,this.set("_numberOfQuestionsAnswered",s),this._updateQuestionsState(),e.assessment.saveState(),this._checkAssessmentComplete()}},_checkAssessmentComplete:function(){var e=this.get("_numberOfQuestionsAnswered"),t=e>=this._currentQuestionComponents.length;t&&this._onAssessmentComplete()},_onAssessmentComplete:function(){this.getConfig();this.set("_attemptInProgress",!1),this._spendAttempt();var t=this._getScoreAsPercent(),i=this._getScore(),s=this._getMaxScore();this.set({_scoreAsPercent:t,_score:i,_maxScore:s,_lastAttemptScoreAsPercent:t,_assessmentCompleteInSession:!0,_isAssessmentComplete:!0}),this._updateQuestionsState(),this._checkIsPass(),this._removeQuestionListeners(),e.trigger("assessments:complete",this.getState(),this)},_updateQuestionsState:function(){for(var e=[],t=this._currentQuestionComponents,i=0,s=t.length;i<s;i++){var n=t[i],o={_id:n.get("_id"),_isCorrect:void 0===n.get("_isCorrect")?null:n.get("_isCorrect")};e.push(o)}this.set({_questions:e})},_checkIsPass:function(){var e=this.getConfig(),t=e._isPercentageBased,i=e._scoreToPass,s=this.get("_scoreAsPercent"),n=this.get("_score"),o=!1;n&&s&&(o=t?s>=i:n>=i),this.set("_isPass",o)},_isAttemptsLeft:function(){var e=this.getConfig(),t=e._attempts&&"infinite"!=e._attempts;return!t||0!==this.get("_attemptsLeft")},_spendAttempt:function(){if(!this._isAttemptsLeft())return!1;var e=this.get("_attemptsSpent");if(e++,this.set("_attemptsSpent",e),"infinite"==this.get("_attempts"))return!0;var t=this.get("_attemptsLeft");return t--,this.set("_attemptsLeft",t),!0},_getScore:function(){for(var e=0,t=this._currentQuestionComponents,i=0,s=t.length;i<s;i++){var n=t[i];n.get("_isCorrect")&&n.get("_questionWeight")&&(e+=n.get("_questionWeight"))}return e},_getMaxScore:function(){for(var e=0,t=this._currentQuestionComponents,i=0,s=t.length;i<s;i++){var n=t[i];n.get("_questionWeight")&&(e+=n.get("_questionWeight"))}return e},_getScoreAsPercent:function(){return 0===this._getMaxScore()?0:Math.round(this._getScore()/this._getMaxScore()*100)},_getLastAttemptScoreAsPercent:function(){return this.get("_lastAttemptScoreAsPercent")},_checkReloadPage:function(){if(!this.canResetInPage())return!1;var t=this.getParent().get("_id"),i=e.location._currentId;return i==t&&!!this.get("_isReady")},_reloadPage:function(){this._forceResetOnRevisit=!0,Backbone.history.navigate("#/id/"+e.location._currentId,{replace:!0,trigger:!0})},_resetQuestions:function(){for(var e=this.getConfig(),t=this._currentQuestionComponents,i=0,s=t.length;i<s;i++){var n=t[i];n.reset(e._questions._resetType,!0)}},_onRemove:function(){this._removeQuestionListeners()},_setCompletionStatus:function(){this.set({_isComplete:!0,_isInteractionComplete:!0})},_checkIfQuestionsWereRestored:function(){if(!this.get("_assessmentCompleteInSession")&&this.get("_isAssessmentComplete")){for(var t=!0,i=this.get("_questions"),s=0,n=i.length;s<n;s++){var o=i[s],r=e.findById(o._id);if(!r.get("_isSubmitted")){t=!1;break}}return!t&&(this.set("_assessmentCompleteInSession",!0),!0)}},isAssessmentEnabled:function(){return!(!this.get("_assessment")||!this.get("_assessment")._isEnabled)},canResetInPage:function(){var e=this.getConfig();return e._reloadPageOnReset!==!1},reset:function(e){var t=this.getConfig();e=this._forceResetOnRevisit||1==e,this._forceResetOnRevisit=!1;var i=this._checkReloadPage();if(this.get("_assessmentCompleteInSession")&&!t._isResetOnRevisit&&!i&&!e)return!1;var s=this._checkIfQuestionsWereRestored();return e=e||s,s&&!this._isAttemptsLeft()&&(this.set({_attemptsLeft:this.get("_attempts")}),this.set({_attemptsSpent:0})),!(!this._isAttemptsLeft()&&!e)&&(i?this._reloadPage():this._setupAssessmentData(e),!0)},getSaveState:function(){var e=this.getState(),t=e.questions,i=_.indexBy(t,"_id");for(var s in i)i[s]=i[s]._isCorrect;var n=[e.isComplete?1:0,e.attemptsSpent,e.maxScore,e.score,e.attemptInProgress?1:0,i];return n},setRestoreState:function(t){var i,s=1==t[0],n=this.get("_attempts"),o=t[1],r=t[2],a=t[3],l=1==t[4],c=t[5],d={};for(var u in c){var h=e.findById(u).get("_parentId");d[h]=e.findById(h)}var p=_.values(d);c&&(this.getChildren().models=p),this.set("_isAssessmentComplete",s),this.set("_assessmentCompleteInSession",!1),this.set("_attemptsSpent",o),this.set("_attemptInProgress",l),"infinite"==n?this.set("_attemptsLeft","infinite"):this.set("_attemptsLeft",n-o),this.set("_maxScore",r||this._getMaxScore()),this.set("_score",a||0),i=a?Math.floor(a/r*100):0,this.set("_scoreAsPercent",i),this.set("_lastAttemptScoreAsPercent",i);var m=[];for(var u in c)m.push({_id:u,_isCorrect:c[u]});this.set("_questions",m),this._checkIsPass()},getState:function(){var e=this.getConfig(),t={id:e._id,type:"article-assessment",pageId:this.getParent().get("_id"),isEnabled:e._isEnabled,isComplete:this.get("_isAssessmentComplete"),isPercentageBased:e._isPercentageBased,scoreToPass:e._scoreToPass,score:this.get("_score"),scoreAsPercent:this.get("_scoreAsPercent"),maxScore:this.get("_maxScore"),isPass:this.get("_isPass"),includeInTotalScore:e._includeInTotalScore,assessmentWeight:e._assessmentWeight,attempts:this.get("_attempts"),attemptsSpent:this.get("_attemptsSpent"),attemptsLeft:this.get("_attemptsLeft"),attemptInProgress:this.get("_attemptInProgress"),lastAttemptScoreAsPercent:this.get("_lastAttemptScoreAsPercent"),questions:this.get("_questions"),questionModels:new Backbone.Collection(this._currentQuestionComponents)};return t},getConfig:function(){var e=this.get("_assessment");return void 0!==e._id?e:(e._id="givenId"+i++,e=e?$.extend(!0,{},s,e):$.extend(!0,{},s),this.set("_assessment",e),e)}};return n}),define("extensions/adapt-contrib-assessment/js/assessment",["coreJS/adapt"],function(e){var t={_postTotalScoreToLms:!0,_isPercentageBased:!0,_scoreToPass:100,_requireAssessmentPassed:!1,_isDefaultsLoaded:!0};e.assessment=_.extend({_assessments:_.extend([],{_byPageId:{},_byAssessmentId:{}}),initialize:function(){this.listenTo(e,"assessments:complete",this._onAssessmentsComplete),this.listenTo(e,"router:location",this._checkResetAssessmentsOnRevisit)},_onAssessmentsComplete:function(e){var t=e.id;e.isComplete=!0,void 0!==t&&(this._getStateByAssessmentId(t)||console.warn("assessments: state was not registered when assessment was created"),this.saveState(),this._setPageProgress(),this._checkAssessmentsComplete())},_restoreModelState:function(t){if(this._saveStateModel||(this._saveStateModel=e.offlineStorage.get("assessment")),this._saveStateModel){var i=t.getState();this._saveStateModel[i.id]&&t.setRestoreState(this._saveStateModel[i.id])}},_checkResetAssessmentsOnRevisit:function(e){if("page"===e._contentType){var t=this._getAssessmentByPageId(e._currentId);if(void 0!==t){for(var i=0,s=t.length;i<s;i++){var n=t[i];n.reset()}this._setPageProgress()}}},_checkAssessmentsComplete:function(){var e=!0,t=0,i=this._getStatesByAssessmentId(),s=[];for(var n in i){var o=i[n];if(o.includeInTotalScore){if(!o.isComplete){e=!1;break}t++,s.push(o)}}return!(!e||0===t)&&(1===t&&this._setupSingleAssessmentConfiguration(s[0]),this._postScoreToLms(),!0)},_setupSingleAssessmentConfiguration:function(t){var i=e.course.get("_assessment");$.extend(!0,i,{_postTotalScoreToLms:t.includeInTotalScore,_isPercentageBased:t.isPercentageBased,_scoreToPass:t.scoreToPass}),e.course.set("_assessment",i)},_postScoreToLms:function(){var t=this.getConfig();if(t._postTotalScoreToLms!==!1){var i=this.getState();_.defer(function(){e.trigger("assessment:complete",i)})}},_getAssessmentByPageId:function(e){return this._assessments._byPageId[e]},_getStateByAssessmentId:function(e){return this._assessments._byAssessmentId[e].getState()},_getStatesByAssessmentId:function(){for(var e={},t=0,i=this._assessments.length;t<i;t++){var s=this._assessments[t],n=s.getState();e[n.id]=n}return e},_setPageProgress:function(){var t=this.getConfig()._requireAssessmentPassed;for(var i in this._assessments._byPageId){for(var s=this._assessments._byPageId[i],n=s.length,o=0,r=0,a=s.length;r<a;r++){var l,c=s[r].getState();t&&c.includeInTotalScore?c.isPass&&(l=c.isComplete):l=c.isComplete,l&&(o+=1)}try{var d=e.findById(i);d.set("_subProgressTotal",n),d.set("_subProgressComplete",o)}catch(e){}}},register:function(t){var i=t.getState(),s=i.id,n=i.pageId;void 0===this._assessments._byPageId[n]&&(this._assessments._byPageId[n]=[]),this._assessments._byPageId[n].push(t),s&&(this._assessments._byAssessmentId[s]=t),this._assessments.push(t),this._restoreModelState(t),e.trigger("assessments:register",i,t),this._setPageProgress()},get:function(e){return void 0===e?this._assessments.slice(0):this._assessments._byAssessmentId[e]},saveState:function(){this._saveStateModel={};for(var t,i=0;t=this._assessments[i++];){var s=t.getState();this._saveStateModel[s.id]=t.getSaveState()}e.offlineStorage.set("assessment",this._saveStateModel)},getConfig:function(){var i=e.course.get("_assessment");return i&&i._isDefaultsLoaded?i:(i=void 0===i?$.extend(!0,{},t):$.extend(!0,{},t,i),e.course.set("_assessment",i),i)},getState:function(){var e=this.getConfig(),t=0,i=0,s=!1,n=0,o=this._getStatesByAssessmentId(),r=0;for(var a in o){var l=o[a];l.includeInTotalScore&&(l.isComplete&&r++,n++,i+=l.maxScore/l.assessmentWeight,t+=l.score/l.assessmentWeight,s=s!==!1&&l.isPass)}var c=r==n,d=Math.round(t/i*100);return e._scoreToPass,c&&(e._isPercentageBased,d>=e._scoreToPass&&(s=!0)),{isComplete:c,isPercentageBased:e._isPercentageBased,requireAssessmentPassed:e._requireAssessmentPassed,isPass:s,scoreAsPercent:d,maxScore:i,score:t,assessmentsComplete:r,assessments:n}}},Backbone.Events),e.assessment.initialize()}),define("extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension",["coreJS/adapt","coreViews/articleView","coreModels/articleModel","./adapt-assessmentArticleView","./adapt-assessmentArticleModel","./assessment"],function(e,t,i,s,n){var o=t.prototype.initialize;t.prototype.initialize=function(e){return this.model.get("_assessment")&&this.model.get("_assessment")._isEnabled===!0&&_.extend(this,s),o.apply(this,arguments)};var r=i.prototype.initialize;i.prototype.initialize=function(e){if(this.get("_assessment")&&this.get("_assessment")._isEnabled===!0){_.extend(this,n);var t=r.apply(this,arguments);return this._postInitialize(),t}return r.apply(this,arguments)}}),define("extensions/adapt-contrib-bookmarking/js/adapt-contrib-bookmarking",["coreJS/adapt"],function(e){var t=_.extend({bookmarkLevel:null,watchViewIds:null,watchViews:[],restoredLocationID:null,currentLocationID:null,initialize:function(){this.listenToOnce(e,"router:location",this.onAdaptInitialize)},onAdaptInitialize:function(){this.checkIsEnabled()&&(this.setupEventListeners(),this.checkRestoreLocation())},checkIsEnabled:function(){var t=e.course.get("_bookmarking");return!(!t||!t._isEnabled)&&!!e.offlineStorage},setupEventListeners:function(){this._onScroll=_.debounce(_.bind(this.checkLocation,t),1e3),this.listenTo(e,"menuView:ready",this.setupMenu),this.listenTo(e,"pageView:preRender",this.setupPage)},checkRestoreLocation:function(){this.restoredLocationID=e.offlineStorage.get("location"),this.restoredLocationID&&"undefined"!==this.restoredLocationID&&this.listenToOnce(e,"pageView:ready menuView:ready",this.restoreLocation)},restoreLocation:function(){_.defer(_.bind(function(){if(this.stopListening(e,"pageView:ready menuView:ready",this.restoreLocation),this.restoredLocationID!=e.location._currentId){try{var t=e.findById(this.restoredLocationID)}catch(e){return}if(t){var i=$("."+this.restoredLocationID).onscreen(),s=i&&i.percentInview>0,n=i&&100===i.percentInview;s&&n||this.showPrompt()}}},this))},showPrompt:function(){var t=e.course.get("_bookmarking");t._buttons||(t._buttons={yes:"Yes",no:"No"}),t._buttons.yes||(t._buttons.yes="Yes"),t._buttons.no||(t._buttons.no="No"),this.listenToOnce(e,"bookmarking:continue",this.navigateToPrevious),this.listenToOnce(e,"bookmarking:cancel",this.navigateCancel);var i={title:t.title,body:t.body,_prompts:[{promptText:t._buttons.yes,_callbackEvent:"bookmarking:continue"},{promptText:t._buttons.no,_callbackEvent:"bookmarking:cancel"}],_showIcon:!0};e.config.get("_accessibility")&&e.config.get("_accessibility")._isActive?($(".loading").show(),$("#a11y-focuser").focus(),$("body").attr("aria-hidden",!0),_.delay(function(){$(".loading").hide(),$("body").removeAttr("aria-hidden"),e.trigger("notify:prompt",i)},3e3)):e.trigger("notify:prompt",i)},navigateToPrevious:function(){_.defer(_.bind(function(){var t=1==e.contentObjects.models.length;Backbone.history.navigate("#/id/"+this.restoredLocationID,{trigger:!0,replace:t})},this)),this.stopListening(e,"bookmarking:cancel")},navigateCancel:function(){this.stopListening(e,"bookmarking:continue")},resetLocationID:function(){this.setLocationID("")},setupMenu:function(e){var t=e.model;return t.get("_parentId")?this.setLocationID(t.get("_id")):void this.resetLocationID()},setupPage:function(t){var i=t.model.has("_bookmarking"),s=i?t.model.get("_bookmarking"):e.course.get("_bookmarking");return this.bookmarkLevel=s._level,s._isEnabled?(this.setLocationID(t.model.get("_id")),this.watchViewIds=t.model.findDescendants(this.bookmarkLevel+"s").pluck("_id"),this.listenTo(e,this.bookmarkLevel+"View:postRender",this.captureViews),this.listenToOnce(e,"remove",this.releaseViews),$(window).on("scroll",this._onScroll),void 0):void this.resetLocationID()},captureViews:function(e){this.watchViews.push(e)},setLocationID:function(t){e.offlineStorage&&this.currentLocationID!=t&&(e.offlineStorage.set("location",t),this.currentLocationID=t)},releaseViews:function(){this.watchViews.length=0,this.watchViewIds.length=0,this.stopListening(e,"remove",this.releaseViews),this.stopListening(e,this.bookmarkLevel+"View:postRender",this.captureViews),$(window).off("scroll",this._onScroll)},checkLocation:function(){for(var e=0,t="",i=0,s=this.watchViews.length;i<s;i++){var n=this.watchViews[i],o=_.indexOf(this.watchViewIds,n.model.get("_id"))>-1;if(o){var r=$("."+n.model.get("_id")),a=r.is(":visible");if(a){var l=r.onscreen();l.percentInview>e&&(e=l.percentInview,t=n.model.get("_id"))}}}t&&this.setLocationID(t)}},Backbone.Events);t.initialize()}),define("extensions/adapt-contrib-languagePicker/js/accessibilityView",["core/js/adapt"],function(e){var t=Backbone.View.extend({el:"#accessibility-toggle",events:{click:"toggleAccessibility"},initialize:function(){this.setupHelpers(),this.setupUsageInstructions(),e.offlineStorage.ready?this.onOfflineStorageReady():e.once("offlineStorage:ready",_.bind(this.onOfflineStorageReady,this))},onOfflineStorageReady:function(){e.config.get("_accessibility")._isActive=e.offlineStorage.get("a11y")||!1,this.configureAccessibility(),this.render()},render:function(){var t=e.config.has("_accessibility")&&e.config.get("_accessibility")._isEnabled;if(t){var i=e.config.get("_accessibility")._isActive,s=this.model.get("_accessibility")&&this.model.get("_accessibility").accessibilityToggleTextOff,n=this.model.get("_accessibility")&&this.model.get("_accessibility").accessibilityToggleTextOn,o=i?s:n;this.$el.html(o).attr("aria-label",$.a11y_normalize(o)),i?($("html").addClass("accessibility"),$("#accessibility-instructions").a11y_focus()):$("html").removeClass("accessibility")}},toggleAccessibility:function(t){t&&t.preventDefault();var i=e.config.get("_accessibility")._isActive,s=!i;e.config.get("_accessibility")._isActive=s,this.configureAccessibility(),this.setupUsageInstructions(),this.render(),this.trigger("accessibility:toggle")},setupHelpers:function(){var t=e.config.get("_accessibility");Handlebars.registerHelper("a11y_text",function(e){return t&&t._isTextProcessorEnabled===!1?e:$.a11y_text(e)})},configureAccessibility:function(){var t=e.config.get("_accessibility")._isActive;Modernizr.touch||e.offlineStorage.get("a11y")===t||e.offlineStorage.set("a11y",t),t?_.extend($.a11y.options,{isTabbableTextEnabled:!0,isUserInputControlEnabled:!0,isFocusControlEnabled:!0,isFocusLimited:!0,isRemoveNotAccessiblesEnabled:!0,isAriaLabelFixEnabled:!0,isFocusWrapEnabled:!0,isScrollDisableEnabled:!0,isScrollDisabledOnPopupEnabled:!1,isSelectedAlertsEnabled:!0,isAlertsEnabled:!0}):_.extend($.a11y.options,{isTabbableTextEnabled:!1,isUserInputControlEnabled:!0,isFocusControlEnabled:!0,isFocusLimited:!1,isRemoveNotAccessiblesEnabled:!0,isAriaLabelFixEnabled:!0,isFocusWrapEnabled:!0,isScrollDisableEnabled:!0,isScrollDisabledOnPopupEnabled:!1,isSelectedAlertsEnabled:!1,isAlertsEnabled:!1}),$.a11y.ready()},setupUsageInstructions:function(){if(!this.model.get("_accessibility")||!this.model.get("_accessibility")._accessibilityInstructions)return void $("#accessibility-instructions").remove();var t,i=this.model.get("_accessibility")._accessibilityInstructions;t=i[e.device.browser]?i[e.device.browser]:Modernizr.touch?i.touch||"":i.notouch||"",$("#accessibility-instructions").html(t)}});return t}),define("extensions/adapt-contrib-languagePicker/js/languagePickerView",["core/js/adapt","./accessibilityView"],function(e,t){var i=Backbone.View.extend({events:{"click .languagepicker-languages button":"onLanguageClick"},className:"languagepicker",initialize:function(){this.initializeAccessibility(),this.listenTo(e,"remove",this.remove),this.render()},render:function(){var e=this.model.toJSON(),t=Handlebars.templates[this.constructor.template];this.$el.html(t(e)),document.title=this.model.get("title")||"",_.defer(_.bind(function(){this.postRender()},this))},postRender:function(){$(".loading").hide()},onLanguageClick:function(e){this.destroyAccessibility(),this.model.setLanguage($(e.target).val())},initializeAccessibility:function(){$("html").addClass("in-languagepicker"),this.accessibilityView=new t({model:this.model}),this.listenTo(this.accessibilityView,"accessibility:toggle",this.render)},destroyAccessibility:function(){$("html").removeClass("in-languagepicker"),this.accessibilityView.remove()}},{template:"languagePickerView"});return i}),define("extensions/adapt-contrib-languagePicker/js/languagePickerDrawerView",["core/js/adapt","backbone"],function(e,t){var i=t.View.extend({events:{"click button":"onButtonClick"},initialize:function(){this.listenTo(e,"remove",this.remove),this.listenTo(e,"languagepicker:changelanguage:yes",this.onDoChangeLanguage),this.listenTo(e,"languagepicker:changelanguage:no",this.onDontChangeLanguage),this.render()},render:function(){var e=this.model.toJSON(),t=Handlebars.templates[this.constructor.template];this.$el.html(t(e))},onButtonClick:function(t){var i=$(t.target).attr("data-language");this.model.set("newLanguage",i);var s=this.model.getLanguageDetails(i),n={_classes:"dir-ltr",title:s.warningTitle,body:s.warningMessage,_prompts:[{promptText:s._buttons.yes,_callbackEvent:"languagepicker:changelanguage:yes"},{promptText:s._buttons.no,_callbackEvent:"languagepicker:changelanguage:no"}],_showIcon:!0};"rtl"===s._direction&&(n._classes="dir-rtl"),this.$finishFocus=$.a11y.state.focusStack.pop(),$.a11y.state.focusStack.push($("#focuser")),e.once("drawer:closed",function(){_.delay(function(){e.once("popup:opened",function(){$.a11y.state.focusStack.pop(),$.a11y.state.focusStack.push($("#focuser"))}),e.trigger("notify:prompt",n)},250)}),e.trigger("drawer:closeDrawer")},onDoChangeLanguage:function(){var e=this.model.get("newLanguage");this.model.setLanguage(e),this.remove()},onDontChangeLanguage:function(){this.remove(),_.delay(_.bind(function(){this.$finishFocus.a11y_focus()},this),500)}},{template:"languagePickerDrawerView"});return i}),define("extensions/adapt-contrib-languagePicker/js/languagePickerNavView",["core/js/adapt","backbone","./languagePickerDrawerView"],function(e,t,i){var s=t.View.extend({tagName:"button",className:function(){var e="languagepicker-icon base icon",t=this.model.get("_languagePickerIconClass")||"icon-language-2";return e+" "+t},events:{click:"onClick"},initialize:function(){this.listenTo(e,"remove",this.remove)},onClick:function(t){e.drawer.triggerCustomView(new i({model:this.model}).$el,!1)}});return s}),define("extensions/adapt-contrib-languagePicker/js/languagePickerModel",["core/js/adapt","backbone"],function(e,t){var i=t.Model.extend({defaults:{_isEnabled:!1,displayTitle:"",body:"",_languages:[]},initialize:function(){this.listenTo(e.config,"change:_activeLanguage",this.onConfigChange)},getLanguageDetails:function(e){var t=this.get("_languages");return _.find(t,function(t){return t._language==e})},setLanguage:function(t){e.config.set({_activeLanguage:t,_defaultDirection:this.getLanguageDetails(t)._direction})},onConfigChange:function(e,t,i){this.markLanguageAsSelected(t)},markLanguageAsSelected:function(e){for(var t=this.get("_languages"),i=0;i<t.length;i++)t[i]._language===e?t[i]._isSelected=!0:t[i]._isSelected=!1;this.set("_languages",t)}});return i}),define("extensions/adapt-contrib-languagePicker/js/adapt-languagePicker",["core/js/adapt","backbone","./languagePickerView","./languagePickerNavView","./languagePickerModel"],function(e,t,i,s,n){function o(){e.config.has("_languagePicker")&&e.config.get("_languagePicker")._isEnabled&&(e.config.set("_canLoadData",!1),c=new n(e.config.get("_languagePicker")),e.on("router:page",l),e.on("router:menu",l),e.offlineStorage.ready?r():e.once("offlineStorage:ready",r))}function r(){var t=e.offlineStorage.get("lang");t?c.setLanguage(t):c.get("_showOnCourseLoad")===!1?c.setLanguage(e.config.get("_defaultLanguage")):a()}function a(){var e=new i({model:c});e.$el.appendTo("#wrapper")}function l(){var e=new s({model:c});e.$el.appendTo(".navigation-inner")}var c;e.once("configModel:dataLoaded",o)}),define("extensions/adapt-contrib-pageLevelProgress/js/completionCalculations",["coreJS/adapt"],function(e){function t(a){var c=a.get("_type"),d=0,u=0,h=0,p=0,m=0,f=0,g=a.get("_isComplete")?1:0;if("page"==c){var v=a.findDescendants("components").where({_isAvailable:!0,_isOptional:!1}),b=l(v),y=r(b),w=i(y);d=0|w.length,u=n(w).length;var k=s(y);h=0|k.length,p=o(k).length,m=a.get("_subProgressComplete")||0,f=a.get("_subProgressTotal")||0;var S={subProgressCompleted:m,subProgressTotal:f,nonAssessmentCompleted:u,nonAssessmentTotal:d,assessmentCompleted:p,assessmentTotal:h};return a.get("_pageLevelProgress")&&a.get("_pageLevelProgress")._showPageCompletion!==!1&&e.course.get("_pageLevelProgress")&&e.course.get("_pageLevelProgress")._showPageCompletion!==!1&&(S.nonAssessmentCompleted+=g,S.nonAssessmentTotal+=1),S}if("menu"==c)return _.each(a.get("_children").models,function(e){var i=t(e);m+=a.subProgressCompleted||0,f+=a.subProgressTotal||0,d+=i.nonAssessmentTotal,u+=i.nonAssessmentCompleted,h+=i.assessmentTotal,p+=i.assessmentCompleted}),{subProgressCompleted:m,subProgressTotal:f,nonAssessmentCompleted:u,nonAssessmentTotal:d,assessmentCompleted:p,assessmentTotal:h}}function i(e){return _.filter(e,function(e){return!e.get("_isPartOfAssessment")})}function s(e){return _.filter(e,function(e){return e.get("_isPartOfAssessment")})}function n(e){return _.filter(e,function(e){return e.get("_isComplete")})}function o(e){return _.filter(e,function(e){return e.get("_isInteractionComplete")})}function r(e){return _.filter(e,function(e){if(e.get("_pageLevelProgress"))return e.get("_pageLevelProgress")._isEnabled})}function a(e){if(e.length>0){var t=_.map(e,function(e){return e.get("_isAvailable")});return _.indexOf(t,!1)>-1}}function l(e){for(var t=[],i=0;i<e.length;i++){var s=e[i].getParents().models;a(s)||t.push(e[i])}return t}return{calculateCompletion:t,getPageLevelProgressEnabledModels:r,filterAvailableChildren:l}}),define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView",["require","coreJS/adapt","backbone"],function(e){var t=e("coreJS/adapt"),i=e("backbone"),s=i.View.extend({className:"page-level-progress-menu-item",initialize:function(){this.listenTo(t,"remove",this.remove),this.ariaText="",t.course.get("_globals")._extensions&&t.course.get("_globals")._extensions._pageLevelProgress&&t.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressMenuBar&&(this.ariaText=t.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressMenuBar+" "),this.render(),_.defer(_.bind(function(){this.updateProgressBar()},this))},events:{},render:function(){var e=this.model.toJSON();_.extend(e,{_globals:t.course.get("_globals")});var i=Handlebars.templates.pageLevelProgressMenu;return this.$el.html(i(e)),this},updateProgressBar:function(){if(this.model.get("completedChildrenAsPercentage"))var e=this.model.get("completedChildrenAsPercentage");else var e=0;this.$(".page-level-progress-menu-item-indicator-bar .aria-label").html(this.ariaText+Math.floor(e)+"%")}});return s}),define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView",["require","coreJS/adapt","backbone"],function(e){var t=e("coreJS/adapt"),i=e("backbone"),s=i.View.extend({className:"page-level-progress",
initialize:function(){this.listenTo(t,"remove",this.remove),this.render()},events:{"click .page-level-progress-item button":"scrollToPageElement"},scrollToPageElement:function(e){e&&e.preventDefault&&e.preventDefault();var i="."+$(e.currentTarget).attr("data-page-level-progress-id"),s=$(i);t.once("drawer:closed",function(){t.scrollTo(s,{duration:400})}),t.trigger("drawer:closeDrawer")},render:function(){var e=this.collection.toJSON(),i={components:e,_globals:t.course.get("_globals")},s=Handlebars.templates.pageLevelProgress;return this.$el.html(s(i)),this.$el.a11y_aria_label(!0),this}});return s}),define("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView",["require","coreJS/adapt","backbone","./completionCalculations","extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView"],function(e){var t=e("coreJS/adapt"),i=e("backbone"),s=e("./completionCalculations"),n=e("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView"),o=i.View.extend({tagName:"button",className:"base page-level-progress-navigation",initialize:function(){this.listenTo(t,"remove",this.remove),this.listenTo(t,"router:location",this.updateProgressBar),this.listenTo(t,"pageLevelProgress:update",this.refreshProgressBar),this.listenTo(this.collection,"change:_isInteractionComplete",this.updateProgressBar),this.listenTo(this.model,"change:_isInteractionComplete",this.updateProgressBar),this.$el.attr("role","button"),this.ariaText="",t.course.has("_globals")&&t.course.get("_globals")._extensions&&t.course.get("_globals")._extensions._pageLevelProgress&&t.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressIndicatorBar&&(this.ariaText=t.course.get("_globals")._extensions._pageLevelProgress.pageLevelProgressIndicatorBar+" "),this.render(),_.defer(_.bind(function(){this.updateProgressBar()},this))},events:{click:"onProgressClicked"},render:function(){var e=this.collection.toJSON(),i={components:e,_globals:t.course.get("_globals")},s=Handlebars.templates.pageLevelProgressNavigation;return $(".navigation-drawer-toggle-button").after(this.$el.html(s(i))),this},refreshProgressBar:function(){var e=this.model.findDescendants("components").where({_isAvailable:!0}),t=s.filterAvailableChildren(e),n=s.getPageLevelProgressEnabledModels(t);this.collection=new i.Collection(n),this.updateProgressBar()},updateProgressBar:function(){var e=s.calculateCompletion(this.model),t=e.nonAssessmentCompleted+e.assessmentCompleted+e.subProgressCompleted,i=e.nonAssessmentTotal+e.assessmentTotal+e.subProgressTotal,n=Math.floor(t/i*100);this.$(".page-level-progress-navigation-bar").css("width",n+"%"),this.$el.attr("aria-label",this.ariaText+n+"%"),this.model.set("completedChildrenAsPercentage",n)},onProgressClicked:function(e){e&&e.preventDefault&&e.preventDefault(),t.drawer.triggerCustomView(new n({collection:this.collection}).$el,!1)}});return o}),define("extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress",["require","coreJS/adapt","backbone","./completionCalculations","extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView","extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView"],function(e){function t(e,t){new r({model:e,collection:new s.Collection(t)})}var i=e("coreJS/adapt"),s=e("backbone"),n=e("./completionCalculations"),o=e("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressMenuView"),r=e("extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView");i.on("menuView:postRender",function(e){if(e.model.get("_id")!=i.location._currentId&&i.course.get("_pageLevelProgress")&&i.course.get("_pageLevelProgress")._isEnabled){var t=e.model.get("_pageLevelProgress"),s=e.model.get("_type");if("course"!=s&&t&&t._isEnabled){var r=n.calculateCompletion(e.model),a=r.nonAssessmentCompleted+r.subProgressCompleted,l=r.nonAssessmentTotal+r.subProgressTotal,c=Math.floor(a/l*100);e.model.set("completedChildrenAsPercentage",c),e.$el.find(".menu-item-inner").append(new o({model:e.model}).$el)}}}),i.on("router:page",function(e){if(i.course.get("_pageLevelProgress")&&i.course.get("_pageLevelProgress")._isEnabled){var s=e.findDescendants("components").where({_isAvailable:!0}),o=n.filterAvailableChildren(s),r=n.getPageLevelProgressEnabledModels(o);r.length>0&&t(e,r)}})}),define("extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView",["require","backbone","core/js/adapt"],function(e){var t=e("backbone"),i=e("core/js/adapt"),s=t.View.extend({className:"resources",initialize:function(){this.listenTo(i,"remove",this.remove),this.render()},events:{"click .resources-filter button":"onFilterClicked","click .resources-item-container button":"onResourceClicked"},render:function(){var e=this.collection.toJSON(),t=this.model.toJSON(),s=Handlebars.templates.resources;return this.$el.html(s({model:t,resources:e,_globals:i.course.get("_globals")})),_.defer(_.bind(this.postRender,this)),this},postRender:function(){this.listenTo(i,"drawer:triggerCustomView",this.remove)},onFilterClicked:function(e){e.preventDefault();var t=$(e.currentTarget);this.$(".resources-filter button").removeClass("selected");var i=t.addClass("selected").attr("data-filter"),s=[];"all"===i?s=this.$(".resources-item").removeClass("display-none"):(this.$(".resources-item").removeClass("display-none").not("."+i).addClass("display-none"),s=this.$(".resources-item."+i)),0!==s.length&&$(s[0]).a11y_focus()},onResourceClicked:function(e){window.top.open($(e.currentTarget).data("href"))}});return s}),define("extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers",["require","handlebars"],function(e){var t=e("handlebars");t.registerHelper("if_collection_contains",function(e,t,i,s){var n=!1;return _.each(e,function(e){e[t]===i&&(n=!0)}),n?s.fn(this):s.inverse()}),t.registerHelper("if_collection_contains_only_one_item",function(e,t,i){var s=[];return _.each(e,function(e){var i=e[t];_.indexOf(s,i)===-1&&s.push(i)}),s.length<=1?i.fn(this):i.inverse(this)}),t.registerHelper("return_column_layout_from_collection_length",function(e,t){var i=[];return _.each(e,function(e){var s=e[t];_.indexOf(i,s)===-1&&i.push(s)}),i.length+1})}),define("extensions/adapt-contrib-resources/js/adapt-contrib-resources",["backbone","core/js/adapt","./adapt-contrib-resourcesView","./adapt-contrib-resourcesHelpers"],function(e,t,i,s){function n(s){var n=new e.Model(s),o=new e.Collection(n.get("_resourcesItems"));t.on("resources:showResources",function(){t.drawer.triggerCustomView(new i({model:n,collection:o}).$el)})}function o(){var e=t.course.get("_resources");if(e&&e._isEnabled!==!1){var i={title:e.title,description:e.description,className:"resources-drawer"};t.drawer.addItem(i,"resources:showResources"),n(e)}}t.once("app:dataReady",function(){o(),t.on("app:languageChanged",o)})});var pipwerks={};pipwerks.UTILS={},pipwerks.debug={isActive:!0},pipwerks.SCORM={version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{}},pipwerks.SCORM.isAvailable=function(){return!0},pipwerks.SCORM.API.find=function(e){for(var t=null,i=0,s=500,n="SCORM.API.find",o=pipwerks.UTILS.trace,r=pipwerks.SCORM;!e.API&&!e.API_1484_11&&e.parent&&e.parent!=e&&i<=s;)i++,e=e.parent;if(r.version)switch(r.version){case"2004":e.API_1484_11?t=e.API_1484_11:o(n+": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");break;case"1.2":e.API?t=e.API:o(n+": SCORM version 1.2 was specified by user, but API cannot be found.")}else e.API_1484_11?(r.version="2004",t=e.API_1484_11):e.API&&(r.version="1.2",t=e.API);return t?(o(n+": API found. Version: "+r.version),o("API: "+t)):o(n+": Error finding API. \nFind attempts: "+i+". \nFind attempt limit: "+s),t},pipwerks.SCORM.API.get=function(){var e=null,t=window,i=pipwerks.SCORM,s=i.API.find,n=pipwerks.UTILS.trace;return e=s(t),!e&&t.parent&&t.parent!=t&&(e=s(t.parent)),!e&&t.top&&t.top.opener&&(e=s(t.top.opener)),!e&&t.top&&t.top.opener&&t.top.opener.document&&(e=s(t.top.opener.document)),e?i.API.isFound=!0:n("API.get failed: Can't find the API!"),e},pipwerks.SCORM.API.getHandle=function(){var e=pipwerks.SCORM.API;return e.handle||e.isFound||(e.handle=e.get()),e.handle},pipwerks.SCORM.connection.initialize=function(){var e=!1,t=pipwerks.SCORM,i=t.data.completionStatus,s=pipwerks.UTILS.trace,n=pipwerks.UTILS.StringToBoolean,o=t.debug,r="SCORM.connection.initialize ";if(s("connection.initialize called."),t.connection.isActive)s(r+"aborted: Connection already active.");else{var a=t.API.getHandle(),l=0;if(a){switch(t.version){case"1.2":e=n(a.LMSInitialize(""));break;case"2004":e=n(a.Initialize(""))}if(e)if(l=o.getCode(),null!==l&&0===l){if(t.connection.isActive=!0,t.handleCompletionStatus&&(i=t.status("get"))){switch(i){case"not attempted":t.status("set","incomplete");break;case"unknown":t.status("set","incomplete")}t.save()}}else e=!1,s(r+"failed. \nError code: "+l+" \nError info: "+o.getInfo(l));else l=o.getCode(),s(null!==l&&0!==l?r+"failed. \nError code: "+l+" \nError info: "+o.getInfo(l):r+"failed: No response from server.")}else s(r+"failed: API is null.")}return e},pipwerks.SCORM.connection.terminate=function(){var e=!1,t=pipwerks.SCORM,i=t.data.exitStatus,s=t.data.completionStatus,n=pipwerks.UTILS.trace,o=pipwerks.UTILS.StringToBoolean,r=t.debug,a="SCORM.connection.terminate ";if(t.connection.isActive){var l=t.API.getHandle(),c=0;if(l){if(t.handleExitMode&&!i)if("completed"!==s&&"passed"!==s)switch(t.version){case"1.2":e=t.set("cmi.core.exit","suspend");break;case"2004":e=t.set("cmi.exit","suspend")}else switch(t.version){case"1.2":e=t.set("cmi.core.exit","logout");break;case"2004":e=t.set("cmi.exit","normal")}if(e=t.save()){switch(t.version){case"1.2":e=o(l.LMSFinish(""));break;case"2004":e=o(l.Terminate(""))}e?t.connection.isActive=!1:(c=r.getCode(),n(a+"failed. \nError code: "+c+" \nError info: "+r.getInfo(c)))}}else n(a+"failed: API is null.")}else n(a+"aborted: Connection already terminated.");return e},pipwerks.SCORM.data.get=function(e){var t=null,i=pipwerks.SCORM,s=pipwerks.UTILS.trace,n=i.debug,o="SCORM.data.get('"+e+"') ";if(i.connection.isActive){var r=i.API.getHandle(),a=0;if(r){switch(i.version){case"1.2":t=r.LMSGetValue(e);break;case"2004":t=r.GetValue(e)}if(a=n.getCode(),""!==t||0===a)switch(e){case"cmi.core.lesson_status":case"cmi.completion_status":i.data.completionStatus=t;break;case"cmi.core.exit":case"cmi.exit":i.data.exitStatus=t}else s(o+"failed. \nError code: "+a+"\nError info: "+n.getInfo(a))}else s(o+"failed: API is null.")}else s(o+"failed: API connection is inactive.");return s(o+" value: "+t),String(t)},pipwerks.SCORM.data.set=function(e,t){var i=!1,s=pipwerks.SCORM,n=pipwerks.UTILS.trace,o=pipwerks.UTILS.StringToBoolean,r=s.debug,a="SCORM.data.set('"+e+"') ";if(s.connection.isActive){var l=s.API.getHandle(),c=0;if(l){switch(s.version){case"1.2":i=o(l.LMSSetValue(e,t));break;case"2004":i=o(l.SetValue(e,t))}i?"cmi.core.lesson_status"!==e&&"cmi.completion_status"!==e||(s.data.completionStatus=t):(c=r.getCode(),n(a+"failed. \nError code: "+c+". \nError info: "+r.getInfo(c)))}else n(a+"failed: API is null.")}else n(a+"failed: API connection is inactive.");return n(a+" value: "+t),i},pipwerks.SCORM.data.save=function(){var e=!1,t=pipwerks.SCORM,i=pipwerks.UTILS.trace,s=pipwerks.UTILS.StringToBoolean,n="SCORM.data.save failed";if(t.connection.isActive){var o=t.API.getHandle();if(o)switch(t.version){case"1.2":e=s(o.LMSCommit(""));break;case"2004":e=s(o.Commit(""))}else i(n+": API is null.")}else i(n+": API connection is inactive.");return e},pipwerks.SCORM.status=function(e,t){var i=!1,s=pipwerks.SCORM,n=pipwerks.UTILS.trace,o="SCORM.getStatus failed",r="";if(null!==e){switch(s.version){case"1.2":r="cmi.core.lesson_status";break;case"2004":r="cmi.completion_status"}switch(e){case"get":i=s.data.get(r);break;case"set":null!==t?i=s.data.set(r,t):(i=!1,n(o+": status was not specified."));break;default:i=!1,n(o+": no valid action was specified.")}}else n(o+": action was not specified.");return i},pipwerks.SCORM.debug.getCode=function(){var e=pipwerks.SCORM,t=e.API.getHandle(),i=pipwerks.UTILS.trace,s=0;if(t)switch(e.version){case"1.2":s=parseInt(t.LMSGetLastError(),10);break;case"2004":s=parseInt(t.GetLastError(),10)}else i("SCORM.debug.getCode failed: API is null.");return s},pipwerks.SCORM.debug.getInfo=function(e){var t=pipwerks.SCORM,i=t.API.getHandle(),s=pipwerks.UTILS.trace,n="";if(i)switch(t.version){case"1.2":n=i.LMSGetErrorString(e.toString());break;case"2004":n=i.GetErrorString(e.toString())}else s("SCORM.debug.getInfo failed: API is null.");return String(n)},pipwerks.SCORM.debug.getDiagnosticInfo=function(e){var t=pipwerks.SCORM,i=t.API.getHandle(),s=pipwerks.UTILS.trace,n="";if(i)switch(t.version){case"1.2":n=i.LMSGetDiagnostic(e);break;case"2004":n=i.GetDiagnostic(e)}else s("SCORM.debug.getDiagnosticInfo failed: API is null.");return String(n)},pipwerks.SCORM.init=pipwerks.SCORM.connection.initialize,pipwerks.SCORM.get=pipwerks.SCORM.data.get,pipwerks.SCORM.set=pipwerks.SCORM.data.set,pipwerks.SCORM.save=pipwerks.SCORM.data.save,pipwerks.SCORM.quit=pipwerks.SCORM.connection.terminate,pipwerks.UTILS.StringToBoolean=function(e){var t=typeof e;switch(t){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":return null;default:return!1}},pipwerks.UTILS.trace=function(e){pipwerks.debug.isActive&&window.console&&window.console.log&&window.console.log(e)},define("extensions/adapt-contrib-spoor/js/scorm/API",function(){}),define("extensions/adapt-contrib-spoor/js/scorm/wrapper",["require"],function(e){var t=function(){this.setCompletedWhenFailed=!0,this.commitOnStatusChange=!0,this.timedCommitFrequency=10,this.maxCommitRetries=5,this.commitRetryDelay=1e3,this.commitRetryPending=!1,this.commitRetries=0,this.lastCommitSuccessTime=null,this.timedCommitIntervalID=null,this.retryCommitTimeoutID=null,this.logOutputWin=null,this.startTime=null,this.endTime=null,this.lmsConnected=!1,this.finishCalled=!1,this.logger=Logger.getInstance(),this.scorm=pipwerks.SCORM,this.suppressErrors=!1,window.__debug&&this.showDebugWindow()};return t.instance=null,t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance},t.prototype.getVersion=function(){return this.scorm.version},t.prototype.setVersion=function(e){this.scorm.version=e,this.scorm.handleExitMode=this.isSCORM2004()},t.prototype.initialize=function(){return this.lmsConnected=this.scorm.init(),this.lmsConnected?(this.startTime=new Date,this.initTimedCommit()):this.handleError("Course could not connect to the LMS"),this.lmsConnected},t.prototype.isFirstSession=function(){return"ab-initio"===this.getValue(this.isSCORM2004()?"cmi.entry":"cmi.core.entry")},t.prototype.setIncomplete=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","incomplete"),this.commitOnStatusChange&&this.commit()},t.prototype.setCompleted=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","completed"),this.commitOnStatusChange&&this.commit()},t.prototype.setPassed=function(){this.isSCORM2004()?(this.setValue("cmi.completion_status","completed"),this.setValue("cmi.success_status","passed")):this.setValue("cmi.core.lesson_status","passed"),this.commitOnStatusChange&&this.commit()},t.prototype.setFailed=function(){this.isSCORM2004()?(this.setValue("cmi.success_status","failed"),this.setCompletedWhenFailed&&this.setValue("cmi.completion_status","completed")):this.setValue("cmi.core.lesson_status","failed"),this.commitOnStatusChange&&this.commit()},t.prototype.getStatus=function(){var e=this.getValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status");switch(e.toLowerCase()){case"passed":case"completed":case"incomplete":case"failed":case"browsed":case"not attempted":case"not_attempted":case"unknown":return e;default:return this.handleError("ScormWrapper::getStatus: invalid lesson status '"+e+"' received from LMS"),null}},t.prototype.setStatus=function(e){switch(e.toLowerCase()){case"incomplete":this.setIncomplete();break;case"completed":this.setCompleted();break;case"passed":this.setPassed();break;case"failed":this.setFailed();break;default:this.handleError("ScormWrapper::setStatus: the status '"+e+"' is not supported.")}},t.prototype.getScore=function(){return this.getValue(this.isSCORM2004()?"cmi.score.raw":"cmi.core.score.raw")},t.prototype.setScore=function(e,t,i){this.isSCORM2004()?(this.setValue("cmi.score.raw",e),this.setValue("cmi.score.min",t),this.setValue("cmi.score.max",i),this.setValue("cmi.score.scaled",e/100)):(this.setValue("cmi.core.score.raw",e),this.isSupported("cmi.core.score.min")&&this.setValue("cmi.core.score.min",t),this.isSupported("cmi.core.score.max")&&this.setValue("cmi.core.score.max",i))},t.prototype.getLessonLocation=function(){return this.getValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location")},t.prototype.setLessonLocation=function(e){this.setValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location",e)},t.prototype.getSuspendData=function(){return this.getValue("cmi.suspend_data")},t.prototype.setSuspendData=function(e){this.setValue("cmi.suspend_data",e)},t.prototype.getStudentName=function(){return this.getValue(this.isSCORM2004()?"cmi.learner_name":"cmi.core.student_name")},t.prototype.getStudentId=function(){return this.getValue(this.isSCORM2004()?"cmi.learner_id":"cmi.core.student_id")},t.prototype.commit=function(){if(this.logger.debug("ScormWrapper::commit"),this.lmsConnected)if(this.commitRetryPending)this.logger.debug("ScormWrapper::commit: skipping this commit call as one is already pending.");else if(this.scorm.save())this.commitRetries=0,this.lastCommitSuccessTime=new Date;else if(this.commitRetries<this.maxCommitRetries&&!this.finishCalled)this.commitRetries++,this.initRetryCommit();else{var e=this.scorm.debug.getCode(),t="Course could not commit data to the LMS";t+="\nError "+e+": "+this.scorm.debug.getInfo(e),t+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(e),this.handleError(t)}else this.handleError("Course is not connected to the LMS")},t.prototype.finish=function(){this.logger.debug("ScormWrapper::finish"),this.lmsConnected&&!this.finishCalled?(this.finishCalled=!0,null!==this.timedCommitIntervalID&&window.clearInterval(this.timedCommitIntervalID),this.commitRetryPending&&(window.clearTimeout(this.retryCommitTimeoutID),this.commitRetryPending=!1),this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.endTime=new Date,this.isSCORM2004()?this.scorm.set("cmi.session_time",this.convertToSCORM2004Time(this.endTime.getTime()-this.startTime.getTime())):(this.scorm.set("cmi.core.session_time",this.convertToSCORM12Time(this.endTime.getTime()-this.startTime.getTime())),this.scorm.set("cmi.core.exit","")),this.lmsConnected=!1,this.scorm.quit()||this.handleError("Course could not finish")):this.handleError("Course is not connected to the LMS")},t.prototype.recordInteraction=function(e,t,i,s,n){if(this.isSupported("cmi.interactions._count"))switch(n){case"choice":this.recordInteractionMultipleChoice.apply(this,arguments);break;case"matching":this.recordInteractionMatching.apply(this,arguments);break;case"numeric":this.isSCORM2004()?this.recordInteractionScorm2004.apply(this,arguments):this.recordInteractionScorm12.apply(this,arguments);break;case"fill-in":this.recordInteractionFillIn.apply(this,arguments);break;default:console.error("ScormWrapper.recordInteraction: unknown interaction type of '"+n+"' encountered...")}else this.logger.info("ScormWrapper::recordInteraction: cmi.interactions are not supported by this LMS...")},t.prototype.getValue=function(e){if(this.logger.debug("ScormWrapper::getValue: _property="+e),this.finishCalled)return void this.logger.debug("ScormWrapper::getValue: ignoring request as 'finish' has been called");if(this.lmsConnected){var t=this.scorm.get(e),i=this.scorm.debug.getCode(),s="";return 0!==i&&(403===i?this.logger.warn("ScormWrapper::getValue: data model element not initialized"):(s+="Course could not get "+e,s+="\nError Info: "+this.scorm.debug.getInfo(i),s+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(i),this.handleError(s))),this.logger.debug("ScormWrapper::getValue: returning "+t),t+""}this.handleError("Course is not connected to the LMS")},t.prototype.setValue=function(e,t){if(this.logger.debug("ScormWrapper::setValue: _property="+e+" _value="+t),this.finishCalled)return void this.logger.debug("ScormWrapper::setValue: ignoring request as 'finish' has been called");if(this.lmsConnected){var i=this.scorm.set(e,t),s=this.scorm.debug.getCode(),n="";return i||(0!==s?(n+="Course could not set "+e+" to "+t,n+="\nError Info: "+this.scorm.debug.getInfo(s),n+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(s),this.handleError(n)):this.logger.warn("ScormWrapper::setValue: LMS reported that the 'set' call failed but then said there was no error!")),i}this.handleError("Course is not connected to the LMS")},t.prototype.isSupported=function(e){if(this.logger.debug("ScormWrapper::isSupported: _property="+e),this.finishCalled)return void this.logger.debug("ScormWrapper::isSupported: ignoring request as 'finish' has been called");if(this.lmsConnected){var t=(this.scorm.get(e),this.scorm.debug.getCode());return 401!==t}return this.handleError("Course is not connected to the LMS"),!1},t.prototype.initTimedCommit=function(){if(this.logger.debug("ScormWrapper::initTimedCommit"),this.timedCommitFrequency>0){var e=6e4*this.timedCommitFrequency;this.timedCommitIntervalID=window.setInterval(_.bind(this.commit,this),e)}},t.prototype.initRetryCommit=function(){this.logger.debug("ScormWrapper::initRetryCommit "+this.commitRetries+" out of "+this.maxCommitRetries),this.commitRetryPending=!0,this.retryCommitTimeoutID=window.setTimeout(_.bind(this.doRetryCommit,this),this.commitRetryDelay)},t.prototype.doRetryCommit=function(){this.logger.debug("ScormWrapper::doRetryCommit"),this.commitRetryPending=!1,this.commit()},t.prototype.handleError=function(e){this.logger.error(e),this.suppressErrors||this.logOutputWin&&!this.logOutputWin.closed||!confirm("An error has occured:\n\n"+e+"\n\nPress 'OK' to view debug information to send to technical support.")||this.showDebugWindow()},t.prototype.getInteractionCount=function(){var e=this.getValue("cmi.interactions._count");return""===e?0:e},t.prototype.recordInteractionScorm12=function(e,t,i,s,n){e=this.trim(e);var o="cmi.interactions."+this.getInteractionCount();this.setValue(o+".id",e),this.setValue(o+".type",n),this.setValue(o+".student_response",t),this.setValue(o+".result",i?"correct":"wrong"),null!==s&&void 0!==s&&this.setValue(o+".latency",this.convertToSCORM12Time(s)),this.setValue(o+".time",this.getCMITime())},t.prototype.recordInteractionScorm2004=function(e,t,i,s,n){e=this.trim(e);var o="cmi.interactions."+this.getInteractionCount();this.setValue(o+".id",e),this.setValue(o+".type",n),this.setValue(o+".learner_response",t),this.setValue(o+".result",i?"correct":"incorrect"),null!==s&&void 0!==s&&this.setValue(o+".latency",this.convertToSCORM2004Time(s)),this.setValue(o+".timestamp",this.getISO8601Timestamp())},t.prototype.recordInteractionMultipleChoice=function(e,t,i,s,n){t=this.isSCORM2004()?t.replace(/,|#/g,"[,]"):t.replace(/#/g,",");var o=this.isSCORM2004()?this.recordInteractionScorm2004:this.recordInteractionScorm12;o.call(this,e,t,i,s,n)},t.prototype.recordInteractionMatching=function(e,t,i,s,n){t=t.replace(/#/g,","),this.isSCORM2004()&&(t=t.replace(/,/g,"[,]"),t=t.replace(/\./g,"[.]"));var o=this.isSCORM2004()?this.recordInteractionScorm2004:this.recordInteractionScorm12;o.call(this,e,t,i,s,n)},t.prototype.recordInteractionFillIn=function(e,t,i,s,n){var o=this.isSCORM2004()?250:255;t.length>o&&(t=t.substr(0,o),this.logger.warn("ScormWrapper::recordInteractionFillIn: response data for "+e+" is longer than the maximum allowed length of "+o+" characters; data will be truncated to avoid an error."));var r=this.isSCORM2004()?this.recordInteractionScorm2004:this.recordInteractionScorm12;r.call(this,e,t,i,s,n)},t.prototype.showDebugWindow=function(){this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.logOutputWin=window.open("log_output.html","Log","width=600,height=300,status=no,scrollbars=yes,resize=yes,menubar=yes,toolbar=yes,location=yes,top=0,left=0"),this.logOutputWin&&this.logOutputWin.focus()},t.prototype.convertToSCORM12Time=function(e){var t=1e3,i=60*t,s=60*i,n=e%t;e-=n;var o=e%i;e-=o,o/=t;var r=e%s;e-=r,r/=i;var a=e/s;if(a>9999)return"9999:99:99.99";var l=[this.padWithZeroes(a,4),this.padWithZeroes(r,2),this.padWithZeroes(o,2)].join(":");return l+"."+Math.floor(n/10)},t.prototype.convertToSCORM2004Time=function(e){var t=Math.floor(e/10),i=100,s=60*i,n=60*s,o=24*n,r=Math.floor(t/o);t-=r*o,r=r?r+"D":"";var a=Math.floor(t/n);t-=a*n,a=a?a+"H":"";var l=Math.floor(t/s);t-=l*s,l=l?l+"M":"";var c=Math.floor(t/i);t-=c*i,c=c?c:"0";var d=t;d=d?"."+d:"";var u=c+d+"S",h=[a,l,u].join("");return"P"+r+"T"+h},t.prototype.getCMITime=function(){var e=new Date,t=this.padWithZeroes(e.getHours(),2),i=this.padWithZeroes(e.getMinutes(),2),s=this.padWithZeroes(e.getSeconds(),2);return[t,i,s].join(":")},t.prototype.getISO8601Timestamp=function(){var e=new Date,t=[e.getFullYear(),this.padWithZeroes(e.getMonth()+1,2),this.padWithZeroes(e.getDate(),2)].join("-"),i=[this.padWithZeroes(e.getHours(),2),this.padWithZeroes(e.getMinutes(),2),this.padWithZeroes(e.getSeconds(),2)].join(":");return t+"T"+i},t.prototype.padWithZeroes=function(e,t){for(var i=t;--i;)e="0"+e;return e.slice(-t)},t.prototype.trim=function(e){return e.replace(/^\s*|\s*$/g,"")},t.prototype.isSCORM2004=function(){return"2004"===this.scorm.version},t}),Logger=function(){this.logArr=new Array,this.registeredViews=new Array},Logger.instance=null,Logger.LOG_TYPE_INFO=0,Logger.LOG_TYPE_WARN=1,Logger.LOG_TYPE_ERROR=2,Logger.LOG_TYPE_DEBUG=3,Logger.getInstance=function(){return null==Logger.instance&&(Logger.instance=new Logger),Logger.instance},Logger.prototype.getEntries=function(){return this.logArr},Logger.prototype.getLastEntry=function(){return this.logArr[this.logArr.length-1]},Logger.prototype.info=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_INFO},this.updateViews()},Logger.prototype.warn=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_WARN},this.updateViews()},Logger.prototype.error=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_ERROR},this.updateViews()},Logger.prototype.debug=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_DEBUG},this.updateViews()},Logger.prototype.registerView=function(e){this.registeredViews[this.registeredViews.length]=e},Logger.prototype.unregisterView=function(e){for(var t=0;t<this.registeredViews.length;t++)this.registeredViews[t]==e&&(this.registeredViews.splice(t,1),t--)},Logger.prototype.updateViews=function(){for(var e=0;e<this.registeredViews.length;e++)this.registeredViews[e]&&this.registeredViews[e].update(this)},define("extensions/adapt-contrib-spoor/js/scorm/logger",function(){}),define("extensions/adapt-contrib-spoor/js/scorm",["./scorm/API","./scorm/wrapper","./scorm/logger"],function(e,t,i){return t.getInstance()}),define("extensions/adapt-contrib-spoor/js/serializers/default",["core/js/adapt"],function(e){var t={serialize:function(){return this.serializeSaveState("_isComplete")},serializeSaveState:function(t){if(void 0===e.course.get("_latestTrackingId")){var i="This course is missing a latestTrackingID.\n\nPlease run the grunt process prior to deploying this module on LMS.\n\nScorm tracking will not work correctly until this is done.";console.error(i)}for(var s=e.config.get("_spoor")&&e.config.get("_spoor")._tracking&&e.config.get("_spoor")._tracking._excludeAssessments,n=[],o=e.course.get("_latestTrackingId")+1,r=0;r<o;r++)n[r]="-";return _.each(e.blocks.models,function(e,i){var o=e.get("_trackingId"),r=e.getParent().get("_assessment"),a=e.get(t)?1:0;if(s&&r&&(a=0),void 0===o){var l="Block '"+e.get("_id")+"' doesn't have a tracking ID assigned.\n\nPlease run the grunt process prior to deploying this module on LMS.\n\nScorm tracking will not work correctly until this is done.";console.error(l)}else n[o]=a},this),n.join("")},deserialize:function(t){_.each(this.deserializeSaveState(t),function(t,i){1===t&&this.markBlockAsComplete(e.blocks.findWhere({_trackingId:i}))},this)},deserializeSaveState:function(e){for(var t=e.split(""),i=0;i<t.length;i++)"-"===t[i]?t[i]=-1:t[i]=parseInt(t[i],10);return t},markBlockAsComplete:function(e){e&&e.getChildren().each(function(e){e.set("_isComplete",!0)},this)}};return t}),function(e){function t(e,t){void 0===t&&(t=2);var i=1*Math.pow(10,t);return Math.round(e*i)/i}function i(e,t){return parseInt(e.substr(0,t),2)}function s(e,t){return a.fillLeft(e.toString(2),t)}function n(){switch(arguments.length){case 1:var e=typeof arguments[0];switch(e){case"number":return n._indexes[arguments[0]];case"string":return n._chars[arguments[0]];default:throw"Invalid arguments type"}case 2:var t=arguments[0],i=arguments[1];return n._chars[t]=i,void(n._indexes[i]=t);default:throw"Invalid number of arguments"}}function o(){switch(arguments.length){case 1:switch(typeof arguments[0]){case"object":var e=arguments[0];return void 0===o._types[e.type]&&(o._types[e.type]=[]),o._types[e.type].push(e),e.index=o._indexes.length,o._indexes.push(e),void(o[e.name]=e);case"string":return o.getName(arguments[0]);case"number":return o.getIndex(arguments[0]);default:throw"Argument type not allowed"}default:throw"Too many arguments"}}function r(e,t){e=r.translateTypeAlias(e),t=r.translateTypeAlias(t);var i=[].slice.call(arguments,2);if("binary"!=e&&"binary"!=t){if(!r._converters[e])throw"Type not found '"+e+"'";if(!r._converters[e].binary)throw"Type not found 'binary'";var s=r._converters[e].binary.call(this,i[0],r.WRAPOUTPUT);if(!r._converters.binary[t])throw"Type not found '"+t+"'";return r._converters.binary[t].call(this,s,r.WRAPOUTPUT)}if(!r._converters[e])throw"Type not found '"+e+"'";if(!r._converters[e][t])throw"Type not found '"+t+"'";return r._converters[e][t].call(this,i[0],r.WRAPOUTPUT)}var a={addLeft:function(e,t,i){return i=i||"0",new Array(t+1).join(i)+e},addRight:function(e,t,i){return i=i||"0",e+new Array(t+1).join(i)},fillLeft:function(e,t,i){if(e.length<t){var s=t-e.length;return a.addLeft(e,s,i)}return e},fillRight:function(e,t,i){if(e.length<t){var s=t-e.length;return a.addRight(e,s,i)}return e},fillBlockLeft:function(e,t,i){if(e.length%t){var s=t-e.length%t;return a.addLeft(e,s,i)}return e},fillBlockRight:function(e,t,i){if(e.length%t){var s=t-e.length%t;return a.addRight(e,s,i)}return e}};n._chars={},n._indexes={},function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;t++)n(e[t],t)}(),o.VARIABLELENGTHDESCRIPTORSIZE=8,o._types={},o._indexes=[],o.getName=function(e){if(o[e])return o[e];throw"Type name not found '"+e+"'"},o.getIndex=function(e){if(o._indexes[e])return o._indexes[e];throw"Type index not found '"+e+"'"},o.getTypes=function(e){if(o._types[e])return o._types[e];throw"Type not found '"+e+"'"},o.checkBounds=function(e,t){var i=o(e);if(t>i.max)throw e+" value is larger than "+i.max;if(t<i.min)throw e+" value is smaller than "+i.min},o.getNumberType=function(e){for(var t,i=e-Math.floor(e)!==0,s=o.getTypes("number"),n=0;t=s[n++];)if(e<=t.max&&e>=t.min&&(!i||i==t.decimal))return t},o.getVariableType=function(e){var t,i=e instanceof Array?"array":typeof e;switch(i){case"number":t=o.getNumberType(e);break;case"string":t=o.getName("string");break;default:var s=o.getTypes(i);switch(s.length){case 1:t=s[0];break;default:throw"Type not found '"+i+"'"}}if(!t)throw"Cannot assess type '"+i+"'";return t},o.getArrayType=function(t){for(var i=[],s=0,n=t.length;s<n;s++){var r=t[s],a=o.getVariableType(r);
e.findWhere(i,{name:a.name})||i.push(a)}switch(i.length){case 0:throw"Cannot determine array data types";case 1:return i[0];default:var l=e.pluck(i,"type"),c=e.uniq(l),d=c.length>1;if(d)return o("variable");switch(c[0]){case"number":var u=e.findWhere(i,{decimal:!0});return u?u:e.max(i,function(e){return e.max})}throw"Unsupported data types"}},function(){for(var e,t=[{size:"fixed",length:1,name:"boolean",type:"boolean"},{max:15,min:0,decimal:!1,size:"fixed",length:4,name:"half",type:"number"},{max:255,min:0,decimal:!1,size:"fixed",length:8,name:"byte",type:"number"},{max:65535,min:0,decimal:!1,size:"fixed",length:16,name:"short",type:"number"},{max:4294967295,min:0,decimal:!1,size:"fixed",length:32,name:"long",type:"number"},{max:4294967295,min:-4294967295,decimal:!0,precision:2,size:"variable",name:"double",type:"number"},{name:"base16",size:"variable",type:"string"},{name:"base64",size:"variable",type:"string"},{name:"array",size:"variable",type:"array"},{name:"variable",size:"variable",type:"variable"},{name:"string",size:"variable",type:"string"}],i=0;e=t[i++];)o(e)}(),r.WRAPOUTPUT=!1,r.translateTypeAlias=function(e){e=e.toLowerCase();for(var t in r._typeAliases)if(t==e||(" "+r._typeAliases[t].join(" ")+" ").indexOf(" "+e+" ")>=0)return t;throw"Type not found '"+e+"'"},r._typeAliases={base64:["b64"],base16:["hex","b16"],double:["dbl","decimal","d"],long:["lng","l"],short:["s"],byte:["b"],half:["h"],number:["num","n"],binary:["bin"],boolean:["bool"],array:["arr"]},r._variableWrapLength=function(e){var t=e.length,i=s(t,o.VARIABLELENGTHDESCRIPTORSIZE);return i+e},r._variableLength=function(e){var t=o.VARIABLELENGTHDESCRIPTORSIZE,s=i(e,t);return s},r._variableUnwrapLength=function(e){var t=o.VARIABLELENGTHDESCRIPTORSIZE,s=i(e,t);return e.substr(t,s)},r._converters={base64:{binary:function(e){for(var t,o=n(e.substr(0,1)),r=s(o,6),l=i(r,6),c="",d=0;t=e[d++];){var u=n(t).toString(2);u=a.fillLeft(u,6),c+=u}return c=c.substr(6+l)}},base16:{binary:function(e){for(var t,o=n(base64.substr(0,1)),r=s(o,4),l=i(r,4),c="",d=0;t=e[d++];){var u=parseInt(t,16).toString(2);u=a.fillLeft(u,4),c+=u}return c=c.substr(6+l)}},double:{binary:function(e,i){var s=o("double");o.checkBounds("double",e),e=t(e,s.precision);var n,l,c,d,u,h,p=e.toString(10),m=e<0,f=p.indexOf("e");f>-1?(n=p.substr(0,f),l=Math.abs(p.substr(f+1)),m&&(n=n.substr(1)),u=n.indexOf("."),h=u>-1,h&&(c=n.substr(0,u),d=n.substr(u+1),l=Math.abs(l)+d.length,n=c+d)):(n=p,l="0",m&&(p=p.substr(1)),u=p.indexOf("."),h=u>-1,h?(c=p.substr(0,u),d=p.substr(u+1),l=d.length,n="0"==c?parseInt(d,10).toString(10):c+d):n=p);var g=[],v=a.fillBlockLeft(parseInt(n,10).toString(2),4),b=m?"1":"0",_=a.fillLeft(parseInt(l,10).toString(2),7);return g.push(b),g.push(_),g.push(v),i===!1?g.join(""):r._variableWrapLength(g.join(""))}},long:{binary:function(e){var i=o("long");return o.checkBounds("long",e),e=t(e,0),a.fillLeft(e.toString(2),i.length)}},short:{binary:function(e){var i=o("short");return o.checkBounds("short",e),e=t(e,0),a.fillLeft(e.toString(2),i.length)}},byte:{binary:function(e){var i=o("byte");return o.checkBounds("byte",e),e=t(e,0),a.fillLeft(e.toString(2),i.length)}},half:{binary:function(e){var i=o("half");return o.checkBounds("half",e),e=t(e,0),a.fillLeft(e.toString(2),i.length)}},boolean:{binary:function(e){return e?"1":"0"}},array:{binary:function(e,t){var i=(o("array"),o.getArrayType(e)),n="vairable"==i.name;if(n){var a=half2bin(15);return a}for(var l=r._converters.half.binary(i.index),c=[],d=0,u=e.length;d<u;d++){var h=e[d],p=r._converters[i.name].binary(h);c.push(p)}var m=c.join(""),f=0;m.length%4&&(f=4-m.length%4);var g=s(f,2),v=new Array(f+1).join("0"),a=[];a.push(l),a.push(g),a.push(v),a.push(m);var b=a.join("");if(t===!1)return b;var _=r._variableWrapLength(b);return _}},binary:{array:function(e,t){o("array");t!==!1&&(e=r._variableUnwrapLength(e));var s=e.substr(0,4),n=e.substr(4,2),a=r._converters.binary.half(s),l=i(n,2),c=6+l,d=e.length-c,u=e.substr(c,d),h=o(a),p="variable"==h.name,m=[];if(p);else{var f="variable"==h.size;if(f)for(var g=o.VARIABLELENGTHDESCRIPTORSIZE;""!=u;){var v=r._variableLength(u),b=u.substr(0,g+v);u=u.substr(g+v),m.push(r._converters.binary[h.name](b))}else for(;""!=u;){var b=u.substr(0,h.length);u=u.substr(h.length),m.push(r._converters.binary[h.name](b))}}return m},base64:function(e){var t=0;e.length%6&&(t=6-e.length%6),binPaddingLen=s(t,6),binPadding=a.addLeft("",t),e=binPaddingLen+binPadding+e;for(var i=e.length,o="",r=0;r<1e4&&!(6*r>=i);r++){var l=e.substr(6*r,6);o+=n(parseInt(l,2))}return o},base16:function(e){var t=0;e.length%4&&(t=4-e.length%4),binPaddingLen=s(t,4),binPadding=a.addLeft("",t),e=binPaddingLen+binPadding+e;for(var i=e.length,n="",o=0;o<1e4&&!(4*o>=i);o++){var r=e.substr(4*o,4);n+=parseInt(r,2).toString(16)}return n},double:function(e,t){o("double");t!==!1&&(e=r._variableUnwrapLength(e));var i=1==e.substr(0,1),s=parseInt("0"+e.substr(1,7),2),n=parseInt(e.substr(8,e.length),2),a=parseFloat(n+"E-"+s,10);return i&&(a*=-1),a},long:function(e){return parseInt(e.substr(0,32),2)},short:function(e){return parseInt(e.substr(0,16),2)},byte:function(e){return parseInt(e.substr(0,8),2)},half:function(e){return parseInt(e.substr(0,4),2)},boolean:function(e){return"1"==e.substr(0,1)},number:function(e){return parseInt(e,2)}}},window.SCORMSuspendData={serialize:function(e){return r("array","base64",e)},deserialize:function(e){return r("base64","array",e)},Base64:n,Converter:r,DataType:o}}(_),define("extensions/adapt-contrib-spoor/js/serializers/scormSuspendDataSerializer",function(){}),define("extensions/adapt-contrib-spoor/js/serializers/questions",["core/js/adapt","./scormSuspendDataSerializer"],function(e){var t={_isQuestionType:!0,_isResetOnRevisit:!1},i={serialize:function(){return this.serializeSaveState()},serializeSaveState:function(){if(void 0===e.course.get("_latestTrackingId")){var t="This course is missing a latestTrackingID.\n\nPlease run the grunt process prior to deploying this module on LMS.\n\nScorm tracking will not work correctly until this is done.";return console.error(t),""}var i="";try{var s=this.captureData();if(0===s.length)return"";i=SCORMSuspendData.serialize(s)}catch(e){console.error(e)}return i},captureData:function(){for(var i=[],s=e.blocks.pluck("_trackingId"),n={},o={},r=0,a=s.length;r<a;r++)for(var l=s[r],c=e.blocks.findWhere({_trackingId:l}),d=c.getChildren().where(t),u=0,h=d.length;u<h;u++){var p=d[u].toJSON(),m=p._parentId;n[m]||(n[m]=c.toJSON());var f=n[m];void 0===o[m]&&(o[m]=-1),o[m]++;var g=o[m];if(p._isInteractionComplete!==!1&&p._isComplete!==!1){var v=void 0!==p._userAnswer,b=p._userAnswer instanceof Array,_=[g,f._trackingId,p._score||0,p._attemptsLeft||0],y=[v,b,p._isInteractionComplete,p._isSubmitted,p._isCorrect||!1],w=[_,y];if(v){var k=b?p._userAnswer:[p._userAnswer],S=SCORMSuspendData.DataType.getArrayType(k);switch(S.name){case"string":case"variable":console.log("Cannot store _userAnswers from component "+p._id+" as array is of variable or string type.");continue}w.push(k)}i.push(w)}}return i},deserialize:function(e){try{var t=SCORMSuspendData.deserialize(e);this.releaseData(t)}catch(e){console.error(e)}},releaseData:function(i){for(var s=0,n=i.length;s<n;s++){var o=i[s],r=o[0],a=o[1],l=r[0],c=r[1],d=r[2],u=r[3]||0,h=a[0],p=a[1],m=a[2],f=a[3],g=a[4],v=e.blocks.findWhere({_trackingId:c}),b=v.getChildren();b=b.where(t);var _=b[l];if(_.set("_isComplete",!0),_.set("_isInteractionComplete",m),_.set("_isSubmitted",f),_.set("_score",d),_.set("_isCorrect",g),_.set("_attemptsLeft",u),h){var y=o[2];p||(y=y[0]),_.set("_userAnswer",y)}}}};return i}),define("extensions/adapt-contrib-spoor/js/adapt-stateful-session",["core/js/adapt","./serializers/default","./serializers/questions"],function(e,t,i){var s=_.extend({_config:null,_shouldStoreResponses:!1,_shouldRecordInteractions:!0,initialize:function(){this._onWindowUnload=_.bind(this.onWindowUnload,this),this.getConfig(),this.restoreSessionState(),_.defer(_.bind(this.setupEventListeners,this))},getConfig:function(){this._config=!!e.config.has("_spoor")&&e.config.get("_spoor"),this._shouldStoreResponses=this._config&&this._config._tracking&&this._config._tracking._shouldStoreResponses,this._config&&this._config._tracking&&this._config._tracking._shouldRecordInteractions===!1&&(this._shouldRecordInteractions=!1)},saveSessionState:function(){var t=this.getSessionState();e.offlineStorage.set(t)},restoreSessionState:function(){var s=e.offlineStorage.get(),n=0===_.keys(s).length;n||(s.completion&&t.deserialize(s.completion),s.questions&&this._shouldStoreResponses&&i.deserialize(s.questions),s._isCourseComplete&&e.course.set("_isComplete",s._isCourseComplete),s._isAssessmentPassed&&e.course.set("_isAssessmentPassed",s._isAssessmentPassed))},getSessionState:function(){var s={completion:t.serialize(),questions:this._shouldStoreResponses===!0?i.serialize():"",_isCourseComplete:e.course.get("_isComplete")||!1,_isAssessmentPassed:e.course.get("_isAssessmentPassed")||!1};return s},setupEventListeners:function(){$(window).on("unload",this._onWindowUnload),this._shouldStoreResponses&&this.listenTo(e.components,"change:_isInteractionComplete",this.onQuestionComponentComplete),this._shouldRecordInteractions&&this.listenTo(e,"questionView:recordInteraction",this.onQuestionRecordInteraction),this.listenTo(e.blocks,"change:_isComplete",this.onBlockComplete),this.listenTo(e.course,"change:_isComplete",this.onCompletion),this.listenTo(e,"assessment:complete",this.onAssessmentComplete),this.listenTo(e,"app:languageChanged",this.onLanguageChanged)},removeEventListeners:function(){$(window).off("unload",this._onWindowUnload),this.stopListening()},reattachEventListeners:function(){this.removeEventListeners(),this.setupEventListeners()},onBlockComplete:function(e){this.saveSessionState()},onQuestionComponentComplete:function(e){e.get("_isQuestionType")&&this.saveSessionState()},onCompletion:function(){this.checkTrackingCriteriaMet()&&(this.saveSessionState(),e.offlineStorage.set("status",this._config._reporting._onTrackingCriteriaMet))},onAssessmentComplete:function(t){e.course.set("_isAssessmentPassed",t.isPass),this.saveSessionState(),this.submitScore(t.scoreAsPercent),t.isPass?this.onCompletion():this._config&&this._config._tracking._requireAssessmentPassed&&this.submitAssessmentFailed()},onQuestionRecordInteraction:function(t){var i=t.getResponseType();if(!_.isEmpty(i)){var s=t.model.get("_id"),n=t.getResponse(),o=t.isCorrect(),r=t.getLatency();e.offlineStorage.set("interaction",s,n,o,r,i)}},onLanguageChanged:function(){this.reattachEventListeners(),this.saveSessionState(),this._config._reporting&&this._config._reporting._resetStatusOnLanguageChange===!0&&e.offlineStorage.set("status","incomplete")},submitScore:function(t){this._config&&!this._config._tracking._shouldSubmitScore||e.offlineStorage.set("score",t,0,100)},submitAssessmentFailed:function(){if(this._config&&this._config._reporting.hasOwnProperty("_onAssessmentFailure")){var t=this._config._reporting._onAssessmentFailure;if(""===t)return;e.offlineStorage.set("status",t)}},checkTrackingCriteriaMet:function(){var t=!1;return!!this._config&&(this._config._tracking._requireCourseCompleted&&this._config._tracking._requireAssessmentPassed?t=e.course.get("_isComplete")&&e.course.get("_isAssessmentPassed"):this._config._tracking._requireCourseCompleted?t=e.course.get("_isComplete"):this._config._tracking._requireAssessmentPassed&&(t=e.course.get("_isAssessmentPassed")),t)},onWindowUnload:function(){this.removeEventListeners()}},Backbone.Events);return s}),define("extensions/adapt-contrib-spoor/js/adapt-offlineStorage-scorm",["core/js/adapt","./scorm","core/js/offlineStorage"],function(e,t){var i={},s={},n=!1;e.offlineStorage.initialize({get:function(e){if(void 0===e){if(this.useTemporaryStore())return i;s=this.getCustomStates();var o=_.extend(_.clone(s),{location:t.getLessonLocation(),score:t.getScore(),status:t.getStatus(),student:t.getStudentName(),learnerInfo:this.getLearnerInfo()});return n=!0,o}if(this.useTemporaryStore())return i[e];switch(e.toLowerCase()){case"location":return t.getLessonLocation();case"score":return t.getScore();case"status":return t.getStatus();case"student":return t.getStudentName();case"learnerinfo":return this.getLearnerInfo();default:return this.getCustomState(e)}},set:function(e,o){var r=[].slice.call(arguments,1),a="object"==typeof e;if(a&&(o=e,e="suspendData"),this.useTemporaryStore())return a?i=_.extend(i,o):i[e]=o,!0;switch(e.toLowerCase()){case"interaction":return t.recordInteraction.apply(t,r);case"location":return t.setLessonLocation.apply(t,r);case"score":return t.setScore.apply(t,r);case"status":return t.setStatus.apply(t,r);case"student":case"learnerinfo":return!1;case"suspenddata":default:a?s=_.extend(s,o):s[e]=o;var l=JSON.stringify(s);return!!n&&t.setSuspendData(l)}},getCustomStates:function(){var e=_.isEmpty(s);if(!e&&n)return _.clone(s);var i=t.getSuspendData();if(""===i||" "===i||void 0===i)return{};var o=JSON.parse(i);return e||n||(o=_.extend(o,s)),o},getCustomState:function(e){var t=this.getCustomStates();return t[e]},useTemporaryStore:function(){var i=e.config.get("_spoor");return!(t.lmsConnected&&(!i||i._isEnabled!==!1))},getLearnerInfo:function(){var e=t.getStudentName(),i="",s="";if(e&&"undefined"!==e&&e.indexOf(",")>-1){var n=e.split(",");s=$.trim(n[0]),i=$.trim(n[1]),e=i+" "+s}else console.log("SPOOR: LMS learner_name not in 'lastname, firstname' format");return{name:e,lastname:s,firstname:i,id:t.getStudentId()}}})}),define("extensions/adapt-contrib-spoor/js/adapt-contrib-spoor",["core/js/adapt","./scorm","./adapt-stateful-session","./adapt-offlineStorage-scorm"],function(e,t,i){var s=_.extend({_config:null,initialize:function(){this.listenToOnce(e,"configModel:dataLoaded",this.onConfigLoaded),this.listenToOnce(e,"app:dataReady",this.onDataReady)},onConfigLoaded:function(){return this.checkConfig()?(this.configureAdvancedSettings(),t.initialize(),e.offlineStorage.get(),e.offlineStorage.setReadyStatus&&e.offlineStorage.setReadyStatus(),void this.setupEventListeners()):void(e.offlineStorage.setReadyStatus&&e.offlineStorage.setReadyStatus())},onDataReady:function(){i.initialize()},checkConfig:function(){return this._config=!!e.config.has("_spoor")&&e.config.get("_spoor"),!(!this._config||this._config._isEnabled===!1)},configureAdvancedSettings:function(){if(this._config._advancedSettings){var e=this._config._advancedSettings;e._showDebugWindow&&t.showDebugWindow(),t.setVersion(e._scormVersion||"1.2"),e.hasOwnProperty("_suppressErrors")&&(t.suppressErrors=e._suppressErrors),e.hasOwnProperty("_commitOnStatusChange")&&(t.commitOnStatusChange=e._commitOnStatusChange),e.hasOwnProperty("_timedCommitFrequency")&&(t.timedCommitFrequency=e._timedCommitFrequency),e.hasOwnProperty("_maxCommitRetries")&&(t.maxCommitRetries=e._maxCommitRetries),e.hasOwnProperty("_commitRetryDelay")&&(t.commitRetryDelay=e._commitRetryDelay)}else t.setVersion("1.2");window.location.search.indexOf("nolmserrors")!=-1&&(t.suppressErrors=!0)},setupEventListeners:function(){var e=this._config._advancedSettings,t=(!e||e._commitOnVisibilityChangeHidden!==!1)&&document.addEventListener;this._onWindowUnload=_.bind(this.onWindowUnload,this),$(window).on("unload",this._onWindowUnload),t&&document.addEventListener("visibilitychange",this.onVisibilityChange)},onVisibilityChange:function(){"hidden"===document.visibilityState&&t.commit()},onWindowUnload:function(){t.finish(),$(window).off("unload",this._onWindowUnload)}},Backbone.Events);s.initialize()}),define("extensions/adapt-contrib-trickle/js/trickleView",["coreJS/adapt"],function(e){var t=Backbone.View.extend({isSteplocked:!1,initialize:function(e){this.setupEventListeners()},setupEventListeners:function(){var t={"trickle:kill":this.onKill,remove:this.onRemove};this.onPreRender(this),t[this.model.get("_type")+"View:postRender"]=this.onPostRender,this.listenTo(e,t),this.on("steplock",this.onStepLock),this.on("stepunlock",this.onStepUnlock)},onPreRender:function(t){this.isElementEnabled()&&e.trigger("trickle:preRender",this)},onPostRender:function(t){t.model.get("_id")===this.model.get("_id")&&this.isElementEnabled()&&e.trigger("trickle:postRender",this)},isElementEnabled:function(){var t=e.trickle.getModelConfig(this.model);if(!t)return!1;var i="article"===this.model.get("_type")&&t._onChildren;return!i&&t._isEnabled===!0},onStepLock:function(){if(!this.isElementEnabled())return void this.continueToNext();var t=e.trickle.getModelConfig(this.model),i=t._stepLocking&&t._stepLocking._isEnabled;return i?(e.trigger("trickle:steplock",this),void(this.isSteplocked=!0)):void this.continueToNext()},continueToNext:function(){_.defer(_.bind(function(){e.trigger("trickle:continue",this)},this))},onStepUnlock:function(){this.isSteplocked&&(this.isSteplocked=!1,e.trigger("trickle:stepunlock",this))},onKill:function(){this.detachFromElement()},onRemove:function(){this.detachFromElement()},detachFromElement:function(){this.undelegateEvents(),this.stopListening(),this.model=null,this.articleModel=null,this.$el=null,this.el=null}});return t}),define("extensions/adapt-contrib-trickle/js/pageView",["coreJS/adapt","./trickleView"],function(e,t){var i=Backbone.View.extend({currentDescendantIndex:0,currentLocksOnDescendant:0,currentDescendant:null,initialize:function(e){return this.isPageEnabled()?(this.setupDescendants(),this.haveDescendantsGotTrickle()?(this.addClassToHtml(),void this.setupEventListeners()):this.detachFromPage()):this.detachFromPage()},isPageEnabled:function(){var t=e.trickle.getModelConfig(this.model);return!t||t._isEnabled!==!1},setupDescendants:function(){this.currentDescendant=null,this.descendantViews={},this.getDescendants(),e.trigger("trickle:descendants",this)},descendantsChildFirst:null,descendantsParentFirst:null,descendantViews:null,getDescendants:function(){this.descendantsChildFirst=this.model.getDescendants(),this.descendantsParentFirst=this.model.getDescendants(!0),this.setDescendantsTrickleDefaults(),this.descendantsChildFirst=this.filterComponents(this.descendantsChildFirst),this.descendantsParentFirst=this.filterComponents(this.descendantsParentFirst)},filterComponents:function(e){return new Backbone.Collection(e.filter(function(e){return"component"!==e.get("_type")&&!!e.get("_isAvailable")}))},setDescendantsTrickleDefaults:function(){this.descendantsParentFirst.each(_.bind(function(t){var i=e.trickle.getModelConfig(t),s=!i;s||(i._stepLocking=_.extend({_isEnabled:!0,_isCompletionRequired:!0,_isLockedOnRevisit:!1},i._stepLocking),i=_.extend({_isEnabled:!0,_autoScroll:!0,_scrollDuration:500,_onChildren:!0,_scrollTo:"@block +1"},i),e.trickle.setModelConfig(t,i),i._onChildren&&"article"===t.get("_type")&&this.setupArticleOnChildren(t,i),t.set("_isTrickleConfigured",!0))},this))},setupArticleOnChildren:function(t,i){var s=t.getChildren();s.each(function(t,n){var o=e.trickle.getModelConfig(t);for(var r in o)"object"==typeof o[r]&&(o[r]=_.extend({},i[r],o[r]));o=_.extend({},i,o),s.length===n+1&&(o._isFinal=!0),0===n&&(o._isStart=!0),e.trickle.setModelConfig(t,o)})},haveDescendantsGotTrickle:function(){return this.descendantsChildFirst.some(function(t){var i=e.trickle.getModelConfig(t);return!!i&&i._isEnabled===!0})},addClassToHtml:function(){$("html").addClass("trickle")},setupEventListeners:function(){this.listenTo(e,{remove:this.onRemove,"articleView:preRender":this.onDescendantPreRender,"blockView:preRender":this.onDescendantPreRender,"trickle:unwait":this.onUnwait,"trickle:wait":this.onWait,"trickle:continue":this.onContinue,"trickle:skip":this.onSkip,"trickle:kill":this.onKill}),this.listenToOnce(this.model,"change:_isReady",this.onPageReady)},onDescendantPreRender:function(e){if("component"!==e.model.get("_type")){var i=new t({model:e.model,el:e.el});this.descendantViews[e.model.get("_id")]=i}},onPageReady:function(t,i){i&&(this.currentDescendant=null,e.trigger("trickle:started"),this.gotoNextDescendant())},gotoNextDescendant:function(){this.getDescendants(),this.currentDescendant&&(this.currentDescendant.trigger("stepunlock"),this.currentDescendant=null);for(var e=this.currentDescendantIndex||0,t=this.descendantsChildFirst.models.length;e<t;e++){var i=this.descendantsChildFirst.models[e];switch(i.get("_type")){case"block":case"article":this.currentLocksOnDescendant=0,this.currentDescendantIndex=e;var s=i.get("_id");return this.currentDescendant=this.descendantViews[s],void this.currentDescendant.trigger("steplock")}}this.finished()},onContinue:function(e){this.currentDescendant&&e.model.get("_id")===this.currentDescendant.model.get("_id")&&this.onSkip()},onWait:function(){this.currentLocksOnDescendant++},onUnwait:function(){if(this.currentLocksOnDescendant--,!(this.currentLocksOnDescendant>0)){var t=this.currentDescendant.model;this.currentDescendantIndex++,this.gotoNextDescendant(),e.trickle.scroll(t)}},onSkip:function(){_.defer(_.bind(function(){this.currentDescendantIndex++,this.gotoNextDescendant()},this))},onKill:function(){this.finished(),this.detachFromPage()},finished:function(){e.trigger("trickle:finished"),this.detachFromPage()},onRemove:function(){this.finished()},detachFromPage:function(){this.removeClassFromHtml(),this.undelegateEvents(),this.stopListening(),this.model=null,this.$el=null,this.el=null,this.currentDescendant=null,this.descendantViews=null,this.descendantsChildFirst=null,this.descendantsParentFirst=null,e.trickle.pageView=null},removeClassFromHtml:function(){$("html").removeClass("trickle")}});return i}),function(){function e(e){e[d]||(e[d]=++u)}function t(){if((new Date).getTime()-g.lastEvent>500)return l(),!0}function i(){if(!t()){var e=s("resize");if(0===e.length?(l(),f=500,a()):(l(),f=250,a()),e.length>0)for(var i=e,n=0;n<i.length;n++){var r=i[n];o(r)}}}function s(e){var t=[];switch(e){case"resize":for(var i in h)t.push(h[i])}return t}function n(e){var t=e.outerHeight(),i=e.outerWidth();return{uniqueMeasurementId:t+","+i}}function o(e){var t=n(e.$element),i=!1;void 0===e._resizeData&&(i=!0),void 0!==e._resizeData&&e._resizeData===t.uniqueMeasurementId||(e._resizeData=t.uniqueMeasurementId,i||(g.lastEvent=(new Date).getTime(),e.$element.trigger("resize")))}function r(){g.lastEvent=(new Date).getTime(),null!==g.interval&&l(),g.interval=setTimeout(i,f)}function a(){null!==g.interval&&l(),g.interval=setTimeout(i,f)}function l(){clearInterval(g.interval),g.interval=null}if(!$.fn.off.elementResizeOriginalOff){var c=$.fn.on;$.fn.on=function(){return"resize"!==arguments[0]?$.fn.on.elementResizeOriginalOn.apply(this,_.toArray(arguments)):this[0]===window?$.fn.on.elementResizeOriginalOn.apply(this,_.toArray(arguments)):(p.call(this,(new Date).getTime()),$.fn.on.elementResizeOriginalOn.apply(this,_.toArray(arguments)))},$.fn.on.elementResizeOriginalOn=c;var c=$.fn.off;$.fn.off=function(){return"resize"!==arguments[0]?$.fn.off.elementResizeOriginalOff.apply(this,_.toArray(arguments)):this[0]===window?$.fn.off.elementResizeOriginalOff.apply(this,_.toArray(arguments)):(m.call(this,(new Date).getTime()),$.fn.off.elementResizeOriginalOff.apply(this,_.toArray(arguments)))},$.fn.off.elementResizeOriginalOff=c;var d=$.expando,u=0,h={},p=function(t){e(this),h[t.guid+"-"+this[d]]={data:t,$element:$(this)}},m=function(e){try{delete h[e.guid+"-"+this[d]]}catch(e){}},f=250,g={lastEvent:0,interval:null};$("body").on("mousedown mouseup keyup keydown",r),$(window).on("resize",r)}}(),define("extensions/adapt-contrib-trickle/js/lib/jquery.resize",function(){}),define("extensions/adapt-contrib-trickle/js/lib/adaptModelExtension",["coreJS/adapt","coreModels/adaptModel"],function(e,t){function i(e){var t=e.substr(0,_.indexOf(e," ")),i=parseInt(e.substr(t.length));return t=t.substr(1),{type:t,offset:i}}_.extend(t.prototype,{getDescendants:function(e){var t=[];if("component"===this.get("_type"))return t.push(this),new Backbone.Collection(t);for(var i=this.getChildren(),s=0,n=i.models.length;s<n;s++){var o=i.models[s];if("component"===o.get("_type"))t.push(o);else{var r=o.getDescendants(e);1==e&&t.push(o),t=t.concat(r.models),1!=e&&t.push(o)}}return new Backbone.Collection(t)},findRelative:function(t,s){var n=["menu","page","article","block","component"];s=s||{};var o=this.get("_id"),r=this.get("_type"),a=e.course;s.limitParentId&&(a=e.findById(s.limitParentId));var l=i(t),c=_.indexOf(n,r)>_.indexOf(n,l.type),d=r===l.type,u=!1,h=0,p=a.getDescendants().toJSON();d||c?u=l.offset<=0:l.offset<1?u=!0:(h=1,u=!1),s.filterNotVisible&&(p=_.filter(p,function(e){return e._isVisible})),s.filterNotAvailable&&(p=_.filter(p,function(e){return e._isAvailable}));var m=_.findIndex(p,function(e){return e._id===o});if(u)for(var f=m,g=-1;f>g;f--){var v=p[f];if(v._type===l.type){if(-h===l.offset)return e.findById(v._id);h++}}else for(var f=m,g=p.length;f<g;f++){var v=p[f];if(v._type===l.type){if(h===l.offset)return e.findById(v._id);h++}}}})}),define("extensions/adapt-contrib-trickle/js/handlers/buttonView",["coreJS/adapt","coreViews/componentView"],function(e,t){var i="_isInteractionComplete",s=Backbone.View.extend({isStepLocking:!1,hasStepLocked:!1,isStepLocked:!1,isStepLockFinished:!1,hasStepPreCompleted:!1,isWaitingForClick:!1,allowVisible:!1,allowEnabled:!0,overlayShownCount:0,el:function(){return this.setupPreRender(),Handlebars.templates["trickle-button"](this.model.toJSON())},setupPreRender:function(){this.setupButtonVisible(),this.setupButtonEnabled()},setupButtonVisible:function(){var t=e.trickle.getModelConfig(this.model);this.allowVisible=!1,t._button._isVisible=!1,"visible"===t._button._styleBeforeCompletion&&(this.allowVisible=!0,t._button._autoHide&&t._button._isFullWidth?t._button._isVisible=!1:t._button._isVisible=!0)},setupButtonEnabled:function(){var t=e.trickle.getModelConfig(this.model);t._stepLocking._isCompletionRequired===!1?(this.allowEnabled=!0,t._button._isDisabled=!1):"visible"===t._button._styleBeforeCompletion?(this.allowEnabled=!1,t._button._isDisabled=!0):(t._button._isDisabled=!1,this.allowEnabled=!0)},events:{"click button":"onButtonClick"},initialize:function(e){this.getCompletionAttribute(),this.debounceCheckAutoHide(),this.setupStepLocking(),this.setupEventListeners()},getCompletionAttribute:function(){var t=e.trickle.getModelConfig(e.config);t&&t._completionAttribute&&(i=t._completionAttribute)},setupStepLocking:function(){var t=e.trickle.getModelConfig(this.model);t._stepLocking._isEnabled?this.isStepLocked=!0:this.isStepLocked=!1},setupEventListeners:function(){this.listenTo(e,{"trickle:overlay":this.onOverlay,"trickle:unoverlay":this.onUnoverlay,"trickle:steplock":this.onStepLock,"trickle:stepunlock":this.onStepUnlock,"trickle:skip":this.onSkip,"trickle:kill":this.onKill,"trickle:update":this.onUpdate,remove:this.onRemove}),this.listenTo(this.model,"change:"+i,this.onCompletion)},debounceCheckAutoHide:function(){this.checkButtonAutoHideSync=this.checkButtonAutoHide,this.checkButtonAutoHide=_.debounce(_.bind(this.checkButtonAutoHide,this),100)},checkButtonAutoHide:function(){if(!this.allowVisible)return void this.setButtonVisible(!1);var t=e.trickle.getModelConfig(this.model);if(!t._button._autoHide)return void this.setButtonVisible(!0);if(this.overlayShownCount>0)return void this.setButtonVisible(!1);var i=this.$el.onscreen(),s=i.bottom>-100;i.onscreen||s?this.setButtonVisible(!0):this.setButtonVisible(!1)},setButtonVisible:function(t){var i=e.trickle.getModelConfig(this.model);t?(this.$(".component-inner").removeClass("display-none"),i._button._isVisible=!0):(this.$(".component-inner").addClass("display-none"),i._button._isVisible=!1)},checkButtonEnabled:function(e){this.allowEnabled?this.setButtonEnabled(!0):this.setButtonEnabled(!1)},setButtonEnabled:function(t){var i=e.trickle.getModelConfig(this.model);t?(this.$("button").removeClass("disabled").removeAttr("disabled"),i._button._isDisabled=!0):(this.$("button").addClass("disabled").attr("disabled","disabled"),i._button._isDisabled=!1)},onStepLock:function(t){if(this.isViewMatch(t)){this.hasStepLocked=!0,this.isStepLocking=!0,this.overlayShownCount=0;var s=e.trickle.getModelConfig(this.model);if(this.isButtonEnabled()){var n=s._stepLocking._isLockedOnRevisit&&this.model.get(i);n?(this.isStepLocked=!0,this.model.set("_isTrickleAutoScrollComplete",!1),e.trigger("trickle:wait"),this.allowVisible=!0,this.checkButtonAutoHide()):this.hasStepPreCompleted&&(this.isStepLocked=!0,this.model.set("_isTrickleAutoScrollComplete",!1),this.allowVisible=!0,this.stepCompleted()),this.setupOnScreenListener()}}},onOverlay:function(){this.overlayShownCount++},onUnoverlay:function(){this.overlayShownCount--,this.checkButtonAutoHide()},setupOnScreenListener:function(){var t=e.trickle.getModelConfig(this.model);t._button._autoHide&&this.$el.on("onscreen",this.checkButtonAutoHide)},isViewMatch:function(e){return e.model.get("_id")===this.model.get("_id")},isButtonEnabled:function(){var t=e.trickle.getModelConfig(this.model);return!(!t._isEnabled||!t._button._isEnabled)},onCompletion:function(e,t){t!==!1&&(this.hasStepPreCompleted=!0,this.hasStepLocked&&_.defer(_.bind(function(){this.stepCompleted()},this)))},stepCompleted:function(){this.isStepLockFinished||(this.isStepLocked=!1,this.allowVisible=!1,this.allowEnabled=!1,this.isButtonEnabled()&&(this.isStepLocking?(this.isStepLocked=!0,this.isWaitingForClick=!0,e.trigger("trickle:wait")):this.isStepLockFinished=!0,this.allowVisible=!0,this.allowEnabled=!0),this.model.set("_isTrickleAutoScrollComplete",!1),this.checkButtonAutoHide(),this.checkButtonEnabled())},onButtonClick:function(){this.isStepLocked?(e.trigger("trickle:unwait"),this.isStepLocked=!1,this.isStepLockFinished=!0):(this.model.set("_isTrickleAutoScrollComplete",!1),_.defer(_.bind(function(){e.trickle.scroll(this.model)},this)));var t=this.model.get("_trickle");switch(t._button._styleAfterClick){case"hidden":this.allowVisible=!1,this.checkButtonAutoHideSync();break;case"disabled":this.allowEnabled=!1,this.checkButtonAutoHideSync()}},onUpdate:function(){var t=e.trickle.getModelConfig(this.model);t._button._autoHide&&this.isStepLocking&&this.$el.off("onscreen",this.checkButtonAutoHide);var i=this.$el,s=$(Handlebars.templates["trickle-button"](this.model.toJSON()));i.replaceWith(s),this.setElement(s),t._button._autoHide&&this.isStepLocking&&this.$el.on("onscreen",this.checkButtonAutoHide)},onStepUnlock:function(e){this.isViewMatch(e)&&(this.$el.off("onscreen",this.checkButtonAutoHide),this.isStepLocking=!1,this.overlayShownCount=0)},onSkip:function(){this.isStepLocking&&this.onKill()},onKill:function(){this.$el.off("onscreen",this.checkButtonAutoHide),this.isWaitingForClick&&this.model.set("_isTrickleAutoScrollComplete",!0),this.isWaitingForClick=!1,this.isStepLocked=!1,this.isStepLocking=!1,this.allowVisible=!1,this.allowEnabled=!1,this.isStepLockFinished=!0,this.model.set("_isTrickleAutoScrollComplete",!1),this.checkButtonAutoHide(),this.checkButtonEnabled()},onRemove:function(){this.isWaitingForClick&&this.model.set("_isTrickleAutoScrollComplete",!0),this.isWaitingForClick=!1,this.$el.off("onscreen",this.checkButtonAutoHide),this.isStepLocking=!0,this.remove()}});return s}),define("extensions/adapt-contrib-trickle/js/handlers/button",["coreJS/adapt","./buttonView"],function(e,t){var i=_.extend({buttonViews:null,initialize:function(){this.listenToOnce(e,{"app:dataReady":this.onAppDataReady,remove:this.onRemove})},onAppDataReady:function(){this.buttonViews={},this.setupEventListeners()},setupEventListeners:function(){this.listenTo(e,{"trickle:preRender":this.onPreRender,"trickle:postRender":this.onPostRender})},onPreRender:function(e){this.isTrickleEnabled(e.model)&&(this.setupConfigDefaults(e.model),this.buttonViews[e.model.get("_id")]=new t({model:e.model}))},onPostRender:function(e){this.isTrickleEnabled(e.model)&&e.$el.append(this.buttonViews[e.model.get("_id")].$el)},isTrickleEnabled:function(t){var i=e.trickle.getModelConfig(t);return!(!i||!i._isEnabled)&&(!i._onChildren||"article"!==t.get("_type"))},setupConfigDefaults:function(t){if(!t.get("_isTrickleButtonConfigured")){
var i=e.trickle.getModelConfig(t);i._button=_.extend({_isEnabled:!0,_styleBeforeCompletion:"hidden",_styleAfterClick:"hidden",_isFullWidth:!0,_autoHide:!0,_className:"",text:"Continue",startText:"Begin",finalText:"Finish",_component:"trickle-button",_isLocking:!0,_isVisible:!1,_isDisabled:!1},i._button),i._button._isFullWidth?(i._stepLocking._isEnabled=!0,i._button._styleAfterClick="hidden"):i._button._autoHide=!1,e.trickle.setModelConfig(t,i),t.set("_isTrickleButtonConfigured",!0)}},onRemove:function(){this.buttonViews={}}},Backbone.Events);return i.initialize(),i}),define("extensions/adapt-contrib-trickle/js/handlers/completion",["coreJS/adapt"],function(e){var t="_isInteractionComplete",i=_.extend({isStepLocking:!1,isCompleted:!1,stepModel:null,initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.getCompletionAttribute(),this.setupEventListeners()},getCompletionAttribute:function(){var i=e.trickle.getModelConfig(e.config);i&&i._completionAttribute&&(t=i._completionAttribute)},setupEventListeners:function(){this.listenTo(e,{"trickle:descendants":this.onDescendants,"trickle:steplock":this.onStepLock,"trickle:stepunlock":this.onStepUnlock,"trickle:kill":this.onKill,remove:this.onRemove})},onDescendants:function(i){i.descendantsParentFirst.each(_.bind(function(i){var s=e.trickle.getModelConfig(i);s&&(s._wasCompletedPreRender=i.get(t))},this))},onStepLock:function(i){var s=i.model.get(t),n=e.trickle.getModelConfig(i.model);return n._stepLocking._isCompletionRequired||n._stepLocking._isLockedOnRevisit?n._stepLocking._isCompletionRequired&&s&&n._wasCompletedPreRender?void e.trigger("trickle:continue",i):(e.trigger("trickle:wait"),s?void _.defer(function(){e.trigger("trickle:unwait")}):(i.model.set("_isTrickleAutoScrollComplete",!1),this.isCompleted=!1,this.isStepLocking=!0,this.stepModel=i.model,void this.listenTo(this.stepModel,"change:"+t,this.onCompletion))):void(s&&e.trigger("trickle:continue",i))},onCompletion:function(e,t){t!==!1&&_.defer(_.bind(function(){this.stepCompleted()},this))},stepCompleted:function(){this.isStepLocking&&(this.isCompleted||(this.isCompleted=!0,this.stopListening(this.stepModel,"change:"+t,this.onCompletion),_.defer(function(){e.trigger("trickle:unwait")})))},onKill:function(){this.onStepUnlock()},onRemove:function(){this.onStepUnlock()},onStepUnlock:function(){this.stopListening(this.stepModel,"change:"+t,this.onCompletion),this.isStepLocking=!1,this.stepModel=null,this.isCompleted=!1}},Backbone.Events);return i.initialize(),i}),define("extensions/adapt-contrib-trickle/js/handlers/notify",["coreJS/adapt"],function(e){var t=_.extend({isStepLocking:!1,isNotifyOpen:!1,initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.setupEventListeners()},setupEventListeners:function(){this.listenTo(e,{"trickle:steplock":this.onStepLock,"notify:opened":this.onNotifyOpened,"notify:closed":this.onNotifyClosed,"trickle:stepunlock":this.onStepUnlock,remove:this.onRemove})},onStepLock:function(e){this.isStepLocking=!0},onNotifyOpened:function(){this.isStepLocking&&(this.isNotifyOpen=!0,e.trigger("trickle:overlay"),e.trigger("trickle:wait"))},onNotifyClosed:function(){this.isStepLocking&&this.isNotifyOpen&&(this.isNotifyOpen=!1,e.trigger("trickle:unoverlay"),e.trigger("trickle:unwait"))},onStepUnlock:function(){this.isStepLocking=!1},onRemove:function(){this.onStepUnlock()}},Backbone.Events);return t.initialize(),t}),define("extensions/adapt-contrib-trickle/js/handlers/resize",["coreJS/adapt"],function(e){var t=_.extend({isStepLocking:!1,stepView:null,initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.debounceOnResize(),this.setupEventListeners()},debounceOnResize:function(){this.onResize=_.debounce(_.bind(this.onResize,this),10)},setupEventListeners:function(){this.listenTo(e,{"trickle:steplock":this.onStepLock,"trickle:resize":this.onTrickleResize,"trickle:stepunlock":this.onStepUnlock,"trickle:kill":this.onKill,"trickle:finished":this.onFinished,remove:this.onRemove})},onStepLock:function(t){this.isStepLocking=!0,this.stepView=t,$(window).on("resize",this.onResize),$(".page").on("resize",this.onResize),_.defer(function(){e.trigger("trickle:resize")})},onResize:function(){this.isStepLocking&&e.trigger("trickle:resize")},onTrickleResize:function(){if(this.isStepLocking){var e=this.stepView.$el.offset(),t=this.stepView.$el.height(),i=parseInt($("#wrapper").css("padding-top")||"0"),s=e.top-i+t;$("#wrapper").css("height",s)}},onStepUnlock:function(e){this.isStepLocking=!1,this.stepView=null,$(window).off("resize",this.onResize),$(".page").off("resize",this.onResize)},onKill:function(){this.onFinished(),this.onStepUnlock()},onFinished:function(){$("#wrapper").css("height","")},onRemove:function(){this.onStepUnlock(),this.stepView=null}},Backbone.Events);return t.initialize(),t}),define("extensions/adapt-contrib-trickle/js/handlers/tutor",["coreJS/adapt"],function(e){var t=_.extend({isStepLocking:!1,isTutorOpen:!1,initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.setupEventListeners()},setupEventListeners:function(){this.listenTo(e,{"trickle:steplock":this.onStepLock,"tutor:opened":this.onTutorOpened,"tutor:closed":this.onTutorClosed,"trickle:stepunlock":this.onStepUnlock,remove:this.onRemove})},onStepLock:function(e){this.isStepLocking=!0},onTutorOpened:function(){this.isStepLocking&&(this.isTutorOpen=!0,e.trigger("trickle:overlay"),e.trigger("trickle:wait"))},onTutorClosed:function(){this.isStepLocking&&this.isTutorOpen&&(this.isTutorOpen=!1,e.trigger("trickle:unoverlay"),e.trigger("trickle:unwait"))},onStepUnlock:function(){this.isStepLocking=!1},onRemove:function(){this.onStepUnlock()}},Backbone.Events);return t.initialize(),t}),define("extensions/adapt-contrib-trickle/js/handlers/visibility",["coreJS/adapt"],function(e){var t=_.extend({isStepLocking:!1,trickleModel:null,initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.setupEventListeners()},setupEventListeners:function(){this.listenTo(e,{"trickle:steplock":this.onStepLock,"trickle:visibility":this.onVisibility,"trickle:stepunlock":this.onStepUnlock,"trickle:kill":this.onKill,"trickle:finished":this.onFinished,remove:this.onRemove})},onStepLock:function(t){this.isStepLocking=!0,this.trickleModel=t.model,e.trigger("trickle:visibility")},onVisibility:function(){if(this.isStepLocking&&e.trickle.pageView){var t=e.trickle.pageView.descendantsParentFirst,i=this.trickleModel.get("_id"),s=this.trickleModel.get("_type"),n=_.findIndex(t.models,function(e){if(e.get("_id")===i)return!0});t.each(function(e,t){if(t<=n){e.set("_isVisible",!0,{pluginName:"trickle"});var o=e.findDescendants("components");o.each(function(e){e.set("_isVisible",!0,{pluginName:"trickle"})})}else{if("article"===s&&"block"===e.get("_type")&&e.get("_parentId")===i){e.set("_isVisible",!0,{pluginName:"trickle"});var o=e.findDescendants("components");return void o.each(function(e){e.set("_isVisible",!0,{pluginName:"trickle"})})}e.set("_isVisible",!1,{pluginName:"trickle"});var o=e.findDescendants("components");o.each(function(e){e.set("_isVisible",!1,{pluginName:"trickle"})})}})}},onStepUnlock:function(e){this.isStepLocking=!1,this.trickleModel=null},onKill:function(){this.onFinished(),this.onStepUnlock()},onFinished:function(){var t=e.trickle.pageView.descendantsParentFirst;t.each(function(e){e.set("_isVisible",!0,{pluginName:"trickle"});var t=e.findDescendants("components");t.each(function(e){e.set("_isVisible",!0,{pluginName:"trickle"})})})},onRemove:function(){this.onStepUnlock()}},Backbone.Events);return t.initialize(),t}),define("extensions/adapt-contrib-trickle/js/handlers/done",["coreJS/adapt"],function(e){var t=_.extend({initialize:function(){this.listenToOnce(e,"app:dataReady",this.onAppDataReady)},onAppDataReady:function(){this.setupEventListeners()},setupEventListeners:function(){this.onDone=_.debounce(_.bind(this.onDone),50),this.listenTo(e,{"trickle:steplock":this.onDone,"trickle:stepunlock":this.onDone,"trickle:continue":this.onDone,"trickle:finished":this.onDone})},onDone:function(){e.trigger("trickle:done")}},Backbone.Events);return t.initialize(),t}),define("extensions/adapt-contrib-trickle/js/adapt-contrib-trickle",["coreJS/adapt","./pageView","./lib/jquery.resize","./lib/adaptModelExtension","./handlers/button","./handlers/completion","./handlers/notify","./handlers/resize","./handlers/tutor","./handlers/visibility","./handlers/done"],function(e,t){return e.trickle=_.extend({model:null,pageView:null,initialize:function(){this.listenToOnce(e,{"app:dataReady":this.onAppDataReady})},onAppDataReady:function(){this.getCourseModel(),this.isCourseEnabled()&&this.setupListeners()},getCourseModel:function(){this.model=e.course},isCourseEnabled:function(){var e=this.getModelConfig(this.model);return!e||e._isEnabled!==!1},getModelConfig:function(e){return e.get("_trickle")},setModelConfig:function(e,t){return e.set("_trickle",t)},setupListeners:function(){this.listenTo(e,{"pageView:preRender":this.onPagePreRender,remove:this.onRemove})},onPagePreRender:function(e){this.pageView=new t({model:e.model,el:e.el})},scroll:function(t){_.delay(_.bind(function(){if(this.shouldScrollPage(t)){var i=e.trickle.getModelConfig(t),s=i._scrollTo;void 0===s&&(s="@block +1"),t.set("_isTrickleAutoScrollComplete",!0);var n="";switch(s.substr(0,1)){case"@":var o=t.findRelative(s,{filterNotAvailable:!0});if(void 0===o)return;n=o.get("_id");break;case".":n=s.substr(1,s.length-1);break;default:n=s}if(""!=n){var r=t.get("_trickle")._scrollDuration||500;e.scrollTo("."+n,{duration:r})}}},this),250)},shouldScrollPage:function(t){var i=e.trickle.getModelConfig(t);if(!i||!i._isEnabled)return!1;var s=t.get("_isTrickleAutoScrollComplete");if(s)return!1;var n=!i._autoScroll;if(n)return!1;var o="article"===t.get("_type")&&i._onChildren;return!o},onRemove:function(){}},Backbone.Events),e.trickle.initialize(),e.trickle}),define("extensions/adapt-contrib-tutor/js/adapt-contrib-tutor",["coreJS/adapt"],function(e){e.on("questionView:showFeedback",function(t){var i={title:t.model.get("feedbackTitle"),body:t.model.get("feedbackMessage")};t.model.has("_isCorrect")&&(t.model.get("_isCorrect")?i._classes="correct":t.model.has("_isAtLeastOneCorrectSelection")?i._classes=t.model.get("_isAtLeastOneCorrectSelection")?"partially-correct":"incorrect":i._classes="incorrect"),e.once("notify:closed",function(){e.trigger("tutor:closed",t,i)}),e.trigger("notify:popup",i),e.trigger("tutor:opened",t,i)})}),define("extensions/adapt-prlx/js/layer",[],function(){var e=Backbone.View.extend({className:"prlx-layer",initialize:function(){this.pickSize(),this.addClasses(),this.render()},pickSize:function(){var e="";(window.screen.width<=1024||$.prlx.isMobile)&&(e="small"),_.each(this.model,function(t,i){if(t._graphic){var s=document.createElement("a");s.href=t._graphic;var n=s.href.substr(s.href.lastIndexOf("/")+1);s.href+=("/../"+e+"/"+n).replace(/\/\//g,"/"),t._graphic=s.href}})},addClasses:function(){this.$el.addClass(this.model.__className),this.$el.addClass(this.model._classes)},render:function(){this.$el.html(Handlebars.templates[this.constructor.template](this.model))}},{template:"prlx-layer"});return e}),function(e){function t(e){for(var t=0,i=e.length;t<i;t++){var s=e[t].toLowerCase();this[s]=new Number(t),this[s].string=s}}function i(e,t){for(var i=[],s=0,n=e.length;s<n;s++)t(e[s],s)&&i.push(e[s]);return i}function s(e,t){for(var i,s=0,n=e.length;s<n;s++){var o=t(e[s],i);i=void 0!==o?o:i}return i}function n(e){for(var t=!1;e&&!t;)t="fixed"==e.style.position,e=e.parentElement;return t}function o(e){switch(typeof e){case"string":if(D.test(e)){var t=e.replace(D,"").replace(B,"");e={red:0,green:0,blue:0,opacity:1};for(var i=t.split(","),s=0,n=i.length;s<n;s++){var o=N[s];e[o]=parseInt(i[s])}}}return e}var r=function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)}();e.fn.attrs=e.fn.attrs||function(t){var i=e(this);if(t){for(var s=0,n=i.length;s<n;s++){var o=i[s],r=e(o);for(var a in t)r.attr(a,t[a])}return i}var t={},l=i.get(0);if(l){l=l.attributes;for(var s in l){var c=l[s];c&&"undefined"!=typeof c.value&&(t[c.nodeName]=c.value)}}return t};var a=function(){var e=window.requestAnimationFrame||window[U.theCSSPrefix.toLowerCase()+"RequestAnimationFrame"],t=(new Date).getTime();return e||(e=function(e){var i=(new Date).getTime()-t,s=Math.max(0,1e3/60-i);return window.setTimeout(function(){t=(new Date).getTime(),e()},s)}),e}(),l=function(){var e=window.cancelAnimationFrame||window[theCSSPrefix.toLowerCase()+"CancelAnimationFrame"];return!r&&e||(e=function(e){return window.clearTimeout(e)}),e},c=/[^-]*/g,d=/\-\-/g,u=/[^;]*/g,h=/[^:]*/,p=/([^\[\]]+)|(\[{1}[^\[\]]*\]{1})/g,m=/-([a-z0-9_])/g,f=function(e,t){return t.toUpperCase()},g="prlx",v="prlx-child",b=g+"-scroller",_=new t(["nodebug","debug"]),y=new t(["style","class"]),w=new t(["add","remove"]),k=new t(["both","forward","backward"]),S=new t(["subject","scroll","parent"]),C=new t(["top","bottom","center"]),T=new t(["pc","tt"]),x=new t(["start","end"]);window.prlx={DEBUG:_,CHANGE:y,CLASSACTION:w,DIRECTION:k,RELATIVETO:S,ANCHOR:C,SCALE:T,ORDER:x};var a,A,P,E=e(window),I=e("html"),j=e("head"),L=e("body"),R=e(window.document),M=e(".prlx-debug"),$={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5},sqrt:function(e){return Math.sqrt(e)},outCubic:function(e){return Math.pow(e-1,3)+1},bounce:function(e){var t;if(e<=.5083)t=3;else if(e<=.8489)t=9;else if(e<=.96208)t=27;else{if(!(e<=.99981))return 1;t=91}return 1-Math.abs(3*Math.cos(e*t*1.028)/t)}},V={};A=P=function(e,t,i,s){s=s||1;var n="rgba("+e+","+t+","+i+","+s+")";return V[n]=V[n]||o(n)};var O,F=function(e,t,i){if(e=o(e),!t&&!i)return e;t=o(t);var s={red:Math.round((t.red-e.red)*i+e.red),green:Math.round((t.green-e.green)*i+e.green),blue:Math.round((t.blue-e.blue)*i+e.blue),opacity:(t.opacity-e.opacity)*i+e.opacity},n=new String("rgba("+s.red+","+s.green+","+s.blue+","+s.opacity+")");return n.red=s.red,n.green=s.green,n.blue=s.blue,n.opacity=s.opacity,o(n)},D=/(rgba|rgb){1}\({1}/gi,B=/\){1}/gi,N=["red","green","blue","opacity"],z=!1,H=100,q=1e3/H,U={awaitingRaf:!1,previousScrollTop:0,previousRenderTop:0,previousRenderTime:0,previousTickTime:0,previousStartScroll:0,mobileScrollTop:0,propTable:{},bannedPropTable:{},tickScrollTime:0,ratioHeight:0,theCSSPrefix:"",theDashedCSSPrefix:"",pcToPxRatio:1,frames:0,missedFrames:0,fpsCalculate:function(t){var i=null;t&&U.frames>=20&&(U.missedFrames+=t,U.missedFrames/U.frames>.05&&(i=.9*H,i<16&&(i=16))),e.prlx.isMobile?(i&&(e.prlx.isMobile=i),H=e.prlx.fpsMobile):(i&&(e.prlx.fpsDesktop=i),H=e.prlx.fpsDesktop),q=1e3/H},setGlobals:function(){z||(z=!0,I=e("html"),j=e("head"),L=e("body"),R=e(window.document),M=e('<div class="prlx-debug" style="position:fixed;top:0;left:0;background:pink;"></div>'),L.append(M))},detectCSSPrefix:function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(window.getComputedStyle){var t=window.getComputedStyle(L[0],null);for(var i in t)if(U.theCSSPrefix=i.match(e)||+i==i&&t[i].match(e),U.theCSSPrefix)break;if(!U.theCSSPrefix)return void(U.theCSSPrefix=U.theDashedCSSPrefix="");U.theCSSPrefix=U.theCSSPrefix[0],"-"==U.theCSSPrefix.slice(0,1)?(U.theDashedCSSPrefix=U.theCSSPrefix,U.theCSSPrefix={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[U.theCSSPrefix]):U.theDashedCSSPrefix="-"+U.theCSSPrefix.toLowerCase()+"-"}},getScrollerDiv:function(){var t=e("["+b+"]");if(0!==t.length)return e(t[0])},getScrollerHeight:function(){var t=U.getScrollerDiv();t&&(e.prlx.scrollHeight=t.height(),e.prlx.scrollableHeight=e.prlx.scrollHeight-O.height)},onResize:function(){U.getWindowsDimensions(),U.getScrollerHeight(),e.prlx.forceRender=!0},getWindowsDimensions:function(){O=O||{},O.height=window.innerHeight,O.width=window.innerWidth,U.ratioHeight=100/window.innerHeight,O.fixedRatio=e.prlx.fixedRatio,O.expectedWidth=Math.round(O.height*O.fixedRatio),O.expectedHeight=Math.round(O.width/O.fixedRatio),O.ratio=window.innerWidth/window.innerHeight},getAnimateObjects:function(){var t=U.getScrollerDiv();if(t){var o=t.find("["+g+"], ["+v+"]");e.prlx.animateObjects=[];for(var r=U.getRenderPos(U.scrollTop()),a=0,l=o.length;a<l;a++){var u,h,b=o[a],A=e(b),P=A.attrs(),E=[],I=!1;for(var j in P){var L=j.replace(d,"-n"),R=L.match(c);if(R=i(R,function(e){return e}),R[0]==g&&1!=R.length&&"child"!=R[1]&&"content"!=R[1]&&"scroller"!=R[1]&&"debug"!=R[1]){for(var M={PREFIX:g,DEBUG:_.nodebug,CHANGE:y.style,CLASSACTION:w.add,DIRECTION:k.both,RELATIVETO:S.subject,ANCHOR:C.top,SCALE:T.pc,fromvalue:0,tovalue:0,CHANGETO:P[j],math:P[j].indexOf("[")!=-1,start:!1,end:!1},$=!1,V=0,O=R.length;V<O;V++){var F=R[V];if(F!=M.PREFIX)if(_[F])M.DEBUG=_[F];else if(y[F])M.CHANGE=y[F];else if(w[F])M.CLASSACTION=w[F];else if(k[F])M.DIRECTION=k[F];else if(S[F])M.RELATIVETO=S[F];else if(C[F])M.ANCHOR=C[F];else if(T[F])M.SCALE=T[F];else if(x[F])switch(x[F]){case x.start:M.start=!0;break;case x.end:M.end=!0}else{var D=0;try{D="n"==F[0]?-parseInt(F.substr(1)):parseInt(F)}catch(e){continue}if($){M.tovalue=D,M.fromvalue>M.tovalue&&(M.tovalue=M.fromvalue,M.fromvalue=D),M.range=M.tovalue-M.fromvalue;continue}$=!0,M.fromvalue=D,M.tovalue=D,M.range=0}}var B;M.ANCHOR==C.top?B="top":M.ANCHOR==C.center?B="center":M.ANCHOR==C.bottom&&(B="bottom");var N="";if(M.SCALE==T.pc)N="PC";else{if(M.SCALE!=T.tt)throw"Cannot use pixels in directives";N="TT"}if(M.start_name=B+"Start"+N,M.end_name=B+"End"+N,M.value_name=B+N,M.CHANGE===y.style){var z=U.parseStyle(M.CHANGETO);M.CHANGETOOBJ={};var H,q="";for(var j in z){H=j.replace(m,f).replace("-",""),q+=H+":"+z[j]+";";var W=z[j].match(p);if(W)for(var V=0,O=W.length;V<O;V++){var Q=W[V];if("["==Q[0]){var J=Q.substr(1,Q.length-2);W[V]=new Function("color","ease","rgb","rgba","directive","scroll","window","subject","parent","$el",U.evaluateMathsHeader+" return "+J)}}M.CHANGETOOBJ[H]={CHANGETO:z[j],math_matches:W,math:null!==W}}M.CHANGETO=q}M.math&&(M.math_matches=M.CHANGETO.match(p)),M.start&&(u=M),M.end&&(h=M),M.start||M.end||E.push(M)}else"debug"===R[1]&&(I=!0)}if(0!==E.length){var G=A.is("["+g+"]")?A:e(A.parents("["+g+"]")[0]),Y={$el:A,$subject:G,$parent:G.parent(),directives:E,fromvalueTT:s(E,function(e,t){var i=e.fromvalue;if(e.SCALE===T.pc&&(i=100*i),i<t||void 0===t)return i}),tovalueTT:s(E,function(e,t){var i=e.tovalue;if(e.SCALE===T.pc&&(i=100*i),i>t||void 0===t)return i}),start:u,end:h,debug:I,isFixedPosition:n(A[0])};U.getElementMeasurements(Y.$subject,r,Y.isFixedPosition),U.getElementMeasurements(Y.$parent,r,Y.isFixedPosition),e.prlx.animateObjects.push(Y)}}}},injects:function(){for(var t=0,i=e.prlx.animateObjects.length;t<i;t++){var s=e.prlx.animateObjects[t],n=s.$el.attr("append-to"),o=s.$el.attr("prepend-to");(n||o)&&(o?e(o).prepend(s.$el):e(n).append(s.$el))}},getElementMeasurements:function(e,t,i){if(0!==e.length){var s,n=e[0],o=t.direction==k.forward,r=0;n._prlx_bounding?(s=n._prlx_bounding,i||(r=t.top-n._prlx_bounding_scroll)):(s=n._prlx_bounding=n.getBoundingClientRect(),n._prlx_bounding_scroll=t.top);var a=s.height,l=s.width,c=s.top-r,d=c+a/2,u=O.height-(c+a),h=U.ratioHeight*c,p=U.ratioHeight*d,m=U.ratioHeight*u,f=100*p,g=100*p,v=100*m,b=n._prlx||{height:a,width:l,top:c,center:d,bottom:u,topPC:h,centerPC:p,bottomPC:m,topTT:f,centerTT:g,bottomTT:v},_=b;return o?(_.topStart=b.top,_.topEnd=c,_.centerStart=b.center,_.centerEnd=d,_.bottomStart=b.bottom,_.bottomEnd=u,_.topStartPC=b.topPC,_.topEndPC=h,_.centerStartPC=b.centerPC,_.centerEndPC=p,_.bottomStartPC=b.bottomPC,_.bottomEndPC=m,_.topStartTT=b.topTT,_.topEndTT=f,_.centerStartTT=b.centerTT,_.centerEndTT=g,_.bottomStartTT=b.bottomTT,_.bottomEndTT=v):(_.topStart=c,_.topEnd=b.top,_.centerStart=d,_.centerEnd=b.center,_.bottomStart=u,_.bottomEnd=b.bottom,_.topStartPC=h,_.topEndPC=b.topPC,_.centerStartPC=p,_.centerEndPC=b.centerPC,_.bottomStartPC=m,_.bottomEndPC=b.bottomPC,_.topStartTT=f,_.topEndTT=b.topTT,_.centerStartTT=g,_.centerEndTT=b.centerTT,_.bottomStartTT=v,_.bottomEndTT=b.bottomTT),_.height=a,_.width=l,_.top=c,_.center=d,_.bottom=u,_.topPC=h,_.centerPC=p,_.bottomPC=m,_.topTT=f,_.centerTT=g,_.bottomTT=v,_}},parseStyle:function(e){var t={},s=e.match(u);if(!s)return t;s=i(s,function(e){return e});for(var n=0,o=s.length;n<o;n++){var r=s[n],a=r.match(h)[0],l=r.substr(a.length+1).trim();a=a.trim(),t[a]=l}return t},getRenderPos:function(t,i){var s=e.prlx.isFixed?e.prlx.scrollableHeight:e.prlx.scrollHeight,n=100/e.prlx.scrollHeight*t,o=100/s,r=o*t,a=U.previousScrollTop<=t,l=a?U.previousScrollTop:t,c=a?t:U.previousScrollTop,d=o*l,u=o*c,h=s-t,p=o*h,m=s-c,f=s-l,g=o*m,v=o*f,b=1e4/s,_=b*t,y=b*l,w=b*c,S=b*h,C=b*m,T=b*f,x=U.renderPos||{};return x.offsetPC=n,x.top=t,x.topPC=r,x.topStart=l,x.topEnd=c,x.topStartPC=d,x.topEndPC=u,x.bottom=h,x.bottomPC=p,x.bottomStart=m,x.bottomEnd=f,x.bottomStartPC=g,x.bottomEndPC=v,x.height=s,x.direction=a?k.forward:k.backward,x.topTT=_,x.topStartTT=y,x.topEndTT=w,x.bottomTT=S,x.bottomStartTT=C,x.bottomEndTT=T,x.time=i||0,U.renderPos=x},scrollLoop:function(e){if(!U.inScroll){var t=(new Date).getTime();U.previousRenderTime=t-q,U.previousTickTime=t-q}return e&&(U.rafHandle&&(l(U.rafHandle),U.rafHandle=null),U.reloopHandle&&(clearTimeout(U.reloopHandle),U.reloopHandle=null),U.hasRAFStarted=!1),U.hasRAFStarted?void("function"==typeof e&&setTimeout(e,0)):(U.hasRAFStarted=!0,void(U.rafHandle=a(function(){U.render(e)})))},render:function(t){if(U.rafHandle=null,!e.prlx.enabled)return void("function"==typeof t&&setTimeout(t,0));U.hasRAFStarted=!1,U.frames++,U.frames>1e3&&(U.frames=0,U.missedFrames=0);var i=(new Date).getTime(),s=i-U.previousRenderTime,n=i-U.previousTickTime;U.previousTickTime=i;var o=n-q;if(o>=q){var r=o/q;U.fpsCalculate(r)}if(s<=q)return"function"==typeof t&&setTimeout(t,0),U.reloop(n);var a=U.scrollTop(),l=a-U.previousRenderTop;if(Math.abs(l)<=5&&!e.prlx.forceRender&&!t)return U.inScroll&&(U.inScroll=!1),void("function"==typeof t&&setTimeout(t,0));U.inScroll||(U.inScroll=!0),U.tickScrollTime=i,U.inRAF=!0,e.prlx.forceRender=!1;var c=a,d=i-U.previousRenderTime;if(e.prlx.smoothingDuration){var u=a-U.previousRenderTop,h=$.sqrt(d/e.prlx.smoothingDuration);h>1&&(h=1),c=U.previousRenderTop+h*u}for(var p=U.getRenderPos(c,n),m=0,f=e.prlx.animateObjects.length;m<f;m++)U.processAnimateObject(e.prlx.animateObjects[m],p,O);U.previousRenderTop=c,U.previousScrollTop=a,U.previousRenderTime=i,U.reloop(n);(new Date).getTime();U.inRAF=!1,"function"==typeof t&&setTimeout(t,0)},reloop:function(e){var t=q-e;t=t<0?0:t,U.reloopHandle=setTimeout(function(){U.reloopHandle=null,U.scrollLoop()},t)},scrollTop:function(){return e.prlx.isMobile&&e.prlx.isFixed?U.mobileScrollTop:Math.round(L[0].scrollTop||I[0].scrollTop)},processAnimateObject:function(e,t){var i,s,n=e.$el,o=e.$el[0],r=[],a=!1;if(0!==e.directives.length){if(e.fromvalueTT>t.topTT){if(e.instart||!e.start)return;r.push(e.start),a=!0,e.instart=!0,e.inend=!1,e.start.DEBUG===_.debug&&console.log(t.top,n,"in start")}else if(e.tovalueTT<t.topTT){if(e.inend||!e.end)return;r.push(e.end),a=!0,e.instart=!1,e.inend=!0,e.end.DEBUG===_.debug&&console.log(t.top,n,"in end")}else(e.instart||e.inend)&&(e.instart=!1,e.inend=!1);if(!a)for(var l=t.direction==k.forward,c=0,d=e.directives.length;c<d;c++){var u=e.directives[c];if(u.DIRECTION==k.both||u.DIRECTION==t.direction){var h;u.RELATIVETO==S.scroll?h=t:u.RELATIVETO==S.parent?h=s||(s=U.getElementMeasurements(e.$parent,t,e.isFixed)):u.RELATIVETO==S.subject&&(h=i||(i=U.getElementMeasurements(e.$subject,t,e.isFixed)));var p=u.start_name,m=u.end_name,f=u.value_name,g=u.fromvalue<h[p]&&u.tovalue<h[p]||u.fromvalue>h[m]&&u.tovalue>h[m];g||(u.value=h[f],u.offset=u.value-u.fromvalue,u.offset>u.range?u.offset=u.range:u.offset<0&&(u.offset=0),u.percent=100/u.range*u.offset,l?r.push(u):r.unshift(u))}}i=i||U.getElementMeasurements(e.$subject,t,e.isFixed),s=s||U.getElementMeasurements(e.$parent,t,e.isFixed);for(var v={},b=0,c=0,d=r.length;c<d;c++){var u=r[c];if(u.CHANGE==y.style){o._prlx_style=o._prlx_style||{};for(var C in u.CHANGETOOBJ){var T=[C],x=u.CHANGETOOBJ[C],E=x.CHANGETO;if(x.math){for(var I="",j=0,L=x.math_matches.length;j<L;j++){var R=x.math_matches[j];if("function"==typeof R){var M=R(F,$,A,P,u,t,O,i,s,e.$el);switch(typeof M){case"number":I+=M;break;default:I+=M}}else I+=R}E=I}if("zIndex"==C)isNaN(E)||(E=""+(0|E));else if("float"==C)T.unshift("styleFloat"),T.unshift("cssFloat");else if(U.theCSSPrefix){var V=U.propTable[C]||(U.propTable[C]=U.theCSSPrefix+C.slice(0,1).toUpperCase()+C.slice(1));U.bannedPropTable[V]||void 0===o.style[V]?U.bannedPropTable[V]=!0:T.unshift(V)}for(var D=0,B=T.length;D<B;D++){var N=T[D];if(o._prlx_style[N]==E){if(o.style[N]==E)continue;u.DEBUG===_.debug&&console.log(t.top,n,"prop conflict",N,o.style[N],E)}o.style[N]=o._prlx_style[N]=E,v[N]=E,b++}u.DEBUG===_.debug&&console.log(t.top,n,"style changes",v),"0"==o._prlx_style.opacity||"hidden"==o._prlx_style.visibility?o.style.display="none":o.style.display=o._prlx_style.display||""}}else u.CHANGE==y.class&&(u.CLASSACTION==w.add?(o.classList.add(u.CHANGETO),u.DEBUG===_.debug&&console.log(t.top,n,"classes added",u.CHANGETO)):(o.classList.remove(u.CHANGETO),u.DEBUG===_.debug&&console.log(t.top,n,"classes remove",u.CHANGETO)))}}},evaluateMathsHeader:"var value = directive.value;var range = directive.range;var percent = directive.percent;var offset = directive.offset;var fromvalue = directive.fromvalue;var tovalue = directive.tovalue;var p360 = (360/range) * offset;var p255 = (255/range) * offset;var p100 = percent;var p1 = ((100/range) * offset) / 100;var ip360 = 360-p360;var ip255 = 255-p255;var ip100 = 100-p100;var ip1 = 1-p1;var ms = scroll.time;var sec = scroll.time/1000;",reattachEvents:function(){E.off("scroll",U.scrollLoop).on("scroll",U.scrollLoop),E.off("resize",U.onResize).on("resize",U.onResize),W.reattachEvents()},clearAnimateObjects:function(){e.prlx.animateObjects=[]},detachEvents:function(){E.off("scroll",U.scrollLoop),E.off("resize",U.onResize),W.detachEvents()}};e.prlx={enabled:!1,scrollHeight:0,scrollableHeight:0,animateObjects:[],fpsDesktop:null,fpsMobile:null,isMobile:r,dimensions:O,animateScroll:!1,smoothingDuration:null,isFixed:!1,isLetterBoxed:!1,fixedRatio:null,make:function(t,i){t=t||{},e.prlx.fpsDesktop=t.fpsDesktop||100,e.prlx.fpsMobile=t.fpsMobile||30,e.prlx.smoothingDuration=t.smoothingDuration||800,e.prlx.animateScroll=t.animateScroll||!1,e.prlx.isLetterBoxed=t.isLetterBoxed||!1,e.prlx.isFixed=t.isFixed||!1,e.prlx.fixedRatio=t.fixedRatio||16/9,U.setGlobals(),U.fpsCalculate(),I.addClass("prlx"),I.addClass(e.prlx.isFixed?"prlx-fixed":"prlx-scroll"),e.prlx.isMobile&&I.addClass("prlx-mobile"),e.prlx.smoothingDuration&&I.addClass("prlx-smoothing"),e.prlx.isFixed?e.prlx.isLetterBoxed&&(I.addClass("prlx-letter-box"),e("[prlx-content]").attrs({prlx:"true","prlx-scroll-0-100":"top: 50%; transform: translateY(-50%); margin: auto; width: [ window.ratio > window.fixedRatio ? window.expectedWidth+'px' : ''  ]; height: [ window.ratio < window.fixedRatio ? window.expectedHeight+'px' : ''  ];"})):e.prlx.animateScroll&&(I.addClass("prlx-scroll-animate"),e("[prlx-content]").attrs({prlx:"true","prlx-scroll-0-100":"transform: translateY(-[offset]%);"}),e("[prlx-scroller]").css({height:e("[prlx-content]").height()})),U.onResize(),U.getAnimateObjects(),U.injects(),U.reattachEvents(),e.prlx.enabled=!0,e.prlx.forceRender=!0,U.scrollLoop(i)},resize:function(e){U.onResize(),U.scrollLoop(e)},destroy:function(){U.setGlobals(),e.prlx.fpsDesktop=100,e.prlx.fpsMobile=30,e.prlx.smoothingDuration=500,e.prlx.animateScroll=!1,e.prlx.isLetterBoxed=!1,e.prlx.isFixed=!1,U.clearAnimateObjects(),U.detachEvents(),I.removeClass("prlx"),I.removeClass("prlx-scroll-animate"),I.removeClass("prlx-scroll"),I.removeClass("prlx-fixed"),I.removeClass("prlx-mobile"),I.removeClass("prlx-smoothing"),I.removeClass("prlx-letter-box")}};var W={rxTouchIgnoreTags:/^(?:input|textarea|button|select)$/i,startY:0,startScrollTop:0,startTime:0,endTime:0,touchTime:0,hasEnded:!0,distance:0,flickTime:200,animationHandle:null,reattachEvents:function(){e.prlx.isMobile&&e.prlx.isFixed&&R.off("touchstart touchmove touchcancel touchend",W.onScroll).on("touchstart touchmove touchcancel touchend",W.onScroll)},detachEvents:function(){R.off("touchstart touchmove touchcancel touchend",W.onScroll)},onScroll:function(t){if(e.prlx.isFixed){U.scrollLoop();for(var i=t.originalEvent.changedTouches[0],s=t.target;3===s.nodeType;)s=s.parentNode;var n=i.clientY;i.clientX,t.timeStamp;switch(t.type){case"touchcancel":break;case"touchmove":W.rxTouchIgnoreTags.test(s.tagName)||t.preventDefault()}switch(t.type){case"touchstart":W.startedScroll(n);break;case"touchmove":W.touchTime=(new Date).getTime(),W.hasEnded&&W.startedScroll(n);var o=W.calculateDistance(n);W.applyDistance(o),U.inScroll=!1;break;case"touchcancel":break;case"touchend":var r=O.height;e.prlx.isFixed&&e.prlx.isLetterBoxed&&(r=O.ratio<O.fixedRatio?O.expectedHeight:O.height),W.hasEnded=!0;var a=1,o=W.calculateDistance(n)/2,l=o<0?"backward":"forward";Math.abs(o)>r&&(o=("backward"===l?-1:1)*r);var c=o;W.endTime=(new Date).getTime(),W.touchTime=W.endTime;var d=(W.endTime-W.startTime,W.scrollTime<W.flickTime);if(d){var u=W.flickTime-W.scrollTime,h=u/e.prlx.smoothingDuration;o*=h,a=2,W.inFlick=!0,W.stepApply(c,a,function(){U.inScroll=!1,W.inFlick=!1})}W.startTime=(new Date).getTime()}}},startedScroll:function(e){W.hasEnded=!1,W.cancelAnimation(),W.startScrollTop=U.mobileScrollTop,W.startY=e,W.startTime=(new Date).getTime(),W.touchTime=W.startTime},calculateDistance:function(e){var t=W.startY-e;return t},stepApply:function(t,i,s){return i--,W.cancelAnimation(),W.applyDistance(t),0===i?s():(W.startScrollTop=U.mobileScrollTop,void(W.animationHandle=setTimeout(function(){W.stepApply(t,i,s)},$.sqrt(e.prlx.smoothingDuration))))},applyDistance:function(t){U.mobileScrollTop=W.startScrollTop+t,U.mobileScrollTop>e.prlx.scrollableHeight?U.mobileScrollTop=e.prlx.scrollableHeight:U.mobileScrollTop<0&&(U.mobileScrollTop=0),U.mobileScrollTop=parseInt(U.mobileScrollTop)},cancelAnimation:function(){W.animationHandle&&(clearTimeout(W.animationHandle),W.animationHandle=null)}};U.detectCSSPrefix(),U.getWindowsDimensions()}(jQuery),define("extensions/adapt-prlx/js/jquery.prlx",function(){}),define("extensions/adapt-prlx/js/component",["core/js/views/componentView","core/js/adapt"],function(e,t){var i=e.extend({preRender:function(){this.$el.addClass("no-state"),this.checkIfResetOnRevisit()},postRender:function(){this.setReadyStatus()},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&this.model.reset(e)}});return t.register("prlx",i),i}),define("extensions/adapt-prlx/js/loading",["core/js/adapt"],function(e){var t,i,s=16/9,n=$("html"),o={getWindowsDimensions:function(){t=t||{},t.height=window.innerHeight,t.width=window.innerWidth,t.fixedRatio=s,t.expectedWidth=Math.round(t.height*t.fixedRatio),t.expectedHeight=Math.round(t.width/t.fixedRatio),t.ratio=window.innerWidth/window.innerHeight},start:function(){if(i){s=i.fixedRatio||s,o.getWindowsDimensions();var e=t.height,r=t.width;i.isFixed&&i.isLetterBoxed&&(n.addClass("prlx-fixed"),n.addClass("prlx-letter-box"),e=t.ratio<t.fixedRatio?t.expectedHeight:null,r=t.ratio>t.fixedRatio?t.expectedWidth:null,$(".loading").css({margin:"auto",width:r||"",height:e||"","background-color":i.backgroundColor}))}n.addClass("prlx-starting")}};$(window).on("resize",o.start),$(window).one("prlx-started",function(){n.addClass("prlx-started").removeClass("prlx-starting"),$(window).off("resize",o.start)}),e.on("configModel:dataLoaded",function(){i=e.config.get("_prlx"),o.start()})}),define("extensions/adapt-prlx/js/adapt-prlx",["coreJS/adapt","./layer","./jquery.prlx","./component","./loading"],function(e,t){
function i(e,i){if(e._background&&0!==e._background.length){e._background.__className="prlx-background";var s=new t({model:e._background});i.$el.prepend(s.$el)}}function s(e,i){if(e._foreground&&0!==e._foreground.length){e._foreground.__className="prlx-foreground";var s=new t({model:e._foreground});i.$el.prepend(s.$el)}}function n(e){a&&c.imageready(function(){$("html").addClass("prlx-loaded").removeClass("prlx-loading"),$(window).resize(),$.prlx.make(l,function(){$.prlx.resize(function(){$(window).trigger("prlx-started")})})})}var o=["menu","page"],r=["menu","page","article","block","component"];o.push(""),r.push("");var a=!1,l=null,c=null;e.on(o.join("View:postRender "),function(t){if(e.location._currentId===t.model.get("_id")){var i=t.model.get("_prlx");if(!i||i._isEnabled!==!0)return void $(window).trigger("prlx-started");$("html").addClass("prlx-loading"),e.location._currentId===t.model.get("_id")&&(a=!0,$("#wrapper").attr({"prlx-scroller":"true"}),t.$el.attr({"prlx-content":"true"}),l=i._options,c=t.$el,t.model.once("change:_isReady",n))}}),e.on(r.join("View:postRender "),function(e){var t=e.model.get("_prlx");if(t&&t._isEnabled===!0){var n={prlx:"true"};if(t._attributes&&(n=$.extend({prlx:"true"},t._attributes)),t._innerAttributes){var o=$.extend({"prlx-child":"true"},t._innerAttributes);e.$el.find("."+e.model.get("_type")+"-inner").attrs(o)}e.$el.attrs(n),s(t,e),i(t,e)}}),e.on("remove",function(){a&&(c=null,a=!1,l=null,$.prlx.destroy(),$("html").removeClass("prlx-loading"))})}),define("components/adapt-contrib-accordion/js/adapt-contrib-accordion",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({events:{"click .accordion-item-title":"toggleItem"},toggleSpeed:200,preRender:function(){this.checkIfResetOnRevisit()},postRender:function(){this.setReadyStatus()},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&(this.model.reset(e),_.each(this.model.get("_items"),function(e){e._isVisited=!1}))},toggleItem:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.parent(".accordion-item"),s=t.hasClass("selected");if(this.model.get("_shouldCollapseItems")===!1)this.closeItem(i);else for(var n=this.$(".accordion-item"),o=n.length,r=0;r<o;r++)this.closeItem($(n[r]));s||this.openItem(i)},closeItem:function(e){if(!e)return!1;var t=$(".accordion-item-body",e).first(),i=$("button",e).first(),s=$(".accordion-item-title-icon",e).first();t.stop(!0,!0).slideUp(this.toggleSpeed),i.removeClass("selected"),i.attr("aria-expanded",!1),s.addClass("icon-plus"),s.removeClass("icon-minus")},openItem:function(e){if(!e)return!1;var t=$(".accordion-item-body",e).first(),i=$("button",e).first(),s=$(".accordion-item-title-icon",e).first();t=t.stop(!0,!0).slideDown(this.toggleSpeed,function(){t.a11y_focus()}),i.addClass("selected"),i.attr("aria-expanded",!0),this.setVisited(e.index()),i.addClass("visited"),s.removeClass("icon-plus"),s.addClass("icon-minus")},setVisited:function(e){var t=this.model.get("_items")[e];t._isVisited=!0,this.checkCompletionStatus()},getVisitedItems:function(){return _.filter(this.model.get("_items"),function(e){return e._isVisited})},checkCompletionStatus:function(){this.getVisitedItems().length==this.model.get("_items").length&&this.setCompletionStatus()}});return i.register("accordion",s),s}),define("components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({events:{inview:"onInview","click .results-retry-button button":"onRetry"},preRender:function(){this.model.setLocking&&this.model.setLocking("_isVisible",!1),this.saveOriginalTexts(),this.setupEventListeners(),this.setupModelResetEvent(),this.checkIfComplete(),this.checkIfVisible()},saveOriginalTexts:function(){this.model.set({originalTitle:this.model.get("title"),originalBody:this.model.get("body"),originalInstruction:this.model.get("instruction")})},checkIfVisible:function(){if(!i.assessment)return!1;var e=this.model.get("_isVisibleBeforeCompletion")||!1,t=!1,s=this.model.get("_isVisible"),n=i.assessment.get(this.model.get("_assessmentId"));if(n&&0!==n.length){var o=n.getState(),r=o.isComplete,a=o.attemptInProgress,l=o.attemptsSpent,c=!a&&l>0;t=e&&!r||c,!s&&t&&(t=!1),this.model.set("_isVisible",t,{pluginName:"assessmentResults"})}},checkIfComplete:function(){if(!i.assessment)return!1;var e=i.assessment.get(this.model.get("_assessmentId"));if(e&&0!==e.length){var t=e.getState(),s=t.isComplete;s?this.onAssessmentsComplete(t):this.model.reset("hard",!0)}},setupModelResetEvent:function(){this.model.onAssessmentsReset||(this.model.onAssessmentsReset=function(e){void 0!==this.get("_assessmentId")&&this.get("_assessmentId")==e.id&&this.reset("hard",!0)},this.model.listenTo(i,"assessments:reset",this.model.onAssessmentsReset))},postRender:function(){this.setReadyStatus()},setupEventListeners:function(){this.listenTo(i,"assessments:complete",this.onAssessmentsComplete),this.listenToOnce(i,"remove",this.onRemove)},removeEventListeners:function(){this.stopListening(i,"assessments:complete",this.onAssessmentsComplete),this.stopListening(i,"remove",this.onRemove)},onAssessmentsComplete:function(e){if(void 0!==this.model.get("_assessmentId")&&this.model.get("_assessmentId")==e.id){this.model.set("_state",e);var t=this.getFeedbackBand();this.setFeedback(t),this.addClassesToArticle(t),this.render(),this.show()}},onAssessmentComplete:function(e){this.model.set("_state",e);var t=this.getFeedbackBand();this.setFeedback(t),this.addClassesToArticle(t),this.render(),this.show()},onInview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),(this._isVisibleTop||this._isVisibleBottom)&&(this.setCompletionStatus(),this.$el.off("inview")))},onRetry:function(){var e=this.model.get("_state"),t=i.assessment.get(e.id);this.restoreOriginalTexts(),t.reset()},restoreOriginalTexts:function(){this.model.set({title:this.model.get("originalTitle"),body:this.model.get("originalBody"),instruction:this.model.get("originalInstruction")})},show:function(){this.model.get("_isVisible")||this.model.set("_isVisible",!0,{pluginName:"assessmentResults"})},setFeedback:function(e){var t=this.model.get("_completionBody"),i=this.model.get("_state");i.feedbackBand=e,i.feedback=e.feedback,this.checkRetryEnabled(),t=this.stringReplace(t,i),this.model.set("body",t)},addClassesToArticle:function(e){e.hasOwnProperty("_classes")&&this.$el.parents(".article").addClass(e._classes)},getFeedbackBand:function(){for(var e=this.model.get("_state"),t=e.isPercentageBased?"scoreAsPercent":"score",i=_.sortBy(this.model.get("_bands"),"_score"),s=i.length-1;s>=0;s--)if(e[t]>=i[s]._score)return i[s];return""},checkRetryEnabled:function(){var e=this.model.get("_state"),t=i.assessment.get(e.id);if(!t.canResetInPage())return!1;var s=e.feedbackBand._allowRetry!==!1,n=e.attemptsLeft>0||"infinite"===e.attemptsLeft,o=s&&n;if(this.model.set("_isRetryEnabled",o),o){var r=this.model.get("_retry").feedback;r=this.stringReplace(r,e),this.model.set("retryFeedback",r)}else this.model.set("retryFeedback","")},stringReplace:function(e,t){for(var i=!0;i;){i=!1;for(var s in t){var n=t[s];switch(typeof n){case"object":continue;case"number":n=Math.floor(n)}var o=new RegExp("((\\{\\{\\{){1}[\\ ]*"+s+"[\\ ]*(\\}\\}\\}){1})","g"),r=new RegExp("((\\{\\{){1}[\\ ]*"+s+"[\\ ]*(\\}\\}){1})","g"),a=e;e=e.replace(o,n);var l=$("<p>").text(n).html();e=e.replace(r,l),e!=a&&(i=!0)}}return e},onRemove:function(){this.model.unsetLocking&&this.model.unsetLocking("_isVisible"),this.removeEventListeners()}},{template:"assessmentResults"});return i.register("assessmentResults",s),s}),define("components/adapt-contrib-blank/js/adapt-contrib-blank",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({preRender:function(){this.$el.addClass("no-state"),this.checkIfResetOnRevisit()},postRender:function(){this.setReadyStatus(),this.$(".component-inner").on("inview",_.bind(this.inview,this))},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&this.model.reset(e)},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(".component-inner").off("inview"),this.setCompletionStatus()))}});return i.register("blank",s),s}),define("components/adapt-contrib-mcq/js/adapt-contrib-mcq",["require","coreViews/questionView","coreJS/adapt"],function(e){var t=e("coreViews/questionView"),i=e("coreJS/adapt"),s=t.extend({events:{"focus .mcq-item input":"onItemFocus","blur .mcq-item input":"onItemBlur","change .mcq-item input":"onItemSelected","keyup .mcq-item input":"onKeyPress"},resetQuestionOnRevisit:function(){this.setAllItemsEnabled(!0),this.resetQuestion()},setupQuestion:function(){this.model.set("_isRadio",1==this.model.get("_selectable")),this.model.set("_selectedItems",[]),this.setupQuestionItemIndexes(),this.setupRandomisation(),this.restoreUserAnswers()},setupQuestionItemIndexes:function(){var e=this.model.get("_items");if(e&&e.length>0)for(var t=0,i=e.length;t<i;t++)void 0===e[t]._index&&(e[t]._index=t)},setupRandomisation:function(){this.model.get("_isRandom")&&this.model.get("_isEnabled")&&this.model.set("_items",_.shuffle(this.model.get("_items")))},restoreUserAnswers:function(){if(this.model.get("_isSubmitted")){var e=[],t=this.model.get("_items"),i=this.model.get("_userAnswer");_.each(t,function(t,s){t._isSelected=i[t._index],t._isSelected&&e.push(t)}),this.model.set("_selectedItems",e),this.setQuestionAsSubmitted(),this.markQuestion(),this.setScore(),this.showMarking(),this.setupFeedback()}},disableQuestion:function(){this.setAllItemsEnabled(!1)},enableQuestion:function(){this.setAllItemsEnabled(!0)},setAllItemsEnabled:function(e){_.each(this.model.get("_items"),function(t,i){var s=this.$("label").eq(i),n=this.$("input").eq(i);e?(s.removeClass("disabled"),n.prop("disabled",!1)):(s.addClass("disabled"),n.prop("disabled",!0))},this)},onQuestionRendered:function(){this.setReadyStatus()},onKeyPress:function(e){13===e.which&&this.onItemSelected(e)},onItemFocus:function(e){this.model.get("_isEnabled")&&!this.model.get("_isSubmitted")&&$("label[for='"+$(e.currentTarget).attr("id")+"']").addClass("highlighted")},onItemBlur:function(e){$("label[for='"+$(e.currentTarget).attr("id")+"']").removeClass("highlighted")},onItemSelected:function(e){if(this.model.get("_isEnabled")&&!this.model.get("_isSubmitted")){var t=this.model.get("_items")[$(e.currentTarget).parent(".component-item").index()];this.toggleItemSelected(t,e)}},toggleItemSelected:function(e,t){var i=this.model.get("_selectedItems"),s=_.indexOf(this.model.get("_items"),e),n=this.$("label").eq(s),o=this.$("input").eq(s),r=!n.hasClass("selected");if(r){if(1===this.model.get("_selectable"))this.$("label").removeClass("selected"),this.$("input").prop("checked",!1),this.deselectAllItems(),i[0]=e;else{if(!(i.length<this.model.get("_selectable")))return void t.preventDefault();i.push(e)}n.addClass("selected"),n.a11y_selected(!0)}else i.splice(_.indexOf(i,e),1),n.removeClass("selected"),n.a11y_selected(!1);o.prop("checked",r),e._isSelected=r,this.model.set("_selectedItems",i)},canSubmit:function(){var e=0;return _.each(this.model.get("_items"),function(t){t._isSelected&&e++},this),e>0},onCannotSubmit:function(){},storeUserAnswer:function(){var e=[],t=this.model.get("_items").slice(0);t.sort(function(e,t){return e._index-t._index}),_.each(t,function(t,i){e.push(t._isSelected)},this),this.model.set("_userAnswer",e)},isCorrect:function(){var e=0,t=0,i=0;_.each(this.model.get("_items"),function(s,n){var o=s._isSelected||!1;s._shouldBeSelected?(e++,o&&(t++,s._isCorrect=!0,this.model.set("_isAtLeastOneCorrectSelection",!0))):!s._shouldBeSelected&&o&&i++},this),this.model.set("_numberOfCorrectAnswers",t),this.model.set("_numberOfRequiredAnswers",e);var s=t===e&&0===i;return s},setScore:function(){var e=this.model.get("_questionWeight"),t=this.model.get("_isCorrect"),i=t?e:0;this.model.set("_score",i)},setupFeedback:function(){if(this.model.get("_isCorrect"))this.setupCorrectFeedback();else if(this.isPartlyCorrect())this.setupPartlyCorrectFeedback();else{if(1===this.model.get("_selectable")&&this.model.get("_selectedItems")[0].feedback)return void this.setupIndividualFeedback(this.model.get("_selectedItems")[0]);this.setupIncorrectFeedback()}},setupIndividualFeedback:function(e){this.model.set({feedbackTitle:this.model.get("title"),feedbackMessage:e.feedback})},showMarking:function(){this.model.get("_canShowMarking")&&_.each(this.model.get("_items"),function(e,t){var i=this.$(".component-item").eq(t);i.removeClass("correct incorrect").addClass(e._isCorrect?"correct":"incorrect")},this)},isPartlyCorrect:function(){return this.model.get("_isAtLeastOneCorrectSelection")},resetUserAnswer:function(){this.model.set({_userAnswer:[]})},resetQuestion:function(){this.deselectAllItems(),this.resetItems()},deselectAllItems:function(){this.$el.a11y_selected(!1),_.each(this.model.get("_items"),function(e){e._isSelected=!1},this)},resetItems:function(){this.$(".component-item label").removeClass("selected"),this.$(".component-item").removeClass("correct incorrect"),this.$("input").prop("checked",!1),this.model.set({_selectedItems:[],_isAtLeastOneCorrectSelection:!1})},showCorrectAnswer:function(){_.each(this.model.get("_items"),function(e,t){this.setOptionSelected(t,e._shouldBeSelected)},this)},setOptionSelected:function(e,t){var i=this.$("label").eq(e),s=this.$("input").eq(e);t?(i.addClass("selected"),s.prop("checked",!0)):(i.removeClass("selected"),s.prop("checked",!1))},hideCorrectAnswer:function(){_.each(this.model.get("_items"),function(e,t){this.setOptionSelected(t,this.model.get("_userAnswer")[e._index])},this)},getResponse:function(){for(var e=_.where(this.model.get("_items"),{_isSelected:!0}),t=_.pluck(e,"_index"),i=0,s=t.length;i<s;i++)t[i]++;return t.join(",")},getResponseType:function(){return"choice"}});return i.register("mcq",s),s}),define("components/adapt-contrib-gmcq/js/adapt-contrib-gmcq",["require","components/adapt-contrib-mcq/js/adapt-contrib-mcq","coreJS/adapt"],function(e){var t=e("components/adapt-contrib-mcq/js/adapt-contrib-mcq"),i=e("coreJS/adapt"),s=t.extend({events:function(){var e={"focus .gmcq-item input":"onItemFocus","blur .gmcq-item input":"onItemBlur","change .gmcq-item input":"onItemSelected","keyup .gmcq-item input":"onKeyPress"};if($("html").hasClass("ie8")){var t={"click label img":"forceChangeEvent"};e=_.extend(e,t)}return e},onItemSelected:function(e){var t=this.model.get("_items")[$(e.currentTarget).parent(".gmcq-item").index()];this.model.get("_isEnabled")&&!this.model.get("_isSubmitted")&&this.toggleItemSelected(t,e)},setupQuestion:function(){this.model.set("_isRadio",1==this.model.get("_selectable")),this.model.set("_selectedItems",[]),this.setupQuestionItemIndexes(),this.setupRandomisation(),this.restoreUserAnswers(),this.listenTo(i,{"device:changed":this.resizeImage,"device:resize":this.onDeviceResize})},onQuestionRendered:function(){this.resizeImage(i.device.screenSize),this.setUpColumns(),this.$("label").imageready(_.bind(function(){this.setReadyStatus()},this))},onDeviceResize:function(){this.setUpColumns()},resizeImage:function(e){var t="medium"===e?"small":e;this.$("label").each(function(e){var i=$(this).find("img").attr("data-"+t);$(this).find("img").attr("src",i)})},setUpColumns:function(){var e=this.model.get("_columns");e&&("large"===i.device.screenSize?(this.$el.addClass("gmcq-column-layout"),this.$(".gmcq-item").css("width",100/e+"%")):(this.$el.removeClass("gmcq-column-layout"),this.$(".gmcq-item").css("width","")))},forceChangeEvent:function(e){$("#"+$(e.currentTarget).closest("label").attr("for")).change()}},{template:"gmcq"});return i.register("gmcq",s),s}),define("components/adapt-contrib-graphic/js/adapt-contrib-graphic",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({preRender:function(){this.listenTo(i,"device:changed",this.resizeImage),this.checkIfResetOnRevisit()},postRender:function(){this.resizeImage(i.device.screenSize,!0)},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&this.model.reset(e)},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(".component-widget").off("inview"),this.setCompletionStatus()))},remove:function(){this.$(".component-widget").off("inview"),t.prototype.remove.apply(this,arguments)},resizeImage:function(e,t){var i="medium"===e?"small":e,s=this.model.get("_graphic")?this.model.get("_graphic")[i]:"";this.$(".graphic-widget img").attr("src",s),this.$(".graphic-widget").imageready(_.bind(function(){this.setReadyStatus(),t&&this.$(".component-widget").on("inview",_.bind(this.inview,this))},this))}});return i.register("graphic",s),s}),define("components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({isPopupOpen:!1,initialize:function(){this.listenTo(i,"remove",this.remove),this.listenTo(this.model,"change:_isVisible",this.toggleVisibility),this.listenTo(i,"accessibility:toggle",this.onAccessibilityToggle),this.model.set("_globals",i.course.get("_globals")),_.bindAll(this,"onKeyUp"),this.preRender(),void 0===this.model.get("_canCycleThroughPagination")&&this.model.set("_canCycleThroughPagination",!1),"large"==i.device.screenSize?this.render():this.reRender()},events:function(){return{"click .hotgraphic-graphic-pin":"onPinClicked","click .hotgraphic-popup-done":"closePopup","click .hotgraphic-popup-nav .back":"previousHotGraphic","click .hotgraphic-popup-nav .next":"nextHotGraphic"}},preRender:function(){this.listenTo(i,"device:changed",this.reRender,this),this.checkIfResetOnRevisit()},postRender:function(){this.renderState(),this.$(".hotgraphic-widget").imageready(_.bind(function(){this.setReadyStatus()},this)),this.setupEventListeners()},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&(this.model.reset(e),_.each(this.model.get("_items"),function(e){e._isVisited=!1}))},reRender:function(){"large"!=i.device.screenSize&&this.replaceWithNarrative()},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(".component-inner").off("inview"),this.setCompletionStatus()))},replaceWithNarrative:function(){if(!i.componentStore.narrative)throw"Narrative not included in build";var e=i.componentStore.narrative,t=this.prepareNarrativeModel(),s=new e({model:t}),n=$(".component-container",$("."+this.model.get("_parentId")));s.reRender(),s.setupNarrative(),n.append(s.$el),i.trigger("device:resize"),_.defer(_.bind(function(){this.remove()},this))},prepareNarrativeModel:function(){var e=this.model;return e.set("_component","narrative"),e.set("_wasHotgraphic",!0),e.set("originalBody",e.get("body")),e.set("originalInstruction",e.get("instruction")),e.get("mobileBody")&&e.set("body",e.get("mobileBody")),e.get("mobileInstruction")&&e.set("instruction",e.get("mobileInstruction")),e},applyNavigationClasses:function(e){var t=this.$(".hotgraphic-popup-nav"),i=this.$(".hotgraphic-item").length;t.removeClass("first").removeClass("last"),this.$(".hotgraphic-popup-done").a11y_cntrl_enabled(!0),e<=0&&!this.model.get("_canCycleThroughPagination")?(this.$(".hotgraphic-popup-nav").addClass("first"),this.$(".hotgraphic-popup-controls.back").a11y_cntrl_enabled(!1),this.$(".hotgraphic-popup-controls.next").a11y_cntrl_enabled(!0)):e>=i-1&&!this.model.get("_canCycleThroughPagination")?(this.$(".hotgraphic-popup-nav").addClass("last"),this.$(".hotgraphic-popup-controls.back").a11y_cntrl_enabled(!0),this.$(".hotgraphic-popup-controls.next").a11y_cntrl_enabled(!1)):(this.$(".hotgraphic-popup-controls.back").a11y_cntrl_enabled(!0),this.$(".hotgraphic-popup-controls.next").a11y_cntrl_enabled(!0));var s=this.model.get("_items")[e]._classes?this.model.get("_items")[e]._classes:"";this.$(".hotgraphic-popup").attr("class","hotgraphic-popup item-"+e+" "+s)},onPinClicked:function(e){e&&e.preventDefault(),this.$(".hotgraphic-popup-inner").a11y_on(!1),this.$(".hotgraphic-item").hide().removeClass("active");var t=this.$("."+$(e.currentTarget).data("id"));t.show().addClass("active");var i=this.$(".hotgraphic-item.active").index();this.setVisited(i),this.openPopup(),this.applyNavigationClasses(i)},openPopup:function(){var e=this.$(".hotgraphic-item.active").index();this.$(".hotgraphic-popup-count .current").html(e+1),this.$(".hotgraphic-popup-count .total").html(this.$(".hotgraphic-item").length),this.$(".hotgraphic-popup").attr("class","hotgraphic-popup item-"+e).show(),this.$(".hotgraphic-popup-inner .active").a11y_on(!0),this.isPopupOpen=!0,i.trigger("popup:opened",this.$(".hotgraphic-popup-inner")),this.$(".hotgraphic-popup-inner .active").a11y_focus(),this.setupEscapeKey()},closePopup:function(e){e&&e.preventDefault(),this.$(".hotgraphic-popup").hide(),this.isPopupOpen=!1,i.trigger("popup:closed",this.$(".hotgraphic-popup-inner"))},previousHotGraphic:function(e){e.preventDefault();var t=this.$(".hotgraphic-item.active").index();(0!==t||this.model.get("_canCycleThroughPagination"))&&(0===t&&this.model.get("_canCycleThroughPagination")&&(t=this.model.get("_items").length),this.$(".hotgraphic-item.active").hide().removeClass("active"),this.$(".hotgraphic-item").eq(t-1).show().addClass("active"),this.setVisited(t-1),this.$(".hotgraphic-popup-count .current").html(t),this.$(".hotgraphic-popup-inner").a11y_on(!1),this.applyNavigationClasses(t-1),this.$(".hotgraphic-popup-inner .active").a11y_on(!0),this.$(".hotgraphic-popup-inner .active").a11y_focus())},nextHotGraphic:function(e){e.preventDefault();var t=this.$(".hotgraphic-item.active").index();(t!==this.model.get("_items").length-1||this.model.get("_canCycleThroughPagination"))&&(t===this.model.get("_items").length-1&&this.model.get("_canCycleThroughPagination")&&(t=-1),this.$(".hotgraphic-item.active").hide().removeClass("active"),this.$(".hotgraphic-item").eq(t+1).show().addClass("active"),this.setVisited(t+1),this.$(".hotgraphic-popup-count .current").html(t+2),this.$(".hotgraphic-popup-inner").a11y_on(!1),this.applyNavigationClasses(t+1),this.$(".hotgraphic-popup-inner .active").a11y_on(!0),this.$(".hotgraphic-popup-inner .active").a11y_focus())},setVisited:function(e){var t=this.model.get("_items")[e];t._isVisited=!0;var i=this.$(".hotgraphic-graphic-pin").eq(e);i.addClass("visited");var s=this.model.get("_globals")._accessibility._ariaLabels.visited+".";i.attr("aria-label",function(e,t){return t+" "+s}),$.a11y_alert("visited"),this.checkCompletionStatus()},getVisitedItems:function(){return _.filter(this.model.get("_items"),function(e){return e._isVisited})},checkCompletionStatus:function(){this.getVisitedItems().length==this.model.get("_items").length&&this.trigger("allItems")},onCompletion:function(){this.setCompletionStatus(),this.completionEvent&&"inview"!=this.completionEvent&&this.off(this.completionEvent,this)},setupEventListeners:function(){this.completionEvent=this.model.get("_setCompletionOn")?this.model.get("_setCompletionOn"):"allItems","inview"!==this.completionEvent?this.on(this.completionEvent,_.bind(this.onCompletion,this)):this.$(".component-widget").on("inview",_.bind(this.inview,this))},setupEscapeKey:function(){var e=i.config.has("_accessibility")&&i.config.get("_accessibility")._isActive;!e&&this.isPopupOpen?$(window).on("keyup",this.onKeyUp):$(window).off("keyup",this.onKeyUp)},onAccessibilityToggle:function(){this.setupEscapeKey()},onKeyUp:function(e){27==e.which&&(e.preventDefault(),this.closePopup())}});return i.register("hotgraphic",s),s}),define("components/adapt-contrib-matching/js/adapt-contrib-matching",["require","coreViews/questionView","coreJS/adapt"],function(e){var t=e("coreViews/questionView"),i=e("coreJS/adapt"),s=t.extend({disableQuestion:function(){this.$(".matching-select").prop("disabled",!0)},enableQuestion:function(){this.$(".matching-select").prop("disabled",!1)},resetQuestionOnRevisit:function(){this.resetQuestion()},setupQuestion:function(){this.setupItemIndexes(),this.restoreUserAnswers(),this.setupRandomisation()},setupItemIndexes:function(){_.each(this.model.get("_items"),function(e,t){void 0==e._index&&(e._index=t,e._selected=!1),_.each(e._options,function(e,t){void 0==e._index&&(e._index=t,e._isSelected=!1)})})},restoreUserAnswers:function(){if(this.model.get("_isSubmitted")){var e=this.model.get("_userAnswer");_.each(this.model.get("_items"),function(t,i){_.each(t._options,function(i,s){i._index==e[t._index]&&(i._isSelected=!0,t._selected=i)})}),this.setQuestionAsSubmitted(),this.markQuestion(),this.setScore(),this.showMarking(),this.setupFeedback()}},setupRandomisation:function(){this.model.get("_isRandom")&&this.model.get("_isEnabled")&&_.each(this.model.get("_items"),function(e){e._options=_.shuffle(e._options)})},onQuestionRendered:function(){this.setReadyStatus()},canSubmit:function(){var e=!0;return $(".matching-select option:selected",this.el).each(_.bind(function(t,i){var s=$(i);0==s.index()&&(e=!1,s.parent(".matching-select").addClass("error"))},this)),e},onCannotSubmit:function(){},storeUserAnswer:function(){var e=new Array(this.model.get("_items").length),t=new Array(this.model.get("_items").length);_.each(this.model.get("_items"),function(i,s){var n=this.$(".matching-select option:selected").eq(s),o=n.index()-1;i._options[o]._isSelected=!0,i._selected=i._options[o],t[i._index]=o,e[i._index]=i._options[o]._index},this),this.model.set("_userAnswer",e),this.model.set("_tempUserAnswer",t)},isCorrect:function(){var e=0;return _.each(this.model.get("_items"),function(t,i){t._selected&&t._selected._isCorrect?(e++,t._isCorrect=!0,this.model.set("_numberOfCorrectAnswers",e),this.model.set("_isAtLeastOneCorrectSelection",!0)):t._isCorrect=!1},this),this.model.set("_numberOfCorrectAnswers",e),e===this.model.get("_items").length},setScore:function(){var e=this.model.get("_questionWeight");if(this.model.get("_isCorrect"))return void this.model.set("_score",e);var t=this.model.get("_numberOfCorrectAnswers"),i=this.model.get("_items").length,s=e*t/i;this.model.set("_score",s)},showMarking:function(){_.each(this.model.get("_items"),function(e,t){var i=this.$(".matching-item").eq(t);i.removeClass("correct incorrect").addClass(e._isCorrect?"correct":"incorrect")},this)},isPartlyCorrect:function(){return this.model.get("_isAtLeastOneCorrectSelection")},resetUserAnswer:function(){this.model.set({_userAnswer:[]})},resetQuestion:function(){this.$(".matching-select option").prop("selected",!1),this.$(".matching-item").removeClass("correct").removeClass("incorrect"),this.model.set("_isAtLeastOneCorrectSelection",!1),_.each(this.$(".matching-select"),function(e){this.selectOption($(e),0)},this),_.each(this.model.get("_items"),function(e,t){_.each(e._options,function(e,t){e._isSelected=!1})})},showCorrectAnswer:function(){_.each(this.model.get("_items"),function(e,t){var i;_.each(e._options,function(e,t){e._isCorrect&&(i=t+1)},this);var s=this.$(".matching-select").eq(t);this.selectOption(s,i)},this)},hideCorrectAnswer:function(){for(var e=0,t=this.model.get("_items").length;e<t;e++){var i=this.$(".matching-select").eq(e),s=this.model.has("_tempUserAnswer")?this.model.get("_tempUserAnswer")[e]+1:this.model.get("_userAnswer")[e]+1;$("option",i).eq(s).prop("selected",!0),this.selectOption(i,s)}},selectOption:function(e,t){$("option",e).eq(t).prop("selected",!0)},getResponse:function(){for(var e=this.model.get("_userAnswer"),t=[],i=0,s=e.length;i<s;i++)t.push(i+1+"."+(e[i]+1));return t.join("#")},getResponseType:function(){return"matching"}});return i.register("matching",s),s});var mejs=mejs||{};mejs.version="2.21.2",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/dailymotion","video/x-dailymotion","application/x-mpegURL"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,i,s,n,o,r,a=0,l="",c="",d=document.getElementsByTagName("script"),u=d.length,h=e.length;a<u;a++){for(n=d[a].src,i=n.lastIndexOf("/"),i>-1?(r=n.substring(i+1),o=n.substring(0,i+1)):(r=n,o=""),t=0;t<h;t++)if(c=e[t],s=r.indexOf(c),s>-1){l=o;break}if(""!==l)break}return l},calculateTimeFormat:function(e,t,i){e<0&&(e=0),"undefined"==typeof i&&(i=25);var s=t.timeFormat,n=s[0],o=s[1]==s[0],r=o?2:1,a=":",l=Math.floor(e/3600)%24,c=Math.floor(e/60)%60,d=Math.floor(e%60),u=Math.floor((e%1*i).toFixed(3)),h=[[u,"f"],[d,"s"],[c,"m"],[l,"h"]];s.length<r&&(a=s[r]);for(var p=!1,m=0,f=h.length;m<f;m++)if(s.indexOf(h[m][1])!==-1)p=!0;else if(p){for(var g=!1,v=m;v<f;v++)if(h[v][0]>0){g=!0;break}if(!g)break;o||(s=n+s),s=h[m][1]+a+s,o&&(s=h[m][1]+s),n=h[m][1]}t.currentTimeFormat=s},twoDigitsString:function(e){return e<10?"0"+e:String(e)},secondsToTimeCode:function(e,t){if(e<0&&(e=0),"object"!=typeof t){var s="m:ss";s=arguments[1]?"hh:mm:ss":s,s=arguments[2]?s+":ff":s,t={currentTimeFormat:s,framesPerSecond:arguments[3]||25}}var n=t.framesPerSecond;"undefined"==typeof n&&(n=25);var s=t.currentTimeFormat,o=Math.floor(e/3600)%24,r=Math.floor(e/60)%60,a=Math.floor(e%60),l=Math.floor((e%1*n).toFixed(3));lis=[[l,"f"],[a,"s"],[r,"m"],[o,"h"]];var c=s;for(i=0,len=lis.length;i<len;i++)c=c.replace(lis[i][1]+lis[i][1],this.twoDigitsString(lis[i][0])),c=c.replace(lis[i][1],lis[i][0]);return c},timeCodeToSeconds:function(e,t,i,s){"undefined"==typeof i?i=!1:"undefined"==typeof s&&(s=25);var n=e.split(":"),o=parseInt(n[0],10),r=parseInt(n[1],10),a=parseInt(n[2],10),l=0,c=0;return i&&(l=parseInt(n[3])/s),c=3600*o+60*r+a+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=e.indexOf(".")!=-1?e.split(".")[1].length:0,s=1;e=e.split(":").reverse();for(var n=0;n<e.length;n++)s=1,n>0&&(s=Math.pow(60,n)),t+=Number(e[n])*s;return Number(t.toFixed(i))},removeSwf:function(e){var t=document.getElementById(e);t&&/object|embed/i.test(t.nodeName)&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}},determineScheme:function(e){return e&&e.indexOf("://")!=-1?e.substr(0,e.indexOf("://")+3):"//"}},mejs.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,s,n){this.plugins[e]=this.detectPlugin(t,i,s,n)},detectPlugin:function(e,t,i,s){var n,o,r,a=[0,0,0];
if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if(n=this.nav.plugins[e].description,n&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(a=n.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),o=0;o<a.length;o++)a[o]=parseInt(a[o].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{r=new ActiveXObject(i),r&&(a=s(r))}catch(e){}return a}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],i=e.GetVariable("$version");return i&&(i=i.split(" ")[1].split(","),t=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,s){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=s;t[i]-=s};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t,i=this,s=document,n=mejs.PluginDetector.nav,o=mejs.PluginDetector.ua.toLowerCase(),r=["source","track","audio","video"];i.isiPad=null!==o.match(/ipad/i),i.isiPhone=null!==o.match(/iphone/i),i.isiOS=i.isiPhone||i.isiPad,i.isAndroid=null!==o.match(/android/i),i.isBustedAndroid=null!==o.match(/android 2\.[12]/),i.isBustedNativeHTTPS="https:"===location.protocol&&(null!==o.match(/android [12]\./)||null!==o.match(/macintosh.* version.* safari/)),i.isIE=n.appName.toLowerCase().indexOf("microsoft")!=-1||null!==n.appName.toLowerCase().match(/trident/gi),i.isChrome=null!==o.match(/chrome/gi),i.isChromium=null!==o.match(/chromium/gi),i.isFirefox=null!==o.match(/firefox/gi),i.isWebkit=null!==o.match(/webkit/gi),i.isGecko=null!==o.match(/gecko/gi)&&!i.isWebkit&&!i.isIE,i.isOpera=null!==o.match(/opera/gi),i.hasTouch="ontouchstart"in window,i.svgAsImg=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");for(e=0;e<r.length;e++)t=document.createElement(r[e]);i.supportsMediaTag="undefined"!=typeof t.canPlayType||i.isBustedAndroid;try{t.canPlayType("video/mp4")}catch(e){i.supportsMediaTag=!1}i.supportsPointerEvents=function(){var e,t=document.createElement("x"),i=document.documentElement,s=window.getComputedStyle;return"pointerEvents"in t.style&&(t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t),e=s&&"auto"===s(t,"").pointerEvents,i.removeChild(t),!!e)}(),i.hasFirefoxPluginMovingProblem=!1,i.hasiOSFullScreen="undefined"!=typeof t.webkitEnterFullscreen,i.hasNativeFullscreen="undefined"!=typeof t.requestFullscreen,i.hasWebkitNativeFullScreen="undefined"!=typeof t.webkitRequestFullScreen,i.hasMozNativeFullScreen="undefined"!=typeof t.mozRequestFullScreen,i.hasMsNativeFullScreen="undefined"!=typeof t.msRequestFullscreen,i.hasTrueNativeFullScreen=i.hasWebkitNativeFullScreen||i.hasMozNativeFullScreen||i.hasMsNativeFullScreen,i.nativeFullScreenEnabled=i.hasTrueNativeFullScreen,i.hasMozNativeFullScreen?i.nativeFullScreenEnabled=document.mozFullScreenEnabled:i.hasMsNativeFullScreen&&(i.nativeFullScreenEnabled=document.msFullscreenEnabled),i.isChrome&&(i.hasiOSFullScreen=!1),i.hasTrueNativeFullScreen&&(i.fullScreenEventName="",i.hasWebkitNativeFullScreen?i.fullScreenEventName="webkitfullscreenchange":i.hasMozNativeFullScreen?i.fullScreenEventName="mozfullscreenchange":i.hasMsNativeFullScreen&&(i.fullScreenEventName="MSFullscreenChange"),i.isFullScreen=function(){return i.hasMozNativeFullScreen?s.mozFullScreen:i.hasWebkitNativeFullScreen?s.webkitIsFullScreen:i.hasMsNativeFullScreen?null!==s.msFullscreenElement:void 0},i.requestFullScreen=function(e){i.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():i.hasMozNativeFullScreen?e.mozRequestFullScreen():i.hasMsNativeFullScreen&&e.msRequestFullscreen()},i.cancelFullScreen=function(){i.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():i.hasMozNativeFullScreen?document.mozCancelFullScreen():i.hasMsNativeFullScreen&&document.msExitFullscreen()}),i.hasiOSFullScreen&&o.match(/mac os x 10_5/i)&&(i.hasNativeFullScreen=!1,i.hasiOSFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i,s;for(i=0;i<e.length;i++)if(s=e[i],this.canPlayType(s.type)){this.src=s.src;break}}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,i,s,n=mejs.plugins[this.pluginType];for(t=0;t<n.length;t++)if(s=n[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,s.version))for(i=0;i<s.types.length;i++)if(e==s.types[i])return"probably";return""},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(e),Math.floor(t),i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,i;for(t=0;t<e.length;t++)if(i=e[t],this.canPlayType(i.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(i.src);break}}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent({type:"volumechange"})):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t,i){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var i=this.events[e];if(!i)return!0;if(!t)return this.events[e]=[],!0;for(var s=0;s<i.length;s++)if(i[s]===t)return this.events[e].splice(s,1),!0;return!1},dispatchEvent:function(e){var t,i=this.events[e.type];if(i)for(t=0;t<i.length;t++)i[t].apply(this,[e])},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",flashScriptAccess:"sameDomain",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var i,s,n={},o="string"==typeof e?document.getElementById(e):e,r=o.tagName.toLowerCase(),a="audio"===r||"video"===r,l=a?o.getAttribute("src"):o.getAttribute("href"),c=o.getAttribute("poster"),d=o.getAttribute("autoplay"),u=o.getAttribute("preload"),h=o.getAttribute("controls");for(s in mejs.MediaElementDefaults)n[s]=mejs.MediaElementDefaults[s];for(s in t)n[s]=t[s];return l="undefined"==typeof l||null===l||""==l?null:l,c="undefined"==typeof c||null===c?"":c,u="undefined"==typeof u||null===u||"false"===u?"none":u,d=!("undefined"==typeof d||null===d||"false"===d),h=!("undefined"==typeof h||null===h||"false"===h),i=this.determinePlayback(o,n,mejs.MediaFeatures.supportsMediaTag,a,l),i.url=null!==i.url?mejs.Utility.absolutizeUrl(i.url):"",i.scheme=mejs.Utility.determineScheme(i.url),"native"==i.method?(mejs.MediaFeatures.isBustedAndroid&&(o.src=i.url,o.addEventListener("click",function(){o.play()},!1)),this.updateNative(i,n,d,u)):""!==i.method?this.createPlugin(i,n,c,d,u,h):(this.createErrorMessage(i,n,c),this)},determinePlayback:function(e,t,i,s,n){var o,r,a,l,c,d,u,h,p,m,f,g=[],v={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase(),scheme:""};if("undefined"!=typeof t.type&&""!==t.type)if("string"==typeof t.type)g.push({type:t.type,url:n});else for(o=0;o<t.type.length;o++)g.push({type:t.type[o],url:n});else if(null!==n)d=this.formatType(n,e.getAttribute("type")),g.push({type:d,url:n});else for(o=0;o<e.childNodes.length;o++)c=e.childNodes[o],1==c.nodeType&&"source"==c.tagName.toLowerCase()&&(n=c.getAttribute("src"),d=this.formatType(n,c.getAttribute("type")),f=c.getAttribute("media"),(!f||!window.matchMedia||window.matchMedia&&window.matchMedia(f).matches)&&g.push({type:d,url:n}));if(!s&&g.length>0&&null!==g[0].url&&this.getTypeFromFile(g[0].url).indexOf("audio")>-1&&(v.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),mejs.MediaFeatures.isChromium&&(e.canPlayType=function(e){return null!==e.match(/video\/(webm|ogv|ogg)/gi)?"maybe":""}),i&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)&&(!mejs.MediaFeatures.isBustedNativeHTTPS||t.httpsBasicAuthSite!==!0)){for(s||(m=document.createElement(v.isVideo?"video":"audio"),e.parentNode.insertBefore(m,e),e.style.display="none",v.htmlMediaElement=e=m),o=0;o<g.length;o++)if("video/m3u8"==g[o].type||""!==e.canPlayType(g[o].type).replace(/no/,"")||""!==e.canPlayType(g[o].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==e.canPlayType(g[o].type.replace(/m4a/,"mp4")).replace(/no/,"")){v.method="native",v.url=g[o].url;break}if("native"===v.method&&(null!==v.url&&(e.src=v.url),"auto_plugin"!==t.mode))return v}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(o=0;o<g.length;o++)for(d=g[o].type,r=0;r<t.plugins.length;r++)for(u=t.plugins[r],h=mejs.plugins[u],a=0;a<h.length;a++)if(p=h[a],null==p.version||mejs.PluginDetector.hasPluginVersion(u,p.version))for(l=0;l<p.types.length;l++)if(d.toLowerCase()==p.types[l].toLowerCase())return v.method=u,v.url=g[o].url,v;return"auto_plugin"===t.mode&&"native"===v.method?v:(""===v.method&&g.length>0&&(v.url=g[0].url),v)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){e=e.split("?")[0];var t=e.substring(e.lastIndexOf(".")+1).toLowerCase(),i=/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video/":"audio/";return this.getTypeFromExtension(t,i)},getTypeFromExtension:function(e,t){switch(t=t||"",e){case"mp4":case"m4v":case"m4a":case"f4v":case"f4a":return t+"mp4";case"flv":return t+"x-flv";case"webm":case"webma":case"webmv":return t+"webm";case"ogg":case"oga":case"ogv":return t+"ogg";case"m3u8":return"application/x-mpegurl";case"ts":return t+"mp2t";default:return t+e}},createErrorMessage:function(e,t,i){var s=e.htmlMediaElement,n=document.createElement("div"),o=t.customError;n.className="me-cannotplay";try{n.style.width=s.width+"px",n.style.height=s.height+"px"}catch(e){}o||(o='<a href="'+e.url+'">',""!==i&&(o+='<img src="'+i+'" width="100%" height="100%" alt="" />'),o+="<span>"+mejs.i18n.t("Download File")+"</span></a>"),n.innerHTML=o,s.parentNode.insertBefore(n,s),s.style.display="none",t.error(s)},createPlugin:function(e,t,i,s,n,o){var r,a,l,c=e.htmlMediaElement,d=1,u=1,h="me_"+e.method+"_"+mejs.meIndex++,p=new mejs.PluginMediaElement(h,e.method,e.url),m=document.createElement("div");p.tagName=c.tagName;for(var f=0;f<c.attributes.length;f++){var g=c.attributes[f];g.specified&&p.setAttribute(g.name,g.value)}for(a=c.parentNode;null!==a&&null!=a.tagName&&"body"!==a.tagName.toLowerCase()&&null!=a.parentNode&&null!=a.parentNode.tagName&&null!=a.parentNode.constructor&&"ShadowRoot"===a.parentNode.constructor.name;){if("p"===a.parentNode.tagName.toLowerCase()){a.parentNode.parentNode.insertBefore(a,a.parentNode);break}a=a.parentNode}switch(e.isVideo?(d=t.pluginWidth>0?t.pluginWidth:t.videoWidth>0?t.videoWidth:null!==c.getAttribute("width")?c.getAttribute("width"):t.defaultVideoWidth,u=t.pluginHeight>0?t.pluginHeight:t.videoHeight>0?t.videoHeight:null!==c.getAttribute("height")?c.getAttribute("height"):t.defaultVideoHeight,d=mejs.Utility.encodeUrl(d),u=mejs.Utility.encodeUrl(u)):t.enablePluginDebug&&(d=320,u=240),p.success=t.success,m.className="me-plugin",m.id=h+"_container",e.isVideo?c.parentNode.insertBefore(m,c):document.body.insertBefore(m,document.body.childNodes[0]),"flash"!==e.method&&"silverlight"!==e.method||(l=["id="+h,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(s?"true":"false"),"preload="+n,"width="+d,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+u,"pseudostreamstart="+t.pseudoStreamingStartQueryParam],null!==e.url&&("flash"==e.method?l.push("file="+mejs.Utility.encodeUrl(e.url)):l.push("file="+e.url)),t.enablePluginDebug&&l.push("debug=true"),t.enablePluginSmoothing&&l.push("smoothing=true"),t.enablePseudoStreaming&&l.push("pseudostreaming=true"),o&&l.push("controls=true"),t.pluginVars&&(l=l.concat(t.pluginVars)),window[h+"_init"]=function(){switch(p.pluginType){case"flash":p.pluginElement=p.pluginApi=document.getElementById(h);break;case"silverlight":p.pluginElement=document.getElementById(p.id),p.pluginApi=p.pluginElement.Content.MediaElementJS}null!=p.pluginApi&&p.success&&p.success(p,c)},window[h+"_event"]=function(e,t){var i,s,n;i={type:e,target:p};for(s in t)p[s]=t[s],i[s]=t[s];n=t.bufferedTime||0,i.target.buffered=i.buffered={start:function(e){return 0},end:function(e){return n},length:1},p.dispatchEvent(i)}),e.method){case"silverlight":m.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+h+'" name="'+h+'" width="'+d+'" height="'+u+'" class="mejs-shim"><param name="initParams" value="'+l.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(r=document.createElement("div"),m.appendChild(r),r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+h+'" width="'+d+'" height="'+u+'" class="mejs-shim"><param name="movie" value="'+t.pluginPath+t.flashName+"?"+(new Date).getTime()+'" /><param name="flashvars" value="'+l.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+t.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):m.innerHTML='<embed id="'+h+'" name="'+h+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="'+t.flashScriptAccess+'" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+l.join("&")+'" width="'+d+'" height="'+u+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var v;e.url.lastIndexOf("youtu.be")!=-1?(v=e.url.substr(e.url.lastIndexOf("/")+1),v.indexOf("?")!=-1&&(v=v.substr(0,v.indexOf("?")))):v=e.url.substr(e.url.lastIndexOf("=")+1),youtubeSettings={container:m,containerId:m.id,pluginMediaElement:p,pluginId:h,videoId:v,height:u,width:d,scheme:e.scheme},window.postMessage?mejs.YouTubeApi.enqueueIframe(youtubeSettings):mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])&&mejs.YouTubeApi.createFlash(youtubeSettings,t);break;case"vimeo":var b=h+"_player";if(p.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),m.innerHTML='<iframe src="'+e.scheme+"player.vimeo.com/video/"+p.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+b+'" width="'+d+'" height="'+u+'" frameborder="0" class="mejs-shim" id="'+b+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var _=$f(m.childNodes[0]),y=-1;_.addEvent("ready",function(){function e(e,t,i,s){var n={type:i,target:t};"timeupdate"==i&&(t.currentTime=n.currentTime=s.seconds,t.duration=n.duration=s.duration),t.dispatchEvent(n)}_.playVideo=function(){_.api("play")},_.stopVideo=function(){_.api("unload")},_.pauseVideo=function(){_.api("pause")},_.seekTo=function(e){_.api("seekTo",e)},_.setVolume=function(e){_.api("setVolume",e)},_.setMuted=function(e){e?(_.lastVolume=_.api("getVolume"),_.api("setVolume",0)):(_.api("setVolume",_.lastVolume),delete _.lastVolume)},_.getPlayerState=function(){return y},_.addEvent("play",function(){y=1,e(_,p,"play"),e(_,p,"playing")}),_.addEvent("pause",function(){y=2,e(_,p,"pause")}),_.addEvent("finish",function(){y=0,e(_,p,"ended")}),_.addEvent("playProgress",function(t){e(_,p,"timeupdate",t)}),_.addEvent("seek",function(t){y=3,e(_,p,"seeked",t)}),_.addEvent("loadProgress",function(t){y=3,e(_,p,"progress",t)}),p.pluginElement=m,p.pluginApi=_,p.success(p,p.pluginElement)})}else console.warn("You need to include froogaloop for vimeo to work")}return c.style.display="none",c.removeAttribute("autoplay"),p},updateNative:function(e,t,i,s){var n,o=e.htmlMediaElement;for(n in mejs.HtmlMediaElement)o[n]=mejs.HtmlMediaElement[n];return t.success(o,o),o}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(e){if(!this.isIframeStarted){var t=document.createElement("script");t.src=e.scheme+"www.youtube.com/player_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(e),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0,wmode:"transparent"},events:{onReady:function(){i.setVideoSize=function(e,t){i.setSize(e,t)},e.pluginMediaElement.pluginApi=i,e.pluginMediaElement.pluginElement=document.getElementById(e.containerId),t.success(t,t.pluginElement),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,i){var s={type:i,target:t};if(e&&e.getDuration){t.currentTime=s.currentTime=e.getCurrentTime(),t.duration=s.duration=e.getDuration(),s.paused=t.paused,s.ended=t.ended,s.muted=e.isMuted(),s.volume=e.getVolume()/100,s.bytesTotal=e.getVideoBytesTotal(),s.bufferedBytes=e.getVideoBytesLoaded();var n=s.bufferedBytes/s.bytesTotal*s.duration;s.target.buffered=s.buffered={start:function(e){return 0},end:function(e){return n},length:1}}t.dispatchEvent(s)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,i=e.scheme+"www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e.scheme+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim"><param name="movie" value="'+i+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+options.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+i+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="'+options.flashScriptAccess+'"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var t=this.flashPlayers[e],i=document.getElementById(e),s=t.pluginMediaElement;s.pluginApi=s.pluginElement=i,t.success(s,s.pluginElement),i.cueVideoById(t.videoId);var n=t.containerId+"_callback";window[n]=function(e){mejs.YouTubeApi.handleStateChange(e,i,s)},i.addEventListener("onStateChange",n),setInterval(function(){mejs.YouTubeApi.createEvent(i,s,"timeupdate")},250),mejs.YouTubeApi.createEvent(i,s,"canplay")},handleStateChange:function(e,t,i){switch(e){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"play"),mejs.YouTubeApi.createEvent(t,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,i,"progress");break;case 5:}}},window.onYouTubePlayerAPIReady=function(){mejs.YouTubeApi.iFrameReady()},window.onYouTubePlayerReady=function(e){mejs.YouTubeApi.flashReady(e)},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(e,t,i){"use strict";var s={locale:{language:t.i18n&&t.i18n.locale.language||"",strings:t.i18n&&t.i18n.locale.strings||{}},ietf_lang_regex:/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,methods:{}};s.getLanguage=function(){var e=s.locale.language||window.navigator.userLanguage||window.navigator.language;return s.ietf_lang_regex.exec(e)?e:null},"undefined"!=typeof mejsL10n&&(s.locale.language=mejsL10n.language),s.methods.checkPlain=function(e){var t,i,s={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e=String(e);for(t in s)s.hasOwnProperty(t)&&(i=new RegExp(t,"g"),e=e.replace(i,s[t]));return e},s.methods.t=function(e,t){return s.locale.strings&&s.locale.strings[t.context]&&s.locale.strings[t.context][e]&&(e=s.locale.strings[t.context][e]),s.methods.checkPlain(e)},s.t=function(e,t){if("string"==typeof e&&e.length>0){var i=s.getLanguage();return t=t||{context:i},s.methods.t(e,t)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},t.i18n=s}(document,mejs),function(e,t){"use strict";"undefined"!=typeof mejsL10n&&(e[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof Zepto?(mejs.$=Zepto,Zepto.fn.outerWidth=function(e){var t=$(this).width();return e&&(t+=parseInt($(this).css("margin-right"),10),t+=parseInt($(this).css("margin-left"),10)),t}):"undefined"!=typeof ender&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},setDimensions:!0,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.volume+.1,1);t.setVolume(i)}},{keys:[40],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.volume-.1,0);t.setVolume(i)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e,t){"undefined"!=typeof e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}},{keys:[77],action:function(e,t){e.container.find(".mejs-volume-slider").css("display","block"),e.isVideo&&(e.showControls(),e.startControlsTimer()),e.media.muted?e.setMuted(!1):e.setMuted(!0)}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(t,i){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(t,i);var s=this;return s.$media=s.$node=e(t),s.node=s.media=s.$media[0],s.node?"undefined"!=typeof s.node.player?s.node.player:("undefined"==typeof i&&(i=s.$node.data("mejsoptions")),s.options=e.extend({},mejs.MepDefaults,i),s.options.timeFormat||(s.options.timeFormat="mm:ss",s.options.alwaysShowHours&&(s.options.timeFormat="hh:mm:ss"),s.options.showTimecodeFrameCount&&(s.options.timeFormat+=":ff")),mejs.Utility.calculateTimeFormat(0,s.options,s.options.framesPerSecond||25),s.id="mep_"+mejs.mepIndex++,mejs.players[s.id]=s,s.init(),s):void 0},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,i=mejs.MediaFeatures,s=e.extend(!0,{},t.options,{success:function(e,i){t.meReady(e,i)},error:function(e){t.handleError(e)}}),n=t.media.tagName.toLowerCase();if(t.isDynamic="audio"!==n&&"video"!==n,t.isDynamic?t.isVideo=t.options.isVideo:t.isVideo="audio"!==n&&t.options.isVideo,i.isiPad&&t.options.iPadUseNativeControls||i.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),i.isiPad&&null!==t.media.getAttribute("autoplay")&&t.play();else if(i.isAndroid&&t.options.AndroidUseNativeControls);else{t.$media.removeAttr("controls");var o=t.isVideo?mejs.i18n.t("Video Player"):mejs.i18n.t("Audio Player");e('<span class="mejs-offscreen">'+o+"</span>").insertBefore(t.$media),t.container=e('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svgAsImg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+o+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){if(!t.controlsAreVisible){t.showControls(!0);var i=t.container.find(".mejs-playpause-button > button");i.focus()}}),t.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),t.container.find(".mejs-mediaelement").append(t.$media),t.node.player=t,t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var r=t.isVideo?"video":"audio",a=r.substring(0,1).toUpperCase()+r.substring(1);t.options[r+"Width"]>0||t.options[r+"Width"].toString().indexOf("%")>-1?t.width=t.options[r+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.width=t.media.style.width:null!==t.media.getAttribute("width")?t.width=t.$media.attr("width"):t.width=t.options["default"+a+"Width"],t.options[r+"Height"]>0||t.options[r+"Height"].toString().indexOf("%")>-1?t.height=t.options[r+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.height=t.media.style.height:null!==t.$media[0].getAttribute("height")?t.height=t.$media.attr("height"):t.height=t.options["default"+a+"Height"],t.setPlayerSize(t.width,t.height),s.pluginWidth=t.width,s.pluginHeight=t.height}mejs.MediaElement(t.$media[0],s),"undefined"!=typeof t.container&&t.controlsAreVisible&&t.container.trigger("controlsshown")},showControls:function(e){var t=this;e="undefined"==typeof e||e,t.controlsAreVisible||(e?(t.controls.removeClass("mejs-offscreen").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").removeClass("mejs-offscreen").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.removeClass("mejs-offscreen").css("display","block"),t.container.find(".mejs-control").removeClass("mejs-offscreen").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize())},hideControls:function(t){var i=this;t="undefined"==typeof t||t,!i.controlsAreVisible||i.options.alwaysShowControls||i.keyboardAction||(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).addClass("mejs-offscreen").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).addClass("mejs-offscreen").css("display","block")})):(i.controls.addClass("mejs-offscreen").css("display","block"),i.container.find(".mejs-control").addClass("mejs-offscreen").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(e){var t=this;e="undefined"!=typeof e?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(e){var t=this;null!==t.controlsTimer&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(t,i){var s,n,o=this,r=mejs.MediaFeatures,a=i.getAttribute("autoplay"),l=!("undefined"==typeof a||null===a||"false"===a);if(!o.created){if(o.created=!0,o.media=t,o.domNode=i,!(r.isAndroid&&o.options.AndroidUseNativeControls||r.isiPad&&o.options.iPadUseNativeControls||r.isiPhone&&o.options.iPhoneUseNativeControls)){
o.buildposter(o,o.controls,o.layers,o.media),o.buildkeyboard(o,o.controls,o.layers,o.media),o.buildoverlays(o,o.controls,o.layers,o.media),o.findTracks();for(s in o.options.features)if(n=o.options.features[s],o["build"+n])try{o["build"+n](o,o.controls,o.layers,o.media)}catch(e){}o.container.trigger("controlsready"),o.setPlayerSize(o.width,o.height),o.setControlsSize(),o.isVideo&&(mejs.MediaFeatures.hasTouch?o.$media.bind("touchstart",function(){o.controlsAreVisible?o.hideControls(!1):o.controlsEnabled&&o.showControls(!1)}):(o.clickToPlayPauseCallback=function(){o.options.clickToPlayPause&&(o.media.paused?o.play():o.pause())},o.media.addEventListener("click",o.clickToPlayPauseCallback,!1),o.container.bind("mouseenter",function(){o.controlsEnabled&&(o.options.alwaysShowControls||(o.killControlsTimer("enter"),o.showControls(),o.startControlsTimer(2500)))}).bind("mousemove",function(){o.controlsEnabled&&(o.controlsAreVisible||o.showControls(),o.options.alwaysShowControls||o.startControlsTimer(2500))}).bind("mouseleave",function(){o.controlsEnabled&&(o.media.paused||o.options.alwaysShowControls||o.startControlsTimer(1e3))})),o.options.hideVideoControlsOnLoad&&o.hideControls(!1),l&&!o.options.alwaysShowControls&&o.hideControls(),o.options.enableAutosize&&o.media.addEventListener("loadedmetadata",function(e){o.options.videoHeight<=0&&null===o.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(o.setPlayerSize(e.target.videoWidth,e.target.videoHeight),o.setControlsSize(),o.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),t.addEventListener("play",function(){var e;for(e in mejs.players){var t=mejs.players[e];t.id==o.id||!o.options.pauseOtherPlayers||t.paused||t.ended||t.pause(),t.hasFocus=!1}o.hasFocus=!0},!1),o.media.addEventListener("ended",function(t){if(o.options.autoRewind)try{o.media.setCurrentTime(0),window.setTimeout(function(){e(o.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(e){}o.media.pause(),o.setProgressRail&&o.setProgressRail(),o.setCurrentRail&&o.setCurrentRail(),o.options.loop?o.play():!o.options.alwaysShowControls&&o.controlsEnabled&&o.showControls()},!1),o.media.addEventListener("loadedmetadata",function(e){o.updateDuration&&o.updateDuration(),o.updateCurrent&&o.updateCurrent(),o.isFullScreen||(o.setPlayerSize(o.width,o.height),o.setControlsSize())},!1);var c=null;o.media.addEventListener("timeupdate",function(){c!==this.duration&&(c=this.duration,mejs.Utility.calculateTimeFormat(c,o.options,o.options.framesPerSecond||25),o.updateDuration&&o.updateDuration(),o.updateCurrent&&o.updateCurrent(),o.setControlsSize())},!1),o.container.focusout(function(t){if(t.relatedTarget){var i=e(t.relatedTarget);o.keyboardAction&&0===i.parents(".mejs-container").length&&(o.keyboardAction=!1,o.hideControls(!0))}}),setTimeout(function(){o.setPlayerSize(o.width,o.height),o.setControlsSize()},50),o.globalBind("resize",function(){o.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||o.setPlayerSize(o.width,o.height),o.setControlsSize()}),"youtube"==o.media.pluginType&&(r.isiOS||r.isAndroid)&&(o.container.find(".mejs-overlay-play").hide(),o.container.find(".mejs-poster").hide())}l&&"native"==t.pluginType&&o.play(),o.options.success&&("string"==typeof o.options.success?window[o.options.success](o.media,o.domNode,o):o.options.success(o.media,o.domNode,o))}},handleError:function(e){var t=this;t.controls&&t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,i){var s=this;if(!s.options.setDimensions)return!1;if("undefined"!=typeof t&&(s.width=t),"undefined"!=typeof i&&(s.height=i),s.height.toString().indexOf("%")>0||"none"!==s.$node.css("max-width")&&"t.width"!==s.$node.css("max-width")||s.$node[0].currentStyle&&"100%"===s.$node[0].currentStyle.maxWidth){var n=function(){return s.isVideo?s.media.videoWidth&&s.media.videoWidth>0?s.media.videoWidth:null!==s.media.getAttribute("width")?s.media.getAttribute("width"):s.options.defaultVideoWidth:s.options.defaultAudioWidth}(),o=function(){return s.isVideo?s.media.videoHeight&&s.media.videoHeight>0?s.media.videoHeight:null!==s.media.getAttribute("height")?s.media.getAttribute("height"):s.options.defaultVideoHeight:s.options.defaultAudioHeight}(),r=s.container.parent().closest(":visible").width(),a=s.container.parent().closest(":visible").height(),l=s.isVideo||!s.options.autosizeProgress?parseInt(r*o/n,10):o;isNaN(l)&&(l=a),s.container.parent().length>0&&"body"===s.container.parent()[0].tagName.toLowerCase()&&(r=e(window).width(),l=e(window).height()),l&&r&&(s.container.width(r).height(l),s.$media.add(s.container.find(".mejs-shim")).width("100%").height("100%"),s.isVideo&&s.media.setVideoSize&&s.media.setVideoSize(r,l),s.layers.children(".mejs-layer").width("100%").height("100%"))}else s.container.width(s.width).height(s.height),s.layers.children(".mejs-layer").width(s.width).height(s.height)},setControlsSize:function(){var t=this,i=0,s=0,n=t.controls.find(".mejs-time-rail"),o=t.controls.find(".mejs-time-total"),r=n.siblings(),a=r.last(),l=null;if(t.container.is(":visible")&&n.length&&n.is(":visible")){t.options&&!t.options.autosizeProgress&&(s=parseInt(n.css("width"),10)),0!==s&&s||(r.each(function(){var t=e(this);"absolute"!=t.css("position")&&t.is(":visible")&&(i+=e(this).outerWidth(!0))}),s=t.controls.width()-i-(n.outerWidth(!0)-n.width()));do n.width(s),o.width(s-(o.outerWidth(!0)-o.width())),"absolute"!=a.css("position")&&(l=a.length?a.position():null,s--);while(null!==l&&l.top.toFixed(2)>0&&s>0);t.container.trigger("controlsresize")}},buildposter:function(t,i,s,n){var o=this,r=e('<div class="mejs-poster mejs-layer"></div>').appendTo(s),a=t.$media.attr("poster");""!==t.options.poster&&(a=t.options.poster),a?o.setPoster(a):r.hide(),n.addEventListener("play",function(){r.hide()},!1),t.options.showPosterWhenEnded&&t.options.autoRewind&&n.addEventListener("ended",function(){r.show()},!1)},setPoster:function(t){var i=this,s=i.container.find(".mejs-poster"),n=s.find("img");0===n.length&&(n=e('<img width="100%" height="100%" alt="" />').appendTo(s)),n.attr("src",t),s.css({"background-image":"url("+t+")"})},buildoverlays:function(t,i,s,n){var o=this;if(t.isVideo){var r=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(s),a=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(s),l=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(s).bind("click",function(){o.options.clickToPlayPause&&n.paused&&n.play()});n.addEventListener("play",function(){l.hide(),r.hide(),i.find(".mejs-time-buffering").hide(),a.hide()},!1),n.addEventListener("playing",function(){l.hide(),r.hide(),i.find(".mejs-time-buffering").hide(),a.hide()},!1),n.addEventListener("seeking",function(){r.show(),i.find(".mejs-time-buffering").show()},!1),n.addEventListener("seeked",function(){r.hide(),i.find(".mejs-time-buffering").hide()},!1),n.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||l.show()},!1),n.addEventListener("waiting",function(){r.show(),i.find(".mejs-time-buffering").show()},!1),n.addEventListener("loadeddata",function(){r.show(),i.find(".mejs-time-buffering").show(),mejs.MediaFeatures.isAndroid&&(n.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var e=document.createEvent("HTMLEvents");return e.initEvent("canplay",!0,!0),n.dispatchEvent(e)}},300))},!1),n.addEventListener("canplay",function(){r.hide(),i.find(".mejs-time-buffering").hide(),clearTimeout(n.canplayTimeout)},!1),n.addEventListener("error",function(e){o.handleError(e),r.hide(),l.hide(),a.show(),a.find(".mejs-overlay-error").html("Error loading this resource")},!1),n.addEventListener("keydown",function(e){o.onkeydown(t,n,e)},!1)}},buildkeyboard:function(t,i,s,n){var o=this;o.container.keydown(function(){o.keyboardAction=!0}),o.globalBind("keydown",function(i){return t.hasFocus=0!==e(i.target).closest(".mejs-container").length&&e(i.target).closest(".mejs-container").attr("id")===t.$media.closest(".mejs-container").attr("id"),o.onkeydown(t,n,i)}),o.globalBind("click",function(i){t.hasFocus=0!==e(i.target).closest(".mejs-container").length})},onkeydown:function(e,t,i){if(e.hasFocus&&e.options.enableKeyboard)for(var s=0,n=e.options.keyActions.length;s<n;s++)for(var o=e.options.keyActions[s],r=0,a=o.keys.length;r<a;r++)if(i.keyCode==o.keys[r])return"function"==typeof i.preventDefault&&i.preventDefault(),o.action(e,t,i.keyCode,i),!1;return!0},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,s){s=e(s),t.tracks.push({srclang:s.attr("srclang")?s.attr("srclang").toLowerCase():"",src:s.attr("src"),kind:s.attr("kind"),label:s.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.load(),this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){this.isLoaded||this.media.load(),this.isLoaded=!0},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e,t,i=this;i.container.prev(".mejs-offscreen").remove();for(e in i.options.features)if(t=i.options.features[e],i["clean"+t])try{i["clean"+t](i)}catch(e){}i.isDynamic?i.$node.insertBefore(i.container):(i.$media.prop("controls",!0),i.$node.clone().insertBefore(i.container).show(),i.$node.remove()),"native"!==i.media.pluginType&&i.media.remove(),delete mejs.players[i.id],"object"==typeof i.container&&i.container.remove(),i.globalUnbind(),delete i.node.player},rebuildtracks:function(){var e=this;e.findTracks(),e.buildtracks(e,e.controls,e.layers,e.media)},resetSize:function(){var e=this;setTimeout(function(){e.setPlayerSize(e.width,e.height),e.setControlsSize()},50)}},function(){function t(t,s){var n={d:[],w:[]};return e.each((t||"").split(" "),function(e,t){var o=t+"."+s;0===o.indexOf(".")?(n.d.push(o),n.w.push(o)):n[i.test(t)?"w":"d"].push(o)}),n.d=n.d.join(" "),n.w=n.w.join(" "),n}var i=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(i,s,n){var o=this,r=o.node?o.node.ownerDocument:document;i=t(i,o.id),i.d&&e(r).bind(i.d,s,n),i.w&&e(window).bind(i.w,s,n)},mejs.MediaElementPlayer.prototype.globalUnbind=function(i,s){var n=this,o=n.node?n.node.ownerDocument:document;i=t(i,n.id),i.d&&e(o).unbind(i.d,s),i.w&&e(window).unbind(i.w,s)}}(),"undefined"!=typeof e&&(e.fn.mediaelementplayer=function(t){return t===!1?this.each(function(){var t=e(this).data("mediaelementplayer");t&&t.remove(),e(this).removeData("mediaelementplayer")}):this.each(function(){e(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,t))}),this},e(document).ready(function(){e(".mejs-player").mediaelementplayer()})),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playText:mejs.i18n.t("Play"),pauseText:mejs.i18n.t("Pause")}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,s,n){function o(e){"play"===e?(l.removeClass("mejs-play").addClass("mejs-pause"),c.attr({title:a.pauseText,"aria-label":a.pauseText})):(l.removeClass("mejs-pause").addClass("mejs-play"),c.attr({title:a.playText,"aria-label":a.playText}))}var r=this,a=r.options,l=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+r.id+'" title="'+a.playText+'" aria-label="'+a.playText+'"></button></div>').appendTo(i).click(function(e){return e.preventDefault(),n.paused?n.play():n.pause(),!1}),c=l.find("button");o("pse"),n.addEventListener("play",function(){o("play")},!1),n.addEventListener("playing",function(){o("play")},!1),n.addEventListener("pause",function(){o("pse")},!1),n.addEventListener("paused",function(){o("pse")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,i,s,n){var o=this;e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+o.id+'" title="'+o.options.stopText+'" aria-label="'+o.options.stopText+'"></button></div>').appendTo(i).click(function(){n.paused||n.pause(),n.currentTime>0&&(n.setCurrentTime(0),n.pause(),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0,t.options)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0,t.options)),s.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")}),e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,i,s,n){e('<div class="mejs-time-rail"><span  class="mejs-time-total mejs-time-slider"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var o=this,r=i.find(".mejs-time-total"),a=i.find(".mejs-time-loaded"),l=i.find(".mejs-time-current"),c=i.find(".mejs-time-handle"),d=i.find(".mejs-time-float"),u=i.find(".mejs-time-float-current"),h=i.find(".mejs-time-slider"),p=function(e){var i,s=r.offset(),o=r.width(),a=0,l=0,c=0;i=e.originalEvent&&e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,n.duration&&(i<s.left?i=s.left:i>o+s.left&&(i=o+s.left),c=i-s.left,a=c/o,l=a<=.02?0:a*n.duration,m&&l!==n.currentTime&&n.setCurrentTime(l),mejs.MediaFeatures.hasTouch||(d.css("left",c),u.html(mejs.Utility.secondsToTimeCode(l,t.options)),d.show()))},m=!1,f=!1,g=0,v=!1,b=t.options.autoRewind,_=function(e){var i=n.currentTime,s=mejs.i18n.t("Time Slider"),o=mejs.Utility.secondsToTimeCode(i,t.options),r=n.duration;h.attr({"aria-label":s,"aria-valuemin":0,"aria-valuemax":r,"aria-valuenow":i,"aria-valuetext":o,role:"slider",tabindex:0})},y=function(){var e=new Date;e-g>=1e3&&n.play()};h.bind("focus",function(e){t.options.autoRewind=!1}),h.bind("blur",function(e){t.options.autoRewind=b}),h.bind("keydown",function(e){new Date-g>=1e3&&(v=n.paused);var i=e.keyCode,s=n.duration,o=n.currentTime,r=t.options.defaultSeekForwardInterval(s),a=t.options.defaultSeekBackwardInterval(s);switch(i){case 37:case 40:o-=a;break;case 39:case 38:o+=r;break;case 36:o=0;break;case 35:o=s;break;case 32:case 13:return void(n.paused?n.play():n.pause());default:return}return o=o<0?0:o>=s?s:Math.floor(o),g=new Date,v||n.pause(),o<n.duration&&!v&&setTimeout(y,1100),n.setCurrentTime(o),e.preventDefault(),e.stopPropagation(),!1}),r.bind("mousedown touchstart",function(e){1!==e.which&&0!==e.which||(m=!0,p(e),o.globalBind("mousemove.dur touchmove.dur",function(e){p(e)}),o.globalBind("mouseup.dur touchend.dur",function(e){m=!1,d.hide(),o.globalUnbind(".dur")}))}).bind("mouseenter",function(e){f=!0,o.globalBind("mousemove.dur",function(e){p(e)}),mejs.MediaFeatures.hasTouch||d.show()}).bind("mouseleave",function(e){f=!1,m||(o.globalUnbind(".dur"),d.hide())}),n.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),n.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e),_(e)},!1),o.container.on("controlsresize",function(){t.setProgressRail(),t.setCurrentRail()}),o.loaded=a,o.total=r,o.current=l,o.handle=c},setProgressRail:function(e){var t=this,i=void 0!==e?e.target:t.media,s=null;i&&i.buffered&&i.buffered.length>0&&i.buffered.end&&i.duration?s=i.buffered.end(i.buffered.length-1)/i.duration:i&&void 0!==i.bytesTotal&&i.bytesTotal>0&&void 0!==i.bufferedBytes?s=i.bufferedBytes/i.bytesTotal:e&&e.lengthComputable&&0!==e.total&&(s=e.loaded/e.total),null!==s&&(s=Math.min(1,Math.max(0,s)),t.loaded&&t.total&&t.loaded.width(t.total.width()*s))},setCurrentRail:function(){var e=this;if(void 0!==e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),i=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",i)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,s,n){var o=this;e('<div class="mejs-time" role="timer" aria-live="off"><span class="mejs-currenttime">'+mejs.Utility.secondsToTimeCode(0,t.options)+"</span></div>").appendTo(i),o.currenttime=o.controls.find(".mejs-currenttime"),n.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,i,s,n){var o=this;i.children().last().find(".mejs-currenttime").length>0?e(o.options.timeAndDurationSeparator+'<span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(o.options.duration,o.options)+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(o.options.duration,o.options)+"</span></div>").appendTo(i)),o.durationD=o.controls.find(".mejs-duration"),n.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){var e=this,t=e.media.currentTime;isNaN(t)&&(t=0),e.currenttime&&e.currenttime.html(mejs.Utility.secondsToTimeCode(t,e.options))},updateDuration:function(){var e=this,t=e.media.duration;e.options.duration>0&&(t=e.options.duration),isNaN(t)&&(t=0),e.container.toggleClass("mejs-long-video",t>3600),e.durationD&&t>0&&e.durationD.html(mejs.Utility.secondsToTimeCode(t,e.options))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),allyVolumeControlText:mejs.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,i,s,n){if(!mejs.MediaFeatures.isAndroid&&!mejs.MediaFeatures.isiOS||!this.options.hideVolumeOnTouchDevices){var o=this,r=o.isVideo?o.options.videoVolume:o.options.audioVolume,a="horizontal"==r?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+o.id+'" title="'+o.options.muteText+'" aria-label="'+o.options.muteText+'"></button></div><a href="javascript:void(0);" class="mejs-horizontal-volume-slider"><span class="mejs-offscreen">'+o.options.allyVolumeControlText+'</span><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></a>').appendTo(i):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+o.id+'" title="'+o.options.muteText+'" aria-label="'+o.options.muteText+'"></button><a href="javascript:void(0);" class="mejs-volume-slider"><span class="mejs-offscreen">'+o.options.allyVolumeControlText+'</span><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></a></div>').appendTo(i),l=o.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),c=o.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),d=o.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),u=o.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),h=function(e,t){if(!l.is(":visible")&&"undefined"==typeof t)return l.show(),h(e,!0),void l.hide();e=Math.max(0,e),e=Math.min(e,1),0===e?(a.removeClass("mejs-mute").addClass("mejs-unmute"),a.children("button").attr("title",mejs.i18n.t("Unmute")).attr("aria-label",mejs.i18n.t("Unmute"))):(a.removeClass("mejs-unmute").addClass("mejs-mute"),a.children("button").attr("title",mejs.i18n.t("Mute")).attr("aria-label",mejs.i18n.t("Mute")));var i=c.position();if("vertical"==r){var s=c.height(),n=s-s*e;u.css("top",Math.round(i.top+n-u.height()/2)),d.height(s-n),d.css("top",i.top+n)}else{var o=c.width(),p=o*e;u.css("left",Math.round(i.left+p-u.width()/2)),d.width(Math.round(p))}},p=function(e){var t=null,i=c.offset();if("vertical"===r){var s=c.height(),o=e.pageY-i.top;if(t=(s-o)/s,0===i.top||0===i.left)return}else{var a=c.width(),l=e.pageX-i.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),h(t),0===t?n.setMuted(!0):n.setMuted(!1),n.setVolume(t)},m=!1,f=!1;a.hover(function(){l.show(),f=!0},function(){f=!1,m||"vertical"!=r||l.hide()});var g=function(e){var t=Math.floor(100*n.volume);l.attr({"aria-label":mejs.i18n.t("Volume Slider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,"aria-valuetext":t+"%",role:"slider",tabindex:0})};l.bind("mouseover",function(){f=!0}).bind("mousedown",function(e){return p(e),o.globalBind("mousemove.vol",function(e){p(e)}),o.globalBind("mouseup.vol",function(){m=!1,o.globalUnbind(".vol"),f||"vertical"!=r||l.hide()}),m=!0,!1}).bind("keydown",function(e){var t=e.keyCode,i=n.volume;switch(t){case 38:i=Math.min(i+.1,1);break;case 40:i=Math.max(0,i-.1);break;default:return!0}return m=!1,h(i),n.setVolume(i),!1}),a.find("button").click(function(){n.setMuted(!n.muted)}),a.find("button").bind("focus",function(){l.show()}),n.addEventListener("volumechange",function(e){m||(n.muted?(h(0),a.removeClass("mejs-mute").addClass("mejs-unmute")):(h(n.volume),a.removeClass("mejs-unmute").addClass("mejs-mute"))),g(e)},!1),0===t.options.startVolume&&n.setMuted(!0),"native"===n.pluginType&&n.setVolume(t.options.startVolume),o.container.on("controlsresize",function(){h(n.volume)})}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,fullscreenMode:"",buildfullscreen:function(t,i,s,n){if(t.isVideo){t.isInIframe=window.location!=window.parent.location,n.addEventListener("play",function(){t.detectFullscreenMode()});var o=this,r=null,a=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+o.id+'" title="'+o.options.fullscreenText+'" aria-label="'+o.options.fullscreenText+'"></button></div>').appendTo(i).on("click",function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()}).on("mouseover",function(){if("plugin-hover"==o.fullscreenMode){null!==r&&(clearTimeout(r),delete r);var e=a.offset(),i=t.container.offset();n.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}}).on("mouseout",function(){"plugin-hover"==o.fullscreenMode&&(null!==r&&(clearTimeout(r),delete r),r=setTimeout(function(){n.hideFullscreenButton()},1500))});if(t.fullscreenBtn=a,o.globalBind("keydown",function(e){27==e.keyCode&&(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||o.isFullScreen)&&t.exitFullScreen()}),o.normalHeight=0,o.normalWidth=0,mejs.MediaFeatures.hasTrueNativeFullScreen){var l=function(e){t.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen()))};t.globalBind(mejs.MediaFeatures.fullScreenEventName,l)}}},detectFullscreenMode:function(){var e=this,t="",i=mejs.MediaFeatures;return i.hasTrueNativeFullScreen&&"native"===e.media.pluginType?t="native-native":i.hasTrueNativeFullScreen&&"native"!==e.media.pluginType&&!i.hasFirefoxPluginMovingProblem?t="plugin-native":e.usePluginFullScreen?mejs.MediaFeatures.supportsPointerEvents?(t="plugin-click",e.createPluginClickThrough()):t="plugin-hover":t="fullwindow",e.fullscreenMode=t,t},isPluginClickThroughCreated:!1,createPluginClickThrough:function(){var t=this;if(!t.isPluginClickThroughCreated){var i,s,n=!1,o=function(){if(n){for(var e in r)r[e].hide();t.fullscreenBtn.css("pointer-events",""),t.controls.css("pointer-events",""),t.media.removeEventListener("click",t.clickToPlayPauseCallback),n=!1}},r={},a=["top","left","right","bottom"],l=function(){var e=fullscreenBtn.offset().left-t.container.offset().left,s=fullscreenBtn.offset().top-t.container.offset().top,n=fullscreenBtn.outerWidth(!0),o=fullscreenBtn.outerHeight(!0),a=t.container.width(),l=t.container.height();for(i in r)r[i].css({position:"absolute",top:0,left:0});r.top.width(a).height(s),r.left.width(e).height(o).css({top:s}),r.right.width(a-e-n).height(o).css({top:s,left:e+n}),r.bottom.width(a).height(l-o-s).css({top:s+o})};for(t.globalBind("resize",function(){l()}),i=0,s=a.length;i<s;i++)r[a[i]]=e('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(o).hide();fullscreenBtn.on("mouseover",function(){if(!t.isFullScreen){var e=fullscreenBtn.offset(),s=player.container.offset();media.positionFullscreenButton(e.left-s.left,e.top-s.top,!1),t.fullscreenBtn.css("pointer-events","none"),t.controls.css("pointer-events","none"),t.media.addEventListener("click",t.clickToPlayPauseCallback);for(i in r)r[i].show();l(),n=!0}}),media.addEventListener("fullscreenchange",function(e){t.isFullScreen=!t.isFullScreen,t.isFullScreen?t.media.removeEventListener("click",t.clickToPlayPauseCallback):t.media.addEventListener("click",t.clickToPlayPauseCallback),o()}),t.globalBind("mousemove",function(e){if(n){var i=fullscreenBtn.offset();(e.pageY<i.top||e.pageY>i.top+fullscreenBtn.outerHeight(!0)||e.pageX<i.left||e.pageX>i.left+fullscreenBtn.outerWidth(!0))&&(fullscreenBtn.css("pointer-events",""),t.controls.css("pointer-events",""),n=!1)}}),t.isPluginClickThroughCreated=!0}},cleanfullscreen:function(e){e.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;return mejs.MediaFeatures.hasiOSFullScreen?void t.media.webkitEnterFullscreen():(e(document.documentElement).addClass("mejs-fullscreen"),t.normalHeight=t.container.height(),t.normalWidth=t.container.width(),"native-native"===t.fullscreenMode||"plugin-native"===t.fullscreenMode?(mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function i(){if(t.isNativeFullScreen){var s=.002,n=e(window).width(),o=screen.width,r=Math.abs(o-n),a=o*s;r>a?t.exitFullScreen():setTimeout(i,500)}},1e3)):"fullwindow"==t.fullscreeMode,t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.media.pluginType?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),setTimeout(function(){var i=e(window),s=i.width(),n=i.height();t.media.setVideoSize(s,n)},500)),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0,t.container.find(".mejs-captions-text").css("font-size",screen.width/t.width*1*100+"%"),t.container.find(".mejs-captions-position").css("bottom","45px"),void t.container.trigger("enteredfullscreen"))},exitFullScreen:function(){var t=this;clearTimeout(t.containerSizeTimeout),mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),e(document.documentElement).removeClass("mejs-fullscreen"),t.container.removeClass("mejs-container-fullscreen").width(t.normalWidth).height(t.normalHeight),"native"===t.media.pluginType?t.$media.width(t.normalWidth).height(t.normalHeight):(t.container.find(".mejs-shim").width(t.normalWidth).height(t.normalHeight),t.media.setVideoSize(t.normalWidth,t.normalHeight)),t.layers.children("div").width(t.normalWidth).height(t.normalHeight),t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),t.setControlsSize(),t.isFullScreen=!1,t.container.find(".mejs-captions-text").css("font-size",""),t.container.find(".mejs-captions-position").css("bottom",""),t.container.trigger("exitedfullscreen")}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"}),e.extend(MediaElementPlayer.prototype,{buildspeed:function(t,i,s,n){var o=this;if("native"==o.media.pluginType){for(var r=null,a=null,l=null,c=null,d=[],u=!1,h=0,p=o.options.speeds.length;h<p;h++){var m=o.options.speeds[h];"string"==typeof m?(d.push({name:m+o.options.speedChar,value:m}),m===o.options.defaultSpeed&&(u=!0)):(d.push(m),m.value===o.options.defaultSpeed&&(u=!0))}u||d.push({name:o.options.defaultSpeed+o.options.speedChar,value:o.options.defaultSpeed}),d.sort(function(e,t){return parseFloat(t.value)-parseFloat(e.value)});var f=function(e){for(h=0,p=d.length;h<p;h++)if(d[h].value===e)return d[h].name},g='<div class="mejs-button mejs-speed-button"><button type="button">'+f(o.options.defaultSpeed)+'</button><div class="mejs-speed-selector"><ul>';for(h=0,il=d.length;h<il;h++)c=o.id+"-speed-"+d[h].value,g+='<li><input type="radio" name="speed" value="'+d[h].value+'" id="'+c+'" '+(d[h].value===o.options.defaultSpeed?" checked":"")+' /><label for="'+c+'" '+(d[h].value===o.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+d[h].name+"</label></li>";g+="</ul></div></div>",r=e(g).appendTo(i),a=r.find(".mejs-speed-selector"),l=o.options.defaultSpeed,n.addEventListener("loadedmetadata",function(e){l&&(n.playbackRate=parseFloat(l))},!0),a.on("click",'input[type="radio"]',function(){var t=e(this).attr("value");l=t,n.playbackRate=parseFloat(t),r.find("button").html(f(t)),r.find(".mejs-speed-selected").removeClass("mejs-speed-selected"),r.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")}),r.one("mouseenter focusin",function(){a.height(r.find(".mejs-speed-selector ul").outerHeight(!0)+r.find(".mejs-speed-translations").outerHeight(!0)).css("top",-1*a.height()+"px")})}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,cleartracks:function(e,t,i,s){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove())},buildtracks:function(t,i,s,n){if(0!==t.tracks.length){var o,r=this,a=r.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"";if(r.domNode.textTracks)for(o=r.domNode.textTracks.length-1;o>=0;o--)r.domNode.textTracks[o].mode="hidden";r.cleartracks(t,i,s,n),t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(s).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+a+'><span class="mejs-captions-text"></span></div></div>').prependTo(s).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+r.id+'" title="'+r.options.tracksText+'" aria-label="'+r.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(i);var l=0;for(o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&l++;for(r.options.toggleCaptionsButtonWhenOnlyOne&&1==l?t.captionsButton.on("click",function(){null===t.selectedTrack?lang=t.tracks[0].srclang:lang="none",t.setTrack(lang)}):(t.captionsButton.on("mouseenter focusin",function(){
e(this).find(".mejs-captions-selector").removeClass("mejs-offscreen")}).on("click","input[type=radio]",function(){lang=this.value,t.setTrack(lang)}),t.captionsButton.on("mouseleave focusout",function(){e(this).find(".mejs-captions-selector").addClass("mejs-offscreen")})),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("controlsshown",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){n.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&t.addTrackButton(t.tracks[o].srclang,t.tracks[o].label);t.loadNextTrack(),n.addEventListener("timeupdate",function(e){t.displayCaptions()},!1),""!==t.options.slidesSelector&&(t.slidesContainer=e(t.options.slidesSelector),n.addEventListener("timeupdate",function(e){t.displaySlides()},!1)),n.addEventListener("loadedmetadata",function(e){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.removeClass("mejs-offscreen"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!n.paused&&t.chapters.fadeOut(200,function(){e(this).addClass("mejs-offscreen"),e(this).css("display","block")})}),r.container.on("controlsresize",function(){r.adjustLanguageBox()}),null!==t.node.getAttribute("autoplay")&&t.chapters.addClass("mejs-offscreen")}},setTrack:function(e){var t,i=this;if("none"==e)i.selectedTrack=null,i.captionsButton.removeClass("mejs-captions-enabled");else for(t=0;t<i.tracks.length;t++)if(i.tracks[t].srclang==e){null===i.selectedTrack&&i.captionsButton.addClass("mejs-captions-enabled"),i.selectedTrack=i.tracks[t],i.captions.attr("lang",i.selectedTrack.srclang),i.displayCaptions();break}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(t){var i=this,s=i.tracks[t],n=function(){s.isLoaded=!0,i.enableTrackButton(s.srclang,s.label),i.loadNextTrack()};e.ajax({url:s.src,dataType:"text",success:function(e){"string"==typeof e&&/<tt\s+xml/gi.exec(e)?s.entries=mejs.TrackFormatParser.dfxp.parse(e):s.entries=mejs.TrackFormatParser.webvtt.parse(e),n(),"chapters"==s.kind&&i.media.addEventListener("play",function(e){i.media.duration>0&&i.displayChapters(s)},!1),"slides"==s.kind&&i.setupSlides(s)},error:function(){i.removeTrackButton(s.srclang),i.loadNextTrack()}})},enableTrackButton:function(t,i){var s=this;""===i&&(i=mejs.language.codes[t]||t),s.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),s.options.startLanguage==t&&e("#"+s.id+"_captions_"+t).prop("checked",!0).trigger("click"),s.adjustLanguageBox()},removeTrackButton:function(e){var t=this;t.captionsButton.find("input[value="+e+"]").closest("li").remove(),t.adjustLanguageBox()},addTrackButton:function(t,i){var s=this;""===i&&(i=mejs.language.codes[t]||t),s.captionsButton.find("ul").append(e('<li><input type="radio" name="'+s.id+'_captions" id="'+s.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+s.id+"_captions_"+t+'">'+i+" (loading)</label></li>")),s.adjustLanguageBox(),s.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(i=0;i<e.tracks.length;i++)if("subtitles"==e.tracks[i].kind&&e.tracks[i].isLoaded){t=!0;break}t||(e.captionsButton.hide(),e.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e,t=this,i=t.selectedTrack;if(null!==i&&i.isLoaded){for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return t.captionsText.html(i.entries.text[e]).attr("class","mejs-captions-text "+(i.entries.times[e].identifier||"")),void t.captions.show().height(0);t.captions.hide()}else t.captions.hide()}},setupSlides:function(e){var t=this;t.slides=e,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(t){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var i=this,s=i.slides.entries.text[t],n=i.slides.entries.imgs[t];"undefined"==typeof n||"undefined"==typeof n.fadeIn?i.slides.entries.imgs[t]=n=e('<img src="'+s+'">').on("load",function(){n.appendTo(i.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):n.is(":visible")||n.is(":animated")||n.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var e,t=this,i=t.slides;for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return void t.showSlide(e)}},displayChapters:function(){var e,t=this;for(e=0;e<t.tracks.length;e++)if("chapters"==t.tracks[e].kind&&t.tracks[e].isLoaded){t.drawChapters(t.tracks[e]),t.hasChapters=!0;break}},drawChapters:function(t){var i,s,n=this,o=0,r=0;for(n.chapters.empty(),i=0;i<t.entries.times.length;i++)s=t.entries.times[i].stop-t.entries.times[i].start,o=Math.floor(s/n.media.duration*100),(o+r>100||i==t.entries.times.length-1&&o+r<100)&&(o=100-r),n.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+r.toString()+"%;width: "+o.toString()+'%;"><div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start,n.options)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop,n.options)+"</span></div></div>")),r+=o;n.chapters.find("div.mejs-chapter").click(function(){n.media.setCurrentTime(parseFloat(e(this).attr("rel"))),n.media.paused&&n.media.play()}),n.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){for(var i,s,n,o=0,r=mejs.TrackFormatParser.split2(t,/\r?\n/),a={text:[],times:[]};o<r.length;o++){if(i=this.pattern_timecode.exec(r[o]),i&&o<r.length){for(o-1>=0&&""!==r[o-1]&&(n=r[o-1]),o++,s=r[o],o++;""!==r[o]&&o<r.length;)s=s+"\n"+r[o],o++;s=e.trim(s).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),a.text.push(s),a.times.push({identifier:n,start:0===mejs.Utility.convertSMPTEtoSeconds(i[1])?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}n=""}return a}},dfxp:{parse:function(t){t=e(t).filter("tt");var i,s,n=0,o=t.children("div").eq(0),r=o.find("p"),a=t.find("#"+o.attr("style")),l={text:[],times:[]};if(a.length){var c=a.removeAttr("id").get(0).attributes;if(c.length)for(i={},n=0;n<c.length;n++)i[c[n].name.split(":")[1]]=c[n].value}for(n=0;n<r.length;n++){var d,u={start:null,stop:null,style:null};if(r.eq(n).attr("begin")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("begin"))),!u.start&&r.eq(n-1).attr("end")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n-1).attr("end"))),r.eq(n).attr("end")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("end"))),!u.stop&&r.eq(n+1).attr("begin")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n+1).attr("begin"))),i){d="";for(var h in i)d+=h+":"+i[h]+";"}d&&(u.style=d),0===u.start&&(u.start=.2),l.times.push(u),s=e.trim(r.eq(n).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),l.text.push(s),0===l.times.start&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,s=[],n="";for(i=0;i<e.length;i++)n+=e.substring(i,i+1),t.test(n)&&(s.push(n.replace(t,"")),n="");return s.push(n),s})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return"undefined"==typeof e.enterFullScreen?null:e.isFullScreen?mejs.i18n.t("Turn off Fullscreen"):mejs.i18n.t("Go Fullscreen")},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?mejs.i18n.t("Unmute"):mejs.i18n.t("Mute")},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(e){return mejs.i18n.t("Download Video")},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t,i,s,n){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){if(t.isContextMenuEnabled)return e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},cleancontextmenu:function(e){e.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var s=this,n="",o=s.options.contextMenuItems,r=0,a=o.length;r<a;r++)if(o[r].isSeparator)n+='<div class="mejs-contextmenu-separator"></div>';else{var l=o[r].render(s);null!=l&&(n+='<div class="mejs-contextmenu-item" data-itemindex="'+r+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}s.contextMenu.empty().append(e(n)).css({top:i,left:t}).show(),s.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),n=s.options.contextMenuItems[i];"undefined"!=typeof n.show&&n.show(t,s),t.click(function(){"undefined"!=typeof n.click&&n.click(s),s.contextMenu.hide()})}),setTimeout(function(){s.killControlsTimer("rev3")},100)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{skipBackInterval:30,skipBackText:mejs.i18n.t("Skip back %1 seconds")}),e.extend(MediaElementPlayer.prototype,{buildskipback:function(t,i,s,n){var o=this,r=o.options.skipBackText.replace("%1",o.options.skipBackInterval);e('<div class="mejs-button mejs-skip-back-button"><button type="button" aria-controls="'+o.id+'" title="'+r+'" aria-label="'+r+'">'+o.options.skipBackInterval+"</button></div>").appendTo(i).click(function(){n.setCurrentTime(Math.max(n.currentTime-o.options.skipBackInterval,0)),e(this).find("button").blur()})}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),e.extend(MediaElementPlayer.prototype,{buildpostroll:function(t,i,s,n){var o=this,r=o.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof r&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+o.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(s).hide(),o.media.addEventListener("ended",function(i){e.ajax({dataType:"html",url:r,success:function(e,t){s.find(".mejs-postroll-layer-content").html(e)}}),t.postroll.show()},!1))}})}(mejs.$),define("components/adapt-contrib-media/js/mediaelement-and-player",function(){}),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,cleartracks:function(e,t,i,s){e&&(e.captions&&e.captions.remove(),e.chapters&&e.chapters.remove(),e.captionsText&&e.captionsText.remove(),e.captionsButton&&e.captionsButton.remove())},buildtracks:function(t,i,s,n){if(0!==t.tracks.length){var o,r=this,a=r.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"";if(r.domNode.textTracks)for(o=r.domNode.textTracks.length-1;o>=0;o--)r.domNode.textTracks[o].mode="hidden";r.cleartracks(t,i,s,n),t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(s).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+a+'><span class="mejs-captions-text"></span></div></div>').prependTo(s).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+r.id+'" title="'+r.options.tracksText+'" aria-label="'+r.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="checkbox" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(i);var l=0;for(o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&l++;for(r.options.toggleCaptionsButtonWhenOnlyOne&&1==l?t.captionsButton.on("click",function(){null===t.selectedTrack?lang=t.tracks[0].srclang:lang="none",t.setTrack(lang)}):t.captionsButton.on("click",function(t){e(this).find(".mejs-captions-selector").removeClass("mejs-offscreen").css("visibility","visible"),setTimeout(function(){e(e(t.currentTarget).find(".mejs-captions-selector").find("input[type=checkbox]")[0]).focus()},250)}).on("click keyup","input[type=checkbox]",function(i){i.stopPropagation(),"keyup"===i.type&&32!==i.which&&13!==i.which||(e(this).parents(".mejs-captions-selector").find("input[type=checkbox]").prop("checked",!1),e(this).prop("checked",!0),lang=this.value,t.setTrack(lang),"keyup"===i.type&&e(this).parents(".mejs-captions-button").find("button").focus(),e(this).parents(".mejs-captions-selector").addClass("mejs-offscreen").css("visibility","hidden"))}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("controlsshown",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){n.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,o=0;o<t.tracks.length;o++)"subtitles"==t.tracks[o].kind&&t.addTrackButton(t.tracks[o].srclang,t.tracks[o].label);t.loadNextTrack(),n.addEventListener("timeupdate",function(e){t.displayCaptions()},!1),""!==t.options.slidesSelector&&(t.slidesContainer=e(t.options.slidesSelector),n.addEventListener("timeupdate",function(e){t.displaySlides()},!1)),n.addEventListener("loadedmetadata",function(e){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.removeClass("mejs-offscreen"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!n.paused&&t.chapters.fadeOut(200,function(){e(this).addClass("mejs-offscreen"),e(this).css("display","block")})}),r.container.on("controlsresize",function(){r.adjustLanguageBox()}),null!==t.node.getAttribute("autoplay")&&t.chapters.addClass("mejs-offscreen")}},setTrack:function(e){var t,i=this;if("none"==e)i.selectedTrack=null,i.captionsButton.removeClass("mejs-captions-enabled");else for(t=0;t<i.tracks.length;t++)if(i.tracks[t].srclang==e){null===i.selectedTrack&&i.captionsButton.addClass("mejs-captions-enabled"),i.selectedTrack=i.tracks[t],i.captions.attr("lang",i.selectedTrack.srclang),i.displayCaptions();break}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(t){var i=this,s=i.tracks[t],n=function(){s.isLoaded=!0,i.enableTrackButton(s.srclang,s.label),i.loadNextTrack()};e.ajax({url:s.src,dataType:"text",success:function(e){"string"==typeof e&&/<tt\s+xml/gi.exec(e)?s.entries=mejs.TrackFormatParser.dfxp.parse(e):s.entries=mejs.TrackFormatParser.webvtt.parse(e),n(),"chapters"==s.kind&&i.media.addEventListener("play",function(e){i.media.duration>0&&i.displayChapters(s)},!1),"slides"==s.kind&&i.setupSlides(s)},error:function(){i.removeTrackButton(s.srclang),i.loadNextTrack()}})},enableTrackButton:function(t,i){var s=this;""===i&&(i=mejs.language.codes[t]||t),s.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),s.options.startLanguage==t&&e("#"+s.id+"_captions_"+t).prop("checked",!0).trigger("click"),s.adjustLanguageBox()},removeTrackButton:function(e){var t=this;t.captionsButton.find("input[value="+e+"]").closest("li").remove(),t.adjustLanguageBox()},addTrackButton:function(t,i){var s=this;""===i&&(i=mejs.language.codes[t]||t),s.captionsButton.find("ul").append(e('<li><input type="checkbox" name="'+s.id+'_captions" id="'+s.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+s.id+"_captions_"+t+'">'+i+" (loading)</label></li>")),s.adjustLanguageBox(),s.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(i=0;i<e.tracks.length;i++)if("subtitles"==e.tracks[i].kind&&e.tracks[i].isLoaded){t=!0;break}t||(e.captionsButton.hide(),e.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e,t=this,i=t.selectedTrack;if(null!==i&&i.isLoaded){for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return t.captionsText.html(i.entries.text[e]).attr("class","mejs-captions-text "+(i.entries.times[e].identifier||"")),void t.captions.show().height(0);t.captions.hide()}else t.captions.hide()}},setupSlides:function(e){var t=this;t.slides=e,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(t){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var i=this,s=i.slides.entries.text[t],n=i.slides.entries.imgs[t];"undefined"==typeof n||"undefined"==typeof n.fadeIn?i.slides.entries.imgs[t]=n=e('<img src="'+s+'">').on("load",function(){n.appendTo(i.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):n.is(":visible")||n.is(":animated")||n.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var e,t=this,i=t.slides;for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return void t.showSlide(e)}},displayChapters:function(){var e,t=this;for(e=0;e<t.tracks.length;e++)if("chapters"==t.tracks[e].kind&&t.tracks[e].isLoaded){t.drawChapters(t.tracks[e]),t.hasChapters=!0;break}},drawChapters:function(t){var i,s,n=this,o=0,r=0;for(n.chapters.empty(),i=0;i<t.entries.times.length;i++)s=t.entries.times[i].stop-t.entries.times[i].start,o=Math.floor(s/n.media.duration*100),(o+r>100||i==t.entries.times.length-1&&o+r<100)&&(o=100-r),n.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+r.toString()+"%;width: "+o.toString()+'%;"><div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start,n.options)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop,n.options)+"</span></div></div>")),r+=o;n.chapters.find("div.mejs-chapter").click(function(){n.media.setCurrentTime(parseFloat(e(this).attr("rel"))),n.media.paused&&n.media.play()}),n.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){for(var i,s,n,o=0,r=mejs.TrackFormatParser.split2(t,/\r?\n/),a={text:[],times:[]};o<r.length;o++){if(i=this.pattern_timecode.exec(r[o]),i&&o<r.length){for(o-1>=0&&""!==r[o-1]&&(n=r[o-1]),o++,s=r[o],o++;""!==r[o]&&o<r.length;)s=s+"\n"+r[o],o++;s=e.trim(s).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),a.text.push(s),a.times.push({identifier:n,start:0===mejs.Utility.convertSMPTEtoSeconds(i[1])?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}n=""}return a}},dfxp:{parse:function(t){t=e(t).filter("tt");var i,s,n=0,o=t.children("div").eq(0),r=o.find("p"),a=t.find("#"+o.attr("style")),l={text:[],times:[]};if(a.length){var c=a.removeAttr("id").get(0).attributes;if(c.length)for(i={},n=0;n<c.length;n++)i[c[n].name.split(":")[1]]=c[n].value}for(n=0;n<r.length;n++){var d,u={start:null,stop:null,style:null};if(r.eq(n).attr("begin")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("begin"))),!u.start&&r.eq(n-1).attr("end")&&(u.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n-1).attr("end"))),r.eq(n).attr("end")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("end"))),!u.stop&&r.eq(n+1).attr("begin")&&(u.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n+1).attr("begin"))),i){d="";for(var h in i)d+=h+":"+i[h]+";"}d&&(u.style=d),0===u.start&&(u.start=.2),l.times.push(u),s=e.trim(r.eq(n).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),l.text.push(s),0===l.times.start&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,s=[],n="";for(i=0;i<e.length;i++)n+=e.substring(i,i+1),t.test(n)&&(s.push(n.replace(t,"")),n="");return s.push(n),s})}(mejs.$),define("components/adapt-contrib-media/js/mediaelement-and-player-accessible-captions",function(){}),define("components/adapt-contrib-media/js/adapt-contrib-media",["require","components/adapt-contrib-media/js/mediaelement-and-player","components/adapt-contrib-media/js/mediaelement-and-player-accessible-captions","coreViews/componentView","coreJS/adapt"],function(e){function t(e){var i,s,n,o=e.attributes;if(o)for(i=o.length-1;i>=0;i-=1)n=o[i].name,"function"==typeof e[n]&&(e[n]=null);if(o=e.childNodes)for(s=o.length,i=0;i<s;i+=1)t(e.childNodes[i])}e("components/adapt-contrib-media/js/mediaelement-and-player");e("components/adapt-contrib-media/js/mediaelement-and-player-accessible-captions");var i=e("coreViews/componentView"),s=e("coreJS/adapt"),n=!1,o=i.extend({events:{"click .media-inline-transcript-button":"onToggleInlineTranscript"},preRender:function(){if(this.listenTo(s,"device:resize",this.onScreenSizeChanged),this.listenTo(s,"device:changed",this.onDeviceChanged),this.listenTo(s,"accessibility:toggle",this.onAccessibilityToggle),this.model.get("_media").source){var e=this.model.get("_media");e.source=e.source.replace(/^https?\:/,""),this.model.set("_media",e)}this.checkIfResetOnRevisit()},postRender:function(){this.setupPlayer()},setupPlayer:function(){this.model.get("_playerOptions")||this.model.set("_playerOptions",{});var e=this.model.get("_playerOptions");void 0===e.pluginPath&&(e.pluginPath="assets/"),void 0===e.features&&(e.features=["playpause","progress","current","duration"],this.model.get("_useClosedCaptions")&&e.features.unshift("tracks"),this.model.get("_allowFullScreen")&&!$("html").is(".ie9")&&e.features.push("fullscreen")),e.success=_.bind(this.onPlayerReady,this),this.model.get("_useClosedCaptions")&&(e.startLanguage=void 0===this.model.get("_startLanguage")?"en":this.model.get("_startLanguage"));var t=!(!s.config.has("_accessibility")||!s.config.get("_accessibility")._isActive);t&&(e.alwaysShowControls=!0,e.hideVideoControlsOnLoad=!1),void 0===e.alwaysShowControls&&(e.alwaysShowControls=!1),void 0===e.hideVideoControlsOnLoad&&(e.hideVideoControlsOnLoad=!0),this.addMediaTypeClass(),this.addThirdPartyFixes(e,_.bind(function(){this.$("audio, video").mediaelementplayer(e);try{this.model.get("_media").source&&this.$(".media-widget").addClass("external-source")}catch(e){console.log("ERROR! No _media property found in components.json for component "+this.model.get("_id"))}finally{this.setReadyStatus()}},this))},addMediaTypeClass:function(){var e=this.model.get("_media");if(e&&e.type){var t=e.type.replace(/\//,"-");this.$(".media-widget").addClass(t)}},addThirdPartyFixes:function(e,t){var i=this.model.get("_media");if(!i)return t();switch(i.type){case"video/vimeo":if(e.alwaysShowControls=!1,e.hideVideoControlsOnLoad=!0,e.features=[],n)return t();Modernizr.load({load:"assets/froogaloop.js",complete:function(){n=!0,t()}});break;default:t()}},setupEventListeners:function(){this.completionEvent=this.model.get("_setCompletionOn")?this.model.get("_setCompletionOn"):"play","inview"!==this.completionEvent?(this.onCompletion=_.bind(this.onCompletion,this),this.mediaElement.addEventListener(this.completionEvent,this.onCompletion)):this.$(".component-widget").on("inview",_.bind(this.inview,this))},setupPlayPauseToggle:function(){var e=this.mediaElement.player;return e?(e.options.clickToPlayPause=!1,this.onOverlayClick=_.bind(this.onOverlayClick,this),this.onMediaElementClick=_.bind(this.onMediaElementClick,this),this.$(".mejs-overlay-button").on("click",this.onOverlayClick),void this.$(".mejs-mediaelement").on("click",this.onMediaElementClick)):void console.log("Media.setupPlayPauseToggle: OOPS! there's no player reference.")},onOverlayClick:function(){var e=this.mediaElement.player;e&&e.play()},onMediaElementClick:function(e){var t=this.mediaElement.player;if(t){var i=t.media.paused;i||t.pause()}},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&this.model.reset(e)},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(".component-inner").off("inview"),this.setCompletionStatus()))},remove:function(){this.$(".mejs-overlay-button").off("click",this.onOverlayClick),this.$(".mejs-mediaelement").off("click",this.onMediaElementClick);var e=this.model.get("_playerOptions");delete e.success;var s=this.model.get("_media");if(s)switch(s.type){case"video/vimeo":this.$("iframe")[0].isRemoved=!0}if($("html").is(".ie8")){var n=this.$("object")[0];n&&(n.style.display="none")}if(this.mediaElement&&this.mediaElement.player){"inview"!==this.completionEvent&&this.mediaElement.removeEventListener(this.completionEvent,this.onCompletion);var o=this.mediaElement.player.id;t(this.$el[0]),this.mediaElement.player.remove(),mejs.players[o]&&delete mejs.players[o]}this.mediaElement&&(this.mediaElement.src="",$(this.mediaElement.pluginElement).remove(),delete this.mediaElement),i.prototype.remove.call(this)},onCompletion:function(){this.setCompletionStatus(),this.mediaElement.removeEventListener(this.completionEvent,this.onCompletion)},onDeviceChanged:function(){this.model.get("_media").source&&this.$(".mejs-container").width(this.$(".component-widget").width())},onPlayerReady:function(e,t){this.mediaElement=e,this.mediaElement.player||(this.mediaElement.player=mejs.players[this.$(".mejs-container").attr("id")]);var i=mejs.MediaFeatures.hasTouch;i&&this.setupPlayPauseToggle(),this.addThirdPartyAfterFixes(),this.setReadyStatus(),this.setupEventListeners()},addThirdPartyAfterFixes:function(){var e=this.model.get("_media");switch(e.type){case"video/vimeo":this.$(".mejs-container").attr("tabindex",0)}},onScreenSizeChanged:function(){this.$("audio, video").width(this.$(".component-widget").width())},onAccessibilityToggle:function(){this.showControls()},onToggleInlineTranscript:function(e){e&&e.preventDefault();var t=this.$(".media-inline-transcript-body-container"),i=this.$(".media-inline-transcript-button");t.hasClass("inline-transcript-open")?(t.slideUp(function(){$(window).resize()}),t.removeClass("inline-transcript-open"),i.html(this.model.get("_transcript").inlineTranscriptButton)):(t.slideDown(function(){$(window).resize()}).a11y_focus(),t.addClass("inline-transcript-open"),i.html(this.model.get("_transcript").inlineTranscriptCloseButton),this.model.get("_transcript")._setCompletionOnView!==!1&&this.setCompletionStatus())},showControls:function(){var e=!(!s.config.has("_accessibility")||!s.config.get("_accessibility")._isActive);if(e){if(!this.mediaElement.player)return;var t=this.mediaElement.player;t.options.alwaysShowControls=!0,t.options.hideVideoControlsOnLoad=!1,t.enableControls(),t.showControls(),this.$(".mejs-playpause-button button").attr({role:"button"});var i=$("<div role='region' aria-label='.'>");this.$(".mejs-playpause-button").prepend(i),this.$(".mejs-time, .mejs-time-rail").attr({"aria-hidden":"true"})}}});return s.register("media",o),o}),define("components/adapt-contrib-narrative/js/adapt-contrib-narrative",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({events:{"click .narrative-strapline-title":"openPopup","click .narrative-controls":"onNavigationClicked","click .narrative-indicators .narrative-progress":"onProgressClicked"},preRender:function(){this.listenTo(i,"device:changed",this.reRender,this),this.listenTo(i,"device:resize",this.resizeControl,this),this.listenTo(i,"notify:closed",this.closeNotify,this),this.setDeviceSize(),this.checkIfResetOnRevisit()},setDeviceSize:function(){"large"===i.device.screenSize?(this.$el.addClass("desktop").removeClass("mobile"),this.model.set("_isDesktop",!0)):(this.$el.addClass("mobile").removeClass("desktop"),this.model.set("_isDesktop",!1))},postRender:function(){this.renderState(),this.$(".narrative-slider").imageready(_.bind(function(){
this.setReadyStatus()},this)),this.setupNarrative()},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&(this.model.reset(e),this.model.set({_stage:0}),_.each(this.model.get("_items"),function(e){e._isVisited=!1}))},setupNarrative:function(){if(this.setDeviceSize(),this.model.has("_items")&&this.model.get("_items").length){this.model.set("_marginDir","left"),"rtl"==i.config.get("_defaultDirection")&&this.model.set("_marginDir","right"),this.model.set("_itemCount",this.model.get("_items").length),this.model.set("_active",!0),this.model.get("_stage")?this.setStage(this.model.get("_stage"),!0):this.setStage(0,!0),this.calculateWidths(),"large"===i.device.screenSize||this.model.get("_wasHotgraphic")||this.replaceInstructions(),this.setupEventListeners();var e=this.model.get("_hasNavigationInTextArea");if(1==e){var t=this.$(".narrative-indicators").width(),s=t/2;this.$(".narrative-indicators").css({marginLeft:"-"+s+"px"})}}},calculateWidths:function(){var e=this.$(".narrative-slide-container").width(),t=this.model.get("_itemCount"),i=this.$(".narrative-slider-graphic").css("margin-right"),s=""===i?0:parseInt(i),n=(e+s)*t;this.$(".narrative-slider-graphic").width(e),this.$(".narrative-strapline-header").width(e),this.$(".narrative-strapline-title").width(e),this.$(".narrative-slider").width(n),this.$(".narrative-strapline-header-inner").width(n);var o=this.model.get("_stage"),r=-(o*e);this.$(".narrative-slider").css("margin-"+this.model.get("_marginDir"),r),this.$(".narrative-strapline-header-inner").css("margin-"+this.model.get("_marginDir"),r),this.model.set("_finalItemLeft",n-e)},resizeControl:function(){var e=this.model.get("_isDesktop");this.setDeviceSize(),e!=this.model.get("_isDesktop")&&this.replaceInstructions(),this.calculateWidths(),this.evaluateNavigation()},reRender:function(){this.model.get("_wasHotgraphic")&&"large"==i.device.screenSize?this.replaceWithHotgraphic():this.resizeControl()},closeNotify:function(){this.evaluateCompletion()},replaceInstructions:function(){"large"===i.device.screenSize?this.$(".narrative-instruction-inner").html(this.model.get("instruction")).a11y_text():this.model.get("mobileInstruction")&&!this.model.get("_wasHotgraphic")&&this.$(".narrative-instruction-inner").html(this.model.get("mobileInstruction")).a11y_text()},replaceWithHotgraphic:function(){if(!i.componentStore.hotgraphic)throw"Hotgraphic not included in build";var e=i.componentStore.hotgraphic,t=this.prepareHotgraphicModel(),s=new e({model:t}),n=$(".component-container",$("."+this.model.get("_parentId")));n.append(s.$el),this.remove(),$.a11y_update(),_.defer(function(){i.trigger("device:resize")})},prepareHotgraphicModel:function(){var e=this.model;return e.set("_component","hotgraphic"),e.set("body",e.get("originalBody")),e.set("instruction",e.get("originalInstruction")),e},moveSliderToIndex:function(e,t,s){var n=parseInt(this.$(".narrative-slider-graphic").css("margin-right")),o=this.$(".narrative-slide-container").width()+n,r={};t&&!i.config.get("_disableAnimation")?(r["margin-"+this.model.get("_marginDir")]=-(o*e),this.$(".narrative-slider").velocity("stop",!0).velocity(r),this.$(".narrative-strapline-header-inner").velocity("stop",!0).velocity(r,{complete:s})):(r["margin-"+this.model.get("_marginDir")]=-(o*e),this.$(".narrative-slider").css(r),this.$(".narrative-strapline-header-inner").css(r),s())},setStage:function(e,t){if(this.model.set("_stage",e),this.model.get("_isDesktop")){var i=this.getCurrentItem(e);i._isVisited=!0}this.$(".narrative-progress:visible").removeClass("selected").eq(e).addClass("selected"),this.$(".narrative-slider-graphic").children(".controls").a11y_cntrl_enabled(!1),this.$(".narrative-slider-graphic").eq(e).children(".controls").a11y_cntrl_enabled(!0),this.$(".narrative-content-item").addClass("narrative-hidden").a11y_on(!1).eq(e).removeClass("narrative-hidden").a11y_on(!0),this.$(".narrative-strapline-title").a11y_cntrl_enabled(!1).eq(e).a11y_cntrl_enabled(!0),this.evaluateNavigation(),this.evaluateCompletion(),this.moveSliderToIndex(e,!t,_.bind(function(){this.model.get("_isDesktop")?t||this.$(".narrative-content-item").eq(e).a11y_focus():t||this.$(".narrative-strapline-title").a11y_focus()},this))},constrainStage:function(e){return e>this.model.get("_items").length-1?e=this.model.get("_items").length-1:e<0&&(e=0),e},constrainXPosition:function(e,t,i){t>0&&i>0&&(t=e+i/(.1*t));var s=this.model.get("_finalItemLeft");if(t<-s&&i<0){var n=Math.abs(t+s);t=e+i/(.1*n)}return t},evaluateNavigation:function(){var e=this.model.get("_stage"),t=this.model.get("_itemCount");0==e?(this.$(".narrative-controls").addClass("narrative-hidden"),t>1&&this.$(".narrative-control-right").removeClass("narrative-hidden")):(this.$(".narrative-control-left").removeClass("narrative-hidden"),e==t-1?this.$(".narrative-control-right").addClass("narrative-hidden"):this.$(".narrative-control-right").removeClass("narrative-hidden"))},getNearestItemIndex:function(){var e=parseInt(this.$(".narrative-slider").css("margin-left")),t=this.$(".narrative-slider-graphic").width(),i=e/t,s=this.model.get("_stage"),n=s-Math.abs(i);return n<-.3?s++:n>.3&&s--,this.constrainStage(s)},getCurrentItem:function(e){return this.model.get("_items")[e]},getVisitedItems:function(){return _.filter(this.model.get("_items"),function(e){return e._isVisited})},evaluateCompletion:function(){this.getVisitedItems().length===this.model.get("_items").length&&this.trigger("allItems")},moveElement:function(e,t){var i=parseInt(e.css("margin-left")),s=i+t;s=this.constrainXPosition(i,s,t),e.css("margin-"+this.model.get("_marginDir"),s+"px")},openPopup:function(e){e.preventDefault();var t=this.getCurrentItem(this.model.get("_stage")),s={title:t.title,body:t.body};t._isVisited=!0,i.trigger("notify:popup",s)},onNavigationClicked:function(e){if(e.preventDefault(),this.model.get("_active")){var t=this.model.get("_stage"),i=this.model.get("_itemCount");$(e.currentTarget).hasClass("narrative-control-right")?t++:$(e.currentTarget).hasClass("narrative-control-left")&&t--,t=(t+i)%i,this.setStage(t)}},onProgressClicked:function(e){e.preventDefault();var t=$(e.target).index();this.setStage(t)},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(".component-inner").off("inview"),this.setCompletionStatus()))},onCompletion:function(){this.setCompletionStatus(),this.completionEvent&&"inview"!=this.completionEvent&&this.off(this.completionEvent,this)},setupEventListeners:function(){this.completionEvent=this.model.get("_setCompletionOn")?this.model.get("_setCompletionOn"):"allItems","inview"!==this.completionEvent&&this.model.get("_items").length>1?this.on(this.completionEvent,_.bind(this.onCompletion,this)):this.$(".component-widget").on("inview",_.bind(this.inview,this))}});return i.register("narrative",s),s}),function(e){"use strict";"function"==typeof define&&define.amd?define("components/adapt-contrib-slider/js/rangeslider.js",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}function i(e,t){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)}function s(e,t){return t=t||100,function(){if(!e.debouncing){var i=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,i),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}function n(e){return e&&(0===e.offsetWidth||0===e.offsetHeight||e.open===!1)}function o(e){for(var t=[],i=e.parentNode;n(i);)t.push(i),i=i.parentNode;return t}function r(e,t){function i(e){"undefined"!=typeof e.open&&(e.open=!e.open)}var s=o(e),n=s.length,r=[],a=e[t];if(n){for(var l=0;l<n;l++)r[l]=s[l].style.cssText,s[l].style.setProperty?s[l].style.setProperty("display","block","important"):s[l].style.cssText+=";display: block !important",s[l].style.height="0",s[l].style.overflow="hidden",s[l].style.visibility="hidden",i(s[l]);a=e[t];for(var c=0;c<n;c++)s[c].style.cssText=r[c],i(s[c])}return a}function a(e,t){var i=parseFloat(e);return Number.isNaN(i)?t:i}function l(e){return e.charAt(0).toUpperCase()+e.substr(1)}function c(t,n){if(this.$window=e(window),this.$document=e(document),this.$element=e(t),this.options=e.extend({},p,n),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=m.orientation[this.orientation].dimension,this.DIRECTION=m.orientation[this.orientation].direction,this.DIRECTION_STYLE=m.orientation[this.orientation].directionStyle,this.COORDINATE=m.orientation[this.orientation].coordinate,this.polyfill&&h)return!1;this.identifier="js-"+d+"-"+u++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+this.identifier,s(function(){i(function(){o.update(!1,!1)},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){if(!t||t.origin!==o.identifier){var i=e.target.value,s=o.getPositionFromValue(i);o.setPosition(s)}})}Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!==e};var d="rangeslider",u=0,h=t(),p={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},m={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};return c.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},c.prototype.update=function(e,t){e=e||!1,e&&(this.min=a(this.$element[0].getAttribute("min"),0),this.max=a(this.$element[0].getAttribute("max"),100),this.value=a(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=a(this.$element[0].getAttribute("step"),1)),this.handleDimension=r(this.$handle[0],"offset"+l(this.DIMENSION)),this.rangeDimension=r(this.$range[0],"offset"+l(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},c.prototype.handleDown=function(e){if(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var t=this.getRelativePosition(e),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],s=this.getPositionFromNode(this.$handle[0])-i,n="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(n),t>=s&&t<s+this.handleDimension&&(this.grabPos=t-s)}},c.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(e),i="vertical"===this.orientation?this.maxHandlePos-(t-this.grabPos):t-this.grabPos;this.setPosition(i)},c.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},c.prototype.cap=function(e,t,i){return e<t?t:e>i?i:e},c.prototype.setPosition=function(e,t){var i,s;void 0===t&&(t=!0),i=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),s=this.getPositionFromValue(i),this.$fill[0].style[this.DIMENSION]=i==this.max?"100%":s+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=s+"px",this.setValue(i),this.position=s,this.value=i,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(s,i)},c.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},c.prototype.getRelativePosition=function(e){var t=l(this.COORDINATE),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],s=0;return"undefined"!=typeof e["page"+t]?s=e["client"+t]:"undefined"!=typeof e.originalEvent["client"+t]?s=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&"undefined"!=typeof e.originalEvent.touches[0]["client"+t]?s=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&"undefined"!=typeof e.currentPoint[this.COORDINATE]&&(s=e.currentPoint[this.COORDINATE]),s-i},c.prototype.getPositionFromValue=function(e){var t,i;return t=(e-this.min)/(this.max-this.min),i=Number.isNaN(t)?0:t*this.maxHandlePos},c.prototype.getValueFromPosition=function(e){var t,i;return t=e/(this.maxHandlePos||1),i=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},c.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},c.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+d),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},e.fn[d]=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=e(this),n=s.data("plugin_"+d);n||s.data("plugin_"+d,n=new c(this,t)),"string"==typeof t&&n[t].apply(n,i)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"}),define("components/adapt-contrib-slider/js/adapt-contrib-slider",["coreViews/questionView","coreJS/adapt","./rangeslider.js"],function(e,t,i){var s=e.extend({tempValue:!0,events:{"click .slider-scale-number":"onNumberSelected",'focus input[type="range"]':"onHandleFocus",'blur input[type="range"]':"onHandleBlur"},resetQuestionOnRevisit:function(){this.setAllItemsEnabled(!0),this.deselectAllItems(),this.resetQuestion()},setupQuestion:function(){this.model.get("_items")||this.setupModelItems(),this.restoreUserAnswers(),this.model.get("_isSubmitted")||this.selectItem(0,!0)},setupRangeslider:function(){this.$sliderScaleMarker=this.$(".slider-scale-marker"),this.$slider=this.$('input[type="range"]'),this.model.has("_scaleStep")&&this.$slider.attr({step:this.model.get("_scaleStep")}),this.$slider.rangeslider({polyfill:!1,onSlide:_.bind(this.handleSlide,this)}),this.oldValue=0,this._deferEnable&&this.setAllItemsEnabled(!0)},handleSlide:function(e,t){if(this.oldValue!==t){if("right"==this.model.get("_marginDir")&&this.tempValue&&void 0==this.model.get("_userAnswer")){t=this.model.get("_items").length-t+1,this.tempValue=!1;var i=(this.mapIndexToPixels(t),this.$(".rangeslider").width()),s=parseInt(this.$(".rangeslider__handle").css("left")),n=this.$(".rangeslider__fill").width();s=i-s-this.$(".rangeslider__handle").width(),n=i-n,this.$(".rangeslider__handle").css("left",s),this.$(".rangeslider__fill").width(n)}var o=this.getIndexFromValue(t),r=this.mapIndexToPixels(o);this.selectItem(o,!1),this.animateToPosition(r),this.oldValue=t,this.tempValue=!0}},setupModelItems:function(){for(var e=[],i=this.model.get("_correctAnswer"),s=this.model.get("_correctRange"),n=this.model.get("_scaleStart"),o=this.model.get("_scaleEnd"),r=this.model.get("_scaleStep")||1,a=n;a<=o;a+=r)i?e.push({value:a,selected:!1,correct:a==i}):e.push({value:a,selected:!1,correct:a>=s._bottom&&a<=s._top});this.model.set("_items",e),this.model.set("_marginDir","rtl"===t.config.get("_defaultDirection")?"right":"left")},restoreUserAnswers:function(){if(!this.model.get("_isSubmitted"))return void this.model.set({_selectedItem:{},_userAnswer:void 0});for(var e=this.model.get("_items"),t=this.model.get("_userAnswer"),i=0,s=e.length;i<s;i++){var n=e[i];if(n.value==t){this.model.set("_selectedItem",n),this.selectItem(this.getIndexFromValue(n.value),!0);break}}this.setQuestionAsSubmitted(),this.markQuestion(),this.setScore(),this.showMarking(),this.setupFeedback()},disableQuestion:function(){this.setAllItemsEnabled(!1)},enableQuestion:function(){this.setAllItemsEnabled(!0)},setAllItemsEnabled:function(e){e?this.$slider?(this.$(".slider-widget").removeClass("disabled"),this.$slider.prop("disabled",!1),this.$slider.rangeslider("update",!0)):this._deferEnable=!0:(this.$(".slider-widget").addClass("disabled"),this.$slider.prop("disabled",!0),this.$slider.rangeslider("update",!0))},onQuestionRendered:function(){this.setupRangeslider(),this.setScalePositions(),this.onScreenSizeChanged(),this.showScaleMarker(!0),this.listenTo(t,"device:resize",this.onScreenSizeChanged),this.setAltText(this.model.get("_scaleStart")),this.setReadyStatus()},animateToPosition:function(e){this.$sliderScaleMarker&&("right"==this.model.get("_marginDir")?this.$sliderScaleMarker.velocity("stop").velocity({right:e},{duration:200,easing:"linear"}):this.$sliderScaleMarker.velocity("stop").velocity({left:e},{duration:200,easing:"linear"}))},getIndexFromValue:function(e){var t=this.model.get("_scaleStart"),i=this.model.get("_scaleEnd");return Math.floor(this.mapValue(e,t,i,0,this.model.get("_items").length-1))},setAltText:function(e){this.$(".slider-handle").attr("aria-valuenow",e)},mapIndexToPixels:function(e,t){var i=this.model.get("_items").length,s=t?t.width():this.$(".slider-scaler").width();return Math.round(this.mapValue(e,0,i-1,0,s))},mapPixelsToIndex:function(e){var t=this.model.get("_items").length,i=this.$(".slider-sliderange").width();return Math.round(this.mapValue(e,0,i,0,t-1))},normalise:function(e,t,i){var s=i-t;return(e-t)/s},mapValue:function(e,t,i,s,n){var o=this.normalise(e,t,i);return o*(n-s)+s},onHandleFocus:function(e){e.preventDefault(),this.$slider.on("keydown",_.bind(this.onKeyDown,this))},onHandleBlur:function(e){e.preventDefault(),this.$slider.off("keydown")},onKeyDown:function(e){if(9!=e.which){e.preventDefault();var t=this.getIndexFromValue(this.model.get("_selectedItem").value);switch(e.which){case 40:case 37:t=Math.max(t-1,0);break;case 38:case 39:t=Math.min(t+1,this.model.get("_items").length-1)}this.selectItem(t),"number"==typeof t&&this.showScaleMarker(!0),this.animateToPosition(this.mapIndexToPixels(t)),this.setSliderValue(this.getValueFromIndex(t)),this.setAltText(this.getValueFromIndex(t))}},onNumberSelected:function(e){if(e.preventDefault(),this.tempValue=!1,!this.model.get("_isInteractionComplete")&&!this.$slider.prop("disabled")){var t=parseInt($(e.currentTarget).attr("data-id")),i=this.getIndexFromValue(t);this.selectItem(i),this.animateToPosition(this.mapIndexToPixels(i)),this.setAltText(t),this.setSliderValue(t)}},getValueFromIndex:function(e){return this.model.get("_items")[e].value},resetControlStyles:function(){this.$(".slider-handle").empty(),this.showScaleMarker(!1),this.$(".slider-bar").animate({width:"0px"}),this.setSliderValue(this.model.get("_items")[0].value)},canSubmit:function(){return!0},onCannotSubmit:function(){},storeUserAnswer:function(){this.model.set("_userAnswer",this.model.get("_selectedItem").value)},isCorrect:function(){var e=0;return _.each(this.model.get("_items"),function(t,i){t.selected&&t.correct&&(this.model.set("_isAtLeastOneCorrectSelection",!0),e++)},this),this.model.set("_numberOfCorrectAnswers",e),!!this.model.get("_isAtLeastOneCorrectSelection")},setScore:function(){var e=this.model.get("_numberOfCorrectAnswers"),t=this.model.get("_questionWeight"),i=t*e;this.model.set("_score",i)},setSliderValue:function(e){this.$slider&&this.$slider.val(e).change()},showMarking:function(){this.model.get("_canShowMarking")&&this.$(".slider-widget").removeClass("correct incorrect").addClass(this.model.get("_selectedItem").correct?"correct":"incorrect")},isPartlyCorrect:function(){return this.model.get("_isAtLeastOneCorrectSelection")},resetUserAnswer:function(){this.model.set({_selectedItem:{},_userAnswer:void 0})},resetQuestion:function(){this.selectItem(0,!0),this.animateToPosition(0),this.resetControlStyles(),this.showScaleMarker(!0),this.setAltText(this.model.get("_scaleStart"))},setScalePositions:function(){var e=this.model.get("_items").length;_.each(this.model.get("_items"),function(t,i){var s=this.normalise(i,0,e-1);this.$(".slider-scale-number").eq(i).data("normalisedPosition",s)},this)},showScale:function(){if(this.$(".slider-markers").empty(),this.model.get("_showScale")===!1)this.$(".slider-markers").eq(0).css({display:"none"}),this.model.get("_showScaleIndicator")?this.$(".slider-scale-numbers").eq(0).css({visibility:"hidden"}):this.$(".slider-scale-numbers").eq(0).css({display:"none"});else{for(var e=this.$(".slider-scaler"),t=this.$(".slider-markers"),i=0,s=this.model.get("_items").length;i<s;i++)t.append("<div class='slider-line component-item-color'>"),$(".slider-line",t).eq(i).css({left:this.mapIndexToPixels(i,e)+"px"});for(var n=e.width(),o=this.$(".slider-scale-number"),i=0,s=this.model.get("_items").length;i<s;i++){var r=o.eq(i),a=Math.round(r.data("normalisedPosition")*n);$("html").hasClass("ie9")&&"right"==this.model.get("_marginDir")?r.css({right:a}):r.css({left:a})}}},showLabels:function(){this.model.get("labelStart")||this.model.get("labelEnd")||this.$(".slider-scale-labels").eq(0).css({display:"none"})},remapSliderBar:function(){var e=this.$(".slider-scaler"),t=this.getIndexFromValue(this.model.get("_selectedItem").value),i=this.mapIndexToPixels(t,e);this.$(".slider-handle").css({left:i+"px"}),this.$(".slider-scale-marker").css({left:i+"px"}),this.$(".slider-bar").width(i)},onScreenSizeChanged:function(){this.showScale(),this.showLabels(),this.remapSliderBar(),this.$(".slider-widget").hasClass("show-user-answer")?this.hideCorrectAnswer():this.$(".slider-widget").hasClass("show-correct-answer")&&this.showCorrectAnswer()},showCorrectAnswer:function(){var e=[];if(this.model.has("_correctAnswer"))var t=this.model.get("_correctAnswer");if(this.model.has("_correctRange"))var i=this.model.get("_correctRange")._bottom,s=this.model.get("_correctRange")._top,n=this.model.has("_scaleStep")?this.model.get("_scaleStep"):1;if(this.showScaleMarker(!1),t)e.push(t);else if(void 0!==i&&void 0!==s)for(var o=this.model.get("_correctRange")._bottom,r=this.model.get("_correctRange")._top;o<=r;)e.push(o),o+=n;else console.log("adapt-contrib-slider::WARNING: no correct answer or correct range set in JSON");var a=e[Math.floor(e.length/2)];this.animateToPosition(this.mapIndexToPixels(this.getIndexFromValue(a))),this.showModelAnswers(e),this.setSliderValue(a)},showModelAnswers:function(e){var t=this.$(".slider-modelranges");_.each(e,function(e,i){t.append($("<div class='slider-model-answer component-item-color component-item-text-color'>"));var s=$(this.$(".slider-modelranges .slider-model-answer")[i]),n=this.mapIndexToPixels(this.getIndexFromValue(this.model.get("_selectedItem").value));this.model.get("_showNumber")&&s.html(e),s.css({left:n}).fadeIn(0,_.bind(function(){s.animate({left:this.mapIndexToPixels(this.getIndexFromValue(e))})},this))},this)},hideCorrectAnswer:function(){var e=this.getIndexFromValue(this.model.get("_userAnswer"));this.$(".slider-modelranges").empty(),this.showScaleMarker(!0),this.selectItem(e,!0),this.animateToPosition(this.mapIndexToPixels(e)),this.setSliderValue(this.model.get("_userAnswer"))},selectItem:function(e,t){this.$el.a11y_selected(!1),_.each(this.model.get("_items"),function(i,s){i.selected=s==e,i.selected&&(this.model.set("_selectedItem",i),this.$('.slider-scale-number[data-id="'+i.value+'"]').a11y_selected(!0,t))},this),this.showNumber(!0)},deselectAllItems:function(){_.each(this.model.get("_items"),function(e){e.selected=!1},this)},showScaleMarker:function(e){var t=this.$(".slider-scale-marker");this.model.get("_showScaleIndicator")&&(this.showNumber(e),e?t.addClass("display-block"):t.removeClass("display-block"))},showNumber:function(e){var t=this.$(".slider-scale-marker");this.model.get("_showNumber")&&(e?t.html(this.model.get("_selectedItem").value):t.html="")},getResponse:function(){return this.model.get("_userAnswer").toString()},getResponseType:function(){return"numeric"}});return t.register("slider",s),s}),define("components/adapt-contrib-text/js/adapt-contrib-text",["require","coreViews/componentView","coreJS/adapt"],function(e){var t=e("coreViews/componentView"),i=e("coreJS/adapt"),s=t.extend({preRender:function(){this.checkIfResetOnRevisit()},postRender:function(){this.setReadyStatus(),this.setupInview()},setupInview:function(){var e=this.getInviewElementSelector();e?(this.model.set("inviewElementSelector",e),this.$(e).on("inview",_.bind(this.inview,this))):this.setCompletionStatus()},getInviewElementSelector:function(){return this.model.get("body")?".component-body":this.model.get("instruction")?".component-instruction":this.model.get("displayTitle")?".component-title":null},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");e&&this.model.reset(e)},inview:function(e,t,i,s){t&&("top"===s?this._isVisibleTop=!0:"bottom"===s?this._isVisibleBottom=!0:(this._isVisibleTop=!0,this._isVisibleBottom=!0),this._isVisibleTop&&this._isVisibleBottom&&(this.$(this.model.get("inviewElementSelector")).off("inview"),this.setCompletionStatus()))},remove:function(){this.model.has("inviewElementSelector")&&this.$(this.model.get("inviewElementSelector")).off("inview"),t.prototype.remove.call(this)}},{template:"text"});return i.register("text",s),s}),define("components/adapt-contrib-textInput/js/adapt-contrib-textInput",["require","coreViews/questionView","coreJS/adapt"],function(e){var t=e("coreViews/questionView"),i=e("coreJS/adapt"),s=65536,n=t.extend({events:{"focus input":"clearValidationError"},resetQuestionOnRevisit:function(){this.setAllItemsEnabled(!1),this.resetQuestion()},setupQuestion:function(){this.model.set("_genericAnswerIndexOffset",s),this.setupItemIndexes(),this.restoreUserAnswer(),this.setupRandomisation()},setupRandomisation:function(){this.model.get("_isRandom")&&this.model.get("_isEnabled")&&this.model.set("_items",_.shuffle(this.model.get("_items")))},setupItemIndexes:function(){_.each(this.model.get("_items"),function(e,t){void 0===e._index&&(e._index=t),void 0===e._answerIndex&&(e._answerIndex=-1)})},restoreUserAnswer:function(){if(this.model.get("_isSubmitted")){var e=this.model.get("_userAnswer"),t=this.model.get("_answers");_.each(this.model.get("_items"),function(i){var n=e[i._index];n>=s?(i.userAnswer=t[n-s],i._answerIndex=n):n>-1?(i.userAnswer=i._answers[n],i._answerIndex=n):(void 0===i.userAnswer&&(i.userAnswer="******"),i._answerIndex=-1),i.userAnswer instanceof Array&&(i.userAnswer=i.userAnswer[0])}),this.setQuestionAsSubmitted(),this.markQuestion(),this.setScore(),this.showMarking(),this.setupFeedback()}},disableQuestion:function(){this.setAllItemsEnabled(!1)},enableQuestion:function(){this.setAllItemsEnabled(!0)},setAllItemsEnabled:function(e){_.each(this.model.get("_items"),function(t,i){var s=this.$("input").eq(i);e?s.prop("disabled",!1):s.prop("disabled",!0)},this)},onQuestionRendered:function(){this.setReadyStatus()},clearValidationError:function(){this.$(".textinput-item-textbox").removeClass("textinput-validation-error")},canSubmit:function(){var e=!0;return this.$(".textinput-item-textbox").each(function(){""==$(this).val()&&(e=!1)}),e},onCannotSubmit:function(){this.showValidationError()},showValidationError:function(){this.$(".textinput-item-textbox").addClass("textinput-validation-error")},storeUserAnswer:function(){var e=this.model.get("_items");_.each(e,function(e,t){e.userAnswer=this.$(".textinput-item-textbox").eq(t).val()},this),this.isCorrect();var t=new Array(e.length);_.each(e,function(e,i){t[e._index]=e._answerIndex}),this.model.set("_userAnswer",t)},isCorrect:function(){return this.model.get("_answers")?this.markGenericAnswers():this.markSpecificAnswers(),!_.contains(_.pluck(this.model.get("_items"),"_isCorrect"),!1)},markGenericAnswers:function(){var e=0,t=this.model.get("_answers").slice(),i=[];_.each(this.model.get("_items"),function(n,o){_.each(t,function(t,o){if(this.checkAnswerIsCorrect(t,n.userAnswer)){if(_.indexOf(i,o)>-1)return;i.push(o),n._isCorrect=!0,n._answerIndex=o+s,e++,this.model.set("_numberOfCorrectAnswers",e),this.model.set("_isAtLeastOneCorrectSelection",!0)}},this),n._isCorrect||(n._isCorrect=!1)},this)},markSpecificAnswers:function(){var e=0,t=0;_.each(this.model.get("_items"),function(i,s){if(i._answers){var n=i.userAnswer||"";this.checkAnswerIsCorrect(i._answers,n)?(e++,i._isCorrect=!0,i._answerIndex=_.indexOf(i._answers,this.cleanupUserAnswer(n)),this.model.set("_numberOfCorrectAnswers",e),this.model.set("_isAtLeastOneCorrectSelection",!0)):(i._isCorrect=!1,i._answerIndex=-1),t++}},this)},checkAnswerIsCorrect:function(e,t){var i=this.cleanupUserAnswer(t),s=_.filter(e,function(e){return this.cleanupUserAnswer(e)==i},this),n=s&&s.length>0;return n&&this.model.set("_hasAtLeastOneCorrectSelection",!0),n},cleanupUserAnswer:function(e){return this.model.get("_allowsAnyCase")&&(e=e.toLowerCase()),this.model.get("_allowsPunctuation")&&(e=e.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,""),e=e.replace(/(  +)+/g," ")),$.trim(e)},setScore:function(){var e=this.model.get("_numberOfCorrectAnswers"),t=this.model.get("_questionWeight"),i=this.model.get("_items").length,s=t*e/i;this.model.set("_score",s)},showMarking:function(){this.model.get("_canShowMarking")&&_.each(this.model.get("_items"),function(e,t){var i=this.$(".textinput-item").eq(t);i.removeClass("correct incorrect").addClass(e._isCorrect?"correct":"incorrect")},this)},isPartlyCorrect:function(){return this.model.get("_isAtLeastOneCorrectSelection")},resetUserAnswer:function(){_.each(this.model.get("_items"),function(e){e._isCorrect=!1,e.userAnswer=""},this)},resetQuestion:function(){this.$(".textinput-item-textbox").prop("disabled",!this.model.get("_isEnabled")).val(""),this.model.set({_isAtLeastOneCorrectSelection:!1,_isCorrect:void 0})},showCorrectAnswer:function(){if(this.model.get("_answers")){var e=this.model.get("_answers");_.each(this.model.get("_items"),function(t,i){this.$(".textinput-item-textbox").eq(i).val(e[i][0])},this)}else _.each(this.model.get("_items"),function(e,t){this.$(".textinput-item-textbox").eq(t).val(e._answers[0])},this)},hideCorrectAnswer:function(){_.each(this.model.get("_items"),function(e,t){this.$(".textinput-item-textbox").eq(t).val(e.userAnswer)},this)},getResponse:function(){return _.pluck(this.model.get("_items"),"userAnswer").join("[,]")},getResponseType:function(){return"fill-in"}});return i.register("textinput",n),n}),define("menu/adapt-contrib-boxMenu/js/adapt-contrib-boxmenu",["coreJS/adapt","coreViews/menuView"],function(e,t){
var i=t.extend({postRender:function(){var e=0;this.model.getChildren().each(function(t){t.get("_isAvailable")&&(e++,t.set("_nthChild",e),this.$(".menu-container-inner").append(new s({model:t}).$el))})}},{template:"boxmenu"}),s=t.extend({events:{"click button":"onClickMenuItemButton"},className:function(){var e=this.model.get("_nthChild");return["menu-item","menu-item-"+this.model.get("_id"),this.model.get("_classes"),this.model.get("_isVisited")?"visited":"",this.model.get("_isComplete")?"completed":"",this.model.get("_isLocked")?"locked":"","nth-child-"+e,e%2===0?"nth-child-even":"nth-child-odd"].join(" ")},preRender:function(){this.model.checkCompletionStatus(),this.model.checkInteractionCompletionStatus()},postRender:function(){var e=this.model.get("_graphic");e&&e.src&&e.src.length>0?this.$el.imageready(_.bind(function(){this.setReadyStatus()},this)):this.setReadyStatus()},onClickMenuItemButton:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.get("_isLocked")||Backbone.history.navigate("#/id/"+this.model.get("_id"),{trigger:!0})}},{template:"boxmenu-item"});e.on("router:menu",function(e){$("#wrapper").append(new i({model:e}).$el)})}),define("theme/adapt-contrib-vanilla/js/theme-block",["require","coreJS/adapt","backbone"],function(e){var t=e("coreJS/adapt"),i=e("backbone"),s=i.View.extend({initialize:function(){this.setStyles(),this.listenTo(t,"device:resize",this.setStyles),this.listenTo(t,"remove",this.remove)},setStyles:function(){this.setBackground(),this.setMinHeight(),this.setDividerBlock()},setBackground:function(){var e=this.model.get("_themeBlockConfig")._backgroundColor;e&&this.$el.addClass(e)},setMinHeight:function(){var e=0,i=this.model.get("_themeBlockConfig")._minimumHeights;i&&(e="large"==t.device.screenSize?i._large:"medium"==t.device.screenSize?i._medium:i._small),this.$el.css({minHeight:e+"px"})},setDividerBlock:function(){var e=this.model.get("_themeBlockConfig")._isDividerBlock;e&&this.$el.addClass("divider-block")}});return s}),define("theme/adapt-contrib-vanilla/js/vanilla",["require","coreJS/adapt","backbone","theme/adapt-contrib-vanilla/js/theme-block"],function(e){var t=e("coreJS/adapt"),i=e("backbone"),s=e("theme/adapt-contrib-vanilla/js/theme-block");t.on("blockView:postRender",function(e){var t=e.model.get("_theme");t&&new s({model:new i.Model({_themeBlockConfig:t}),el:e.$el})})}),define("plugins",["extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension","extensions/adapt-contrib-bookmarking/js/adapt-contrib-bookmarking","extensions/adapt-contrib-languagePicker/js/adapt-languagePicker","extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress","extensions/adapt-contrib-resources/js/adapt-contrib-resources","extensions/adapt-contrib-spoor/js/adapt-contrib-spoor","extensions/adapt-contrib-trickle/js/adapt-contrib-trickle","extensions/adapt-contrib-tutor/js/adapt-contrib-tutor","extensions/adapt-prlx/js/adapt-prlx","components/adapt-contrib-accordion/js/adapt-contrib-accordion","components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults","components/adapt-contrib-blank/js/adapt-contrib-blank","components/adapt-contrib-gmcq/js/adapt-contrib-gmcq","components/adapt-contrib-graphic/js/adapt-contrib-graphic","components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic","components/adapt-contrib-matching/js/adapt-contrib-matching","components/adapt-contrib-mcq/js/adapt-contrib-mcq","components/adapt-contrib-media/js/adapt-contrib-media","components/adapt-contrib-narrative/js/adapt-contrib-narrative","components/adapt-contrib-slider/js/adapt-contrib-slider","components/adapt-contrib-text/js/adapt-contrib-text","components/adapt-contrib-textInput/js/adapt-contrib-textInput","menu/adapt-contrib-boxMenu/js/adapt-contrib-boxmenu","theme/adapt-contrib-vanilla/js/vanilla"],function(){});