define("core/js/models/lockingModel",["backbone"],function(){var e=Backbone.Model.prototype.set;_.extend(Backbone.Model.prototype,{set:function(t,i,s){var n=!this.lockedAttributes||"object"==typeof t||"boolean"!=typeof i||!this.isLocking(t);if(n)return e.apply(this,arguments);s=s||{};var o=s&&s.pluginName;o||(console.error("Must supply a pluginName to change a locked attribute"),s.pluginName="compatibility");var a=s.pluginName;void 0!==this.defaults[t]&&(this.lockedAttributes[t]=!this.defaults[t]);var r=this.lockedAttributes[t],c=r===i;if(c)return this.setLockState(t,!0,{pluginName:a,skipcheck:!0}),e.call(this,t,r);this.setLockState(t,!1,{pluginName:a,skipcheck:!0});var l=this.getLockCount(t,{skipcheck:!0});return 0===l?e.call(this,t,!r):this},setLocking:function(e,t){this.isLocking(e)||(this.lockedAttributes||(this.lockedAttributes={}),this.lockedAttributes[e]=t)},unsetLocking:function(e){this.isLocking(e)&&this.lockedAttributes&&(delete this.lockedAttributes[e],delete this._lockedAttributesValues[e],0===_.keys(this.lockedAttributes).length&&(delete this.lockedAttributes,delete this._lockedAttributesValues))},isLocking:function(e){var t=void 0===e,i=void 0!==this.lockedAttributes;if(t)return i;if(!i)return!1;var s=void 0!==this.lockedAttributes[e];return!!s&&(void 0===this._lockedAttributesValues&&(this._lockedAttributesValues={}),void 0===this._lockedAttributesValues[e]&&(this._lockedAttributesValues[e]={}),!0)},isLocked:function(e,t){var i=t&&t.skipcheck;if(!i){var s=!this.isLocking(e);if(s)return}return this.getLockCount(e)>0},getLockCount:function(e,t){var i=t&&t.skipcheck;if(!i){var s=!this.isLocking(e);if(s)return}var n=t&&t.pluginName;if(n)return this._lockedAttributesValues[e][t.pluginName]?1:0;var o=_.values(this._lockedAttributesValues[e]),a=_.reduce(o,function(e,t){return e+(t?1:0)},0);return a},setLockState:function(e,t,i){var s=i&&i.skipcheck;if(!s){var n=!this.isLocking(e);if(n)return this}var o=i&&i.pluginName;return o||(console.error("Must supply a pluginName to set a locked attribute lock value"),i.pluginName="compatibility"),t?this._lockedAttributesValues[e][i.pluginName]=t:delete this._lockedAttributesValues[e][i.pluginName],this}})}),define("core/js/helpers",["handlebars"],function(e){var t={lowercase:function(e){return e.toLowerCase()},capitalise:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},inc:function(e){return e+1},dec:function(e){return e-1},odd:function(e){return(e+1)%2===0?"even":"odd"},equals:function(e,i,s){return t.compare.call(this,e,"==",i,s)},compare:function(e,t,i,s){switch(t){case"===":if(e===i)return s.fn(this);break;case"=":case"==":if(e==i)return s.fn(this);break;case">=":if(e>=i)return s.fn(this);break;case"<=":if(e<=i)return s.fn(this);break;case">":if(e>i)return s.fn(this);break;case"<":if(e<i)return s.fn(this)}return s.inverse(this)},math:function(e,t,i,s){switch(e=parseFloat(e),i=parseFloat(i),t){case"+":return e+i;case"-":return e-i;case"*":return e*i;case"/":return e/i;case"%":return e%i}},compile:function(t){return e.compile(t)(this)},compile_a11y_text:function(i){return e.helpers.a11y_text.call(this,t.compile.call(this,i))},compile_a11y_normalize:function(i){return e.helpers.a11y_normalize.call(this,t.compile.call(this,i))}};t.if_value_equals=t.equals,t.numbers=t.inc,t.lowerCase=t.lowercase;for(var i in t)t.hasOwnProperty(i)&&e.registerHelper(i,t[i]);return t}),define("core/js/adapt",["coreModels/lockingModel","coreHelpers"],function(e,t){var i=Backbone.Model.extend({defaults:{_canScroll:!0,_outstandingCompletionChecks:0},lockedAttributes:{_canScroll:!1},checkingCompletion:function(){var e=this.get("_outstandingCompletionChecks");this.set("_outstandingCompletionChecks",++e)},checkedCompletion:function(){var e=this.get("_outstandingCompletionChecks");this.set("_outstandingCompletionChecks",--e)},deferUntilCompletionChecked:function(e){if(0===this.get("_outstandingCompletionChecks"))return e();var t=function(i,n){0===n&&(s.off("change:_outstandingCompletionChecks",t),e())};s.on("change:_outstandingCompletionChecks",t)}}),s=new i;s.location={},s.componentStore={};var n={};return s.initialize=_.once(function(){s.deferUntilCompletionChecked(function(){s.trigger("adapt:start"),Backbone.history.start(),s.trigger("adapt:initialize")})}),s.scrollTo=function(e,t){var i=s.location._contentType?s.location._contentType:s.location._currentLocation;s.trigger(i+":scrollTo",e);var t=t||{},n=!!s.config.has("_disableAnimation")&&s.config.get("_disableAnimation");n?t.duration=0:t.duration||(t.duration=$.scrollTo.defaults.duration);var o=$(".navigation").outerHeight();t.offset||(t.offset={top:-o,left:0}),void 0===t.offset.top&&(t.offset.top=-o),void 0===t.offset.left&&(t.offset.left=0),0===t.offset.left&&(t.axis="y"),s.get("_canScroll")!==!1&&$.scrollTo(e,t),_.delay(function(){$(e).a11y_focus(),s.trigger(i+":scrolledTo",e)},t.duration+300)},s.navigateToElement=function(e,t){var t=t||{},i=e.replace(/\./g,""),n=s.findById(i),o="contentObjects"===n._siblings?n:n.findAncestor("contentObjects");if(o.get("_id")===s.location._currentId)return s.scrollTo(e,t);s.once("pageView:ready",function(){_.defer(function(){s.scrollTo(e,t)})});var a=t.replace||!1;Backbone.history.navigate("#/id/"+o.get("_id"),{trigger:!0,replace:a})},s.register=function(e,t){if(s.componentStore[e])throw Error("This component already exists in your project");return t.view?t.view.template||(t.view.template=e):t.template||(t.template=e),s.componentStore[e]=t,t},s.setupMapping=function(){n[s.course.get("_id")]="course";for(var e=["contentObjects","articles","blocks","components"],t=0,i=e.length;t<i;t++)for(var o=e[t],a=s[o].models,r=0,c=a.length;r<c;r++){var l=a[r];n[l.get("_id")]=o}},s.resetMapping=function(){n={}},s.mapById=function(e){return n[e]},s.findById=function(e){if(e===s.course.get("_id"))return s.course;var t=s.mapById(e);return t?s[t]._byAdaptID[e][0]:void console.warn("Adapt.findById() unable to find collection type for id: "+e)},s.remove=function(){s.trigger("preRemove"),s.trigger("remove"),_.defer(function(){s.trigger("postRemove")})},s}),define("core/js/views/accessibilityView",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.View.extend({el:"#accessibility-toggle",initialize:function(){this.render()},events:{click:"toggleAccessibility"},render:function(){var e=i.config.has("_accessibility")&&i.config.get("_accessibility")._isEnabled;if(e){var t=i.config.get("_accessibility")._isActive,s=i.course.get("_globals")&&(i.course.get("_globals")._accessibility.accessibilityToggleTextOff||i.course.get("_globals")._accessibility._accessibilityToggleTextOff),n=i.course.get("_globals")&&(i.course.get("_globals")._accessibility.accessibilityToggleTextOn||i.course.get("_globals")._accessibility._accessibilityToggleTextOn),o=t?s:n;this.$el.html(o).attr("aria-label",i.course.get("title")+". "+i.course.get("_globals")._accessibility._ariaLabels.accessibilityToggleButton+". "+$.a11y_normalize(o))}},toggleAccessibility:function(e){e.preventDefault();var s=i.config.get("_accessibility")._isActive,n=!s;i.config.get("_accessibility")._isActive=n,i.trigger("accessibility:toggle"),this.render(),t.history.navigate(window.location.hash||"#/",{trigger:!0})}});return s}),define("core/js/accessibility",["require","coreJS/adapt","a11y","coreViews/accessibilityView"],function(e){var t=e("coreJS/adapt"),i=(e("a11y"),e("coreViews/accessibilityView")),s=_.extend({$html:$("html"),$accessibilityInstructions:$("#accessibility-instructions"),$accessibilityToggle:$("#accessibility-toggle"),_tabIndexElements:"a, button, input, select, textarea, [tabindex]",_isButtonRedirectionOn:!0,_hasUserTabbed:!1,_hasUsageInstructionRead:!1,_isLoaded:!1,_hasCourseLoaded:!1,_legacyFocusElements:void 0,reset:function(){_.extend(this,{_isButtonRedirectionOn:!0,_hasUserTabbed:!1,_hasUsageInstructionRead:!1})},initialize:function(){this._isLoaded||(t.once("app:dataLoaded",function(){this._hasCourseLoaded=!0,t.config.get("_accessibility")._isActive=t.offlineStorage.get("a11y")||!1,this.setupAccessibility()},s),t.on("accessibility:toggle",this.setupAccessibility,s),t.once("app:dataLoaded",this.setupHelpers,s),t.once("app:dataLoaded",this.touchDeviceCheck,s),t.once("app:dataReady",this.setupToggleButton,this),t.on("device:changed",this.setupNoSelect),this.listenToOnce(t,"app:dataReady",this.configureA11yLibrary),this.listenTo(t,"router:location",this.onNavigationStart),this.listenTo(t,"pageView:ready menuView:ready router:plugin",this.onNavigationEnd))},setupAccessibility:function(){this.isEnabled()&&(this._hasCourseLoaded&&!Modernizr.touch&&t.offlineStorage.set("a11y",t.config.get("_accessibility")._isActive),this.reset(),this.checkTabCapture(),this.configureA11yLibrary(),this.touchDeviceCheck(),this.isActive()?(this.setupDocument(),this.setupLegacy(),this.setupPopupListeners(),this.setupUsageInstructions(),this.setupLogging()):(this.revertDocument(),this.revertLegacy(),this.revertPopupListeners(),this.revertUsageInstructions(),this.revertLogging()))},setupHelpers:function(){var e=!!t.config.has("_accessibility")&&t.config.get("_accessibility");Handlebars.registerHelper("a11y_text",function(t){return e&&e._isTextProcessorEnabled===!1?t:$.a11y_text(t)}),Handlebars.registerHelper("a11y_normalize",function(e){return $.a11y_normalize(e)}),Handlebars.registerHelper("a11y_aria_label",function(e){return'<div class="aria-label prevent-default" tabindex="0" role="region">'+e+"</div>"}),Handlebars.registerHelper("a11y_aria_label_relative",function(e){return'<div class="aria-label relative prevent-default" tabindex="0" role="region">'+e+"</div>"}),Handlebars.registerHelper("a11y_wrap_focus",function(e){return'<a id="a11y-focusguard" class="a11y-ignore a11y-ignore-focus" tabindex="0" role="button">&nbsp;</a>'}),Handlebars.registerHelper("a11y_attrs_heading",function(e){return' role="heading" aria-level="'+e+'" tabindex="0" '}),Handlebars.registerHelper("a11y_attrs_tabbable",function(){return' role="region" tabindex="0" '})},setupToggleButton:function(){this.isEnabled()?new i:this.$accessibilityToggle.addClass("a11y-ignore").a11y_cntrl_enabled(!1)},setupNoSelect:function(){if(t.config.get("_accessibility")&&t.config.get("_accessibility")._disableTextSelectOnClasses){for(var e,i=t.config.get("_accessibility")._disableTextSelectOnClasses.split(" "),s=!1,n=0;e=i[n++];)if($("html").is(e)){s=!0;break}s?$("html").addClass("no-select"):$("html").removeClass("no-select")}},configureA11yLibrary:function(){var e=$(".navigation").height(),i=0;$.a11y.options.focusOffsetTop=e,$.a11y.options.focusOffsetBottom=i,$.a11y.options.OS=t.device.OS.toLowerCase(),$.a11y.options.isTouchDevice=Modernizr.touch,this.isActive()?_.extend($.a11y.options,{isTabbableTextEnabled:!0,isUserInputControlEnabled:!0,isFocusControlEnabled:!0,isFocusLimited:!0,isRemoveNotAccessiblesEnabled:!0,isAriaLabelFixEnabled:!0,isFocusWrapEnabled:!0,isScrollDisableEnabled:!0,isScrollDisabledOnPopupEnabled:!1,isSelectedAlertsEnabled:!0,isAlertsEnabled:!0}):_.extend($.a11y.options,{isTabbableTextEnabled:!1,isUserInputControlEnabled:!0,isFocusControlEnabled:!0,isFocusLimited:!1,isRemoveNotAccessiblesEnabled:!0,isAriaLabelFixEnabled:!0,isFocusWrapEnabled:!0,isScrollDisableEnabled:!0,isScrollDisabledOnPopupEnabled:!1,isSelectedAlertsEnabled:!1,isAlertsEnabled:!1}),this.setupNoSelect(),$.a11y.ready(),this.isEnabled()&&($("body").off("keyup",this.onKeyUp),$("body").on("keyup",this.onKeyUp))},onNavigationStart:function(){this._isLoaded=!1,this._hasUserTabbed=!1,$("#a11y-focuser").a11y_focus(!0),_.defer(function(){$.a11y_on(!1,".page"),$.a11y_on(!1,".menu")})},onNavigationEnd:function(e){e&&e.model&&e.model.get("_id")!=t.location._currentId||(_.defer(function(){$("body").a11y_aria_label(!0)}),this._isLoaded=!0,$.a11y_on(!1,".page"),$.a11y_on(!1,".menu"),this.configureA11yLibrary(),$.a11y_update(),this.setNavigationBar(),this._isButtonRedirectionOn=!0,_.delay(_.bind(function(){this.focusInitial()},this),500))},setNavigationBar:function(){this.isActive()?$(".navigation .aria-label").attr("tabindex",0).removeAttr("aria-hidden").removeClass("a11y-ignore"):$(".navigation .aria-label").attr("tabindex",-1).attr("aria-hidden","true")},touchDeviceCheck:function(){this.isEnabled()&&(Modernizr.touch&&this.$accessibilityToggle.remove(),Modernizr.touch&&!this.isActive()&&(this._isLoaded=!0,t.config.get("_accessibility")._isEnabled=!0,t.config.get("_accessibility")._isActive=!0,t.trigger("accessibility:toggle",!0)))},checkTabCapture:function(){if(this._isLoaded){var e=this.isActive();$.a11y(e),e||(this._isButtonRedirectionOn=!0)}},isActive:function(){return t.config.has("_accessibility")&&t.config.get("_accessibility")._isEnabled&&t.config.get("_accessibility")._isActive},isEnabled:function(){return t.config.has("_accessibility")&&t.config.get("_accessibility")._isEnabled},setupDocument:function(){this.$html.addClass("accessibility"),$.a11y(!0),$.a11y_on(!0,"body > *")},setupLegacy:function(){this.$html.hasClass("ie8")&&t.config.get("_accessibility")._shouldSupportLegacyBrowsers&&(this.listenTo(t,"pageView:ready menuView:ready",this.setupLegacyFocusClasser),this.listenTo(t,"remove",this.removeLegacyFocusClasser))},setupLegacyFocusClasser:function(){this.removeLegacyFocusClasser(),this._legacyFocusElements=$(this._tabIndexElements),this._legacyFocusElements.on("focus",this.onElementFocused).on("blur",this.onElementBlurred)},setupPopupListeners:function(){this.listenTo(t,"popup:opened popup:closed",this.onPop)},setupUsageInstructions:function(){if(!t.course.get("_globals")._accessibility||!t.course.get("_globals")._accessibility._accessibilityInstructions)return void this.$accessibilityInstructions.remove();var e,i=t.course.get("_globals")._accessibility._accessibilityInstructions;e=i[t.device.browser]?i[t.device.browser]:Modernizr.touch?i.touch||"":i.notouch||"",this.$accessibilityInstructions.html(e)},setupLogging:function(){t.config.get("_accessibility")&&t.config.get("_accessibility")._logReading&&$(document).on("reading",this.onRead)},revertDocument:function(){this.$html.removeClass("accessibility"),$.a11y(!1),$.a11y_on(!1,"body > *"),$.a11y_on(!0,"#accessibility-toggle")},revertLegacy:function(){this.$html.hasClass("ie8")&&t.config.get("_accessibility")._shouldSupportLegacyBrowsers&&(this.stopListening(t,"pageView:ready menuView:ready",this.setupLegacyFocusClasser),this.stopListening(t,"remove",this.removeLegacyFocusClasser))},removeLegacyFocusClasser:function(){void 0!==this._legacyFocusElements&&(this._legacyFocusElements.off("focus",this.onElementFocused).off("blur",this.onElementBlurred),this._legacyFocusElements=void 0)},revertPopupListeners:function(){this.stopListening(t,"popup:opened popup:closed",this.onPop)},revertUsageInstructions:function(){(!t.course.has("_globals")||t.course.get("_globals")._accessibility&&t.course.get("_globals")._accessibility._accessibilityInstructions)&&this.$accessibilityInstructions.off("blur",this.onFocusInstructions)},revertLogging:function(){(!t.course.has("_globals")||t.course.get("_globals")._accessibility&&t.course.get("_globals")._accessibility._logReading)&&$($.a11y).off("reading",this.onRead)},focusInitial:function(){if(this.isActive()){this._isButtonRedirectionOn=!1;var e=_.debounce(_.bind(function(){if(this._hasUsageInstructionRead){if(t.location._currentId&&"mac"!=$.a11y.options.OS){var e=t.findById(t.location._currentId),i=" ";switch(e.get("_type")){case"page":t.course.get("_globals")&&t.course.get("_globals")._accessibility&&t.course.get("_globals")._accessibility._ariaLabels&&t.course.get("_globals")._accessibility._ariaLabels.pageLoaded&&(i=t.course.get("_globals")._accessibility._ariaLabels.pageLoaded);break;case"menu":default:t.course.get("_globals")&&t.course.get("_globals")._accessibility&&t.course.get("_globals")._accessibility._ariaLabels&&t.course.get("_globals")._accessibility._ariaLabels.menuLoaded&&(i=t.course.get("_globals")._accessibility._ariaLabels.menuLoaded)}$.a11y_alert(i)}_.delay(_.bind(function(){var e=$(window).scrollTop(),t=$(document).scrollTop();$.a11y_on(!0,".page"),$.a11y_on(!0,".menu"),e>0||t>0||this._hasUserTabbed||_.delay(function(){$.a11y_focus()},500)},this),500)}else{if(this._hasUsageInstructionRead=!0,$.a11y_on(!0,".page"),$.a11y_on(!0,".menu"),this._hasUserTabbed)return;this.$accessibilityInstructions.one("blur",this.onFocusInstructions),_.delay(function(){s.$accessibilityInstructions.focusNoScroll()},250)}},this),100);e()}},onElementFocused:function(e){$(this).addClass("focused")},onElementBlurred:function(e){$(this).removeClass("focused")},onRead:function(e,t){console.log("READING: "+t)},onPop:function(){this.isActive()&&$.a11y_update()},onKeyUp:function(e){9===e.which&&($.a11y.userInteracted||(s._hasUserTabbed=!0,s.isActive()&&!s._isButtonRedirectionOn||s.$accessibilityToggle.focus()))},onFocusInstructions:function(e){s._isButtonRedirectionOn||s._isLoaded&&s.$accessibilityInstructions.addClass("a11y-ignore-focus").off("blur",s.onFocusInstructions)}},Backbone.Events);return s.initialize(),s}),define("core/js/adaptCollection",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.Collection.extend({initialize:function(e,t){this.url=t.url,this.once("reset",this.loadedData,this),this.url&&this.fetch({reset:!0,error:_.bind(function(e,t,i){console.error("ERROR: unable to load file "+this.url)},this)})},loadedData:function(){i.trigger("adaptCollection:dataLoaded")}});return s}),define("core/js/device",["require","coreJS/adapt","coreJS/libraries/bowser"],function(e){function t(){var e,t=r.config.get("screenSize");return e=r.device.screenWidth>t.medium?"large":r.device.screenWidth>t.small?"medium":"small"}function i(){return s()?n():window.innerWidth||l.width()}function s(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function n(){return 90===Math.abs(window.orientation)?screen.height:screen.width}function o(){var e=navigator.platform;return e.indexOf("Win")!=-1?"Windows":e.indexOf("Mac")!=-1?"Mac":e.indexOf("Linux")!=-1?"Linux":"PlatformUnknown"}function a(){var e=window.devicePixelRatio||1;return e>=3?"ultra-high":e>=2?"high":e>=1.5?"medium":"low"}var r=e("coreJS/adapt"),c=e("coreJS/libraries/bowser"),l=$(window);r.device={touch:Modernizr.touch,screenWidth:i()},r.once("app:dataReady",function(){r.device.screenSize=t(),$("html").addClass("size-"+r.device.screenSize),l.on("resize",d)});var d=_.debounce(function(){r.device.screenWidth=i();var e=t();e!==r.device.screenSize&&(r.device.screenSize=e,$("html").removeClass("size-small size-medium size-large").addClass("size-"+r.device.screenSize),r.trigger("device:changed",r.device.screenSize)),r.trigger("device:resize",r.device.screenWidth)},100),u=c.name,h=c.version,g=c.osversion;void 0==g&&(g=o());var p=u+" version-"+h+" OS-"+g;r.device.browser=u?u.toLowerCase():"",r.device.version=h?h.toLowerCase():"",r.device.OS=g?g.toLowerCase():"",p=p.replace("Internet Explorer","ie"),$("html").addClass(p+" pixel-density-"+a())}),define("core/js/views/drawerView",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.View.extend({className:"drawer display-none",disableAnimation:!1,escapeKeyAttached:!1,initialize:function(){this.disableAnimation=!!i.config.has("_disableAnimation")&&i.config.get("_disableAnimation"),this._isVisible=!1,this.drawerDir="right","rtl"==i.config.get("_defaultDirection")&&(this.drawerDir="left"),this.setupEventListeners(),this.render(),this.drawerDuration=i.config.get("_drawer")._duration,this.drawerDuration=this.drawerDuration?this.drawerDuration:400,this.$wrapper=$("#wrapper")},setupEventListeners:function(){this.listenTo(i,"navigation:toggleDrawer",this.toggleDrawer),this.listenTo(i,"drawer:triggerCustomView",this.openCustomView),this.listenToOnce(i,"adapt:initialize",this.checkIfDrawerIsAvailable),this.listenTo(i,"drawer:closeDrawer",this.onCloseDrawer),this.listenTo(i,"remove",this.onCloseDrawer),this.listenTo(i,"accessibility:toggle",this.onAccessibilityToggle),this._onKeyUp=_.bind(this.onKeyUp,this),this.setupEscapeKey()},setupEscapeKey:function(){var e=i.config.has("_accessibility")&&i.config.get("_accessibility")._isActive;e||this.escapeKeyAttached?($(window).off("keyup",this._onKeyUp),this.escapeKeyAttached=!1):($(window).on("keyup",this._onKeyUp),this.escapeKeyAttached=!0)},onAccessibilityToggle:function(){this.setupEscapeKey()},onKeyUp:function(e){27==e.which&&(e.preventDefault(),this.onCloseDrawer())},events:{"click .drawer-back":"onBackButtonClicked","click .drawer-close":"onCloseDrawer"},render:function(){var e=Handlebars.templates.drawer;$(this.el).html(e({_globals:i.course.get("_globals")})).prependTo("body");var t=Handlebars.templates.shadow;return $(t()).prependTo("body"),_.defer(_.bind(function(){this.postRender()},this)),this},postRender:function(){this.$("a, button, input, select, textarea").attr("tabindex",-1)},openCustomView:function(e,t){this._hasBackButton=t,this._isCustomViewVisible=!0,i.trigger("drawer:empty"),this.showDrawer(),this.$(".drawer-holder").html(e)},checkIfDrawerIsAvailable:function(){0==this.collection.length&&($(".navigation-drawer-toggle-button").addClass("display-none"),i.trigger("drawer:noItems"))},onBackButtonClicked:function(e){e.preventDefault(),this.showDrawer(!0)},onCloseDrawer:function(e){e&&e.preventDefault(),this.hideDrawer()},toggleDrawer:function(){this._isVisible&&this._isCustomViewVisible===!1?this.hideDrawer():this.showDrawer(!0)},showDrawer:function(e){function t(){this.addShadowEvent(),i.trigger("drawer:opened"),this.$el.a11y_focus()}this.$el.removeClass("display-none"),this._isVisible||(i.trigger("popup:opened",this.$el),$("body").scrollDisable(),this._isVisible=!0);this.$el.width();if(this.$("a, button, input, select, textarea").attr("tabindex",0),e?(this.$(".drawer-back").addClass("display-none"),this._isCustomViewVisible=!1,this.emptyDrawer(),1===this.collection.models.length?i.trigger(this.collection.models[0].get("eventCallback")):(this.renderItems(),i.trigger("drawer:openedItemView"))):(this._hasBackButton&&this.collection.models.length>1?this.$(".drawer-back").removeClass("display-none"):this.$(".drawer-back").addClass("display-none"),i.trigger("drawer:openedCustomView")),this.disableAnimation){$("#shadow").removeClass("display-none");var s={};s[this.drawerDir]=0,this.$el.css(s),t.call(this)}else{$("#shadow").velocity({opacity:1},{duration:this.drawerDuration,begin:_.bind(function(){$("#shadow").removeClass("display-none"),t.call(this)},this)});var n=i.config.get("_drawer")._showEasing,o=n?n:"easeOutQuart",s={};s[this.drawerDir]=0,this.$el.velocity(s,this.drawerDuration,o)}},emptyDrawer:function(){this.$(".drawer-holder").empty()},renderItems:function(){i.trigger("drawer:empty"),this.emptyDrawer();for(var e=this.collection.models,t=0,s=e.length;t<s;t++){var o=e[t];new n({model:o})}},hideDrawer:function(){if(this._isVisible){if(i.trigger("popup:closed"),this._isVisible=!1,$("body").scrollEnable(),this.disableAnimation){var e={};e[this.drawerDir]=-this.$el.width(),this.$el.css(e).addClass("display-none"),$("#shadow").addClass("display-none"),i.trigger("drawer:closed")}else{var t=i.config.get("_drawer")._hideEasing,s=t?t:"easeOutQuart",e={};e[this.drawerDir]=-this.$el.width(),this.$el.velocity(e,this.drawerDuration,s,_.bind(function(){this.$el.addClass("display-none"),i.trigger("drawer:closed")},this)),$("#shadow").velocity({opacity:0},{duration:this.drawerDuration,complete:function(){$("#shadow").addClass("display-none")}})}this._isCustomViewVisible=!1,this.removeShadowEvent()}},addShadowEvent:function(){$("#shadow").one("click touchstart",_.bind(function(){this.onCloseDrawer()},this))},removeShadowEvent:function(){$("#shadow").off("click touchstart")},remove:function(){t.View.prototype.remove.apply(this,arguments),$(window).off("keyup",this._onKeyUp),i.trigger("drawer:empty"),this.collection.reset(),$("#shadow").remove()}}),n=t.View.extend({className:"drawer-item",initialize:function(){this.listenTo(i,"drawer:empty",this.remove),this.render()},events:{"click .drawer-item-open":"onDrawerItemClicked"},render:function(){var e=this.model.toJSON(),t=Handlebars.templates.drawerItem;return $(this.el).html(t(e)).appendTo(".drawer-holder"),this},onDrawerItemClicked:function(e){e.preventDefault();var t=this.model.get("eventCallback");i.trigger(t)}});return s}),define("core/js/drawer",["require","coreViews/drawerView","coreJS/adapt"],function(e){var t=e("coreViews/drawerView"),i=new Backbone.Collection,s=e("coreJS/adapt"),n={};n.addItem=function(e,t){e.eventCallback=t,i.add(e)},n.triggerCustomView=function(e,t){t!==!1&&(t=!0),s.trigger("drawer:triggerCustomView",e,t)};var o=function(){var e=new t({collection:i});s.on("app:languageChanged",function(){e.remove(),e=new t({collection:i})})};s.once("app:dataReady",function(){o()}),s.drawer=n}),define("core/js/views/notifyView",["require","coreJS/adapt"],function(e){var t=e("coreJS/adapt"),i=Backbone.View.extend({className:"notify",disableAnimation:!1,escapeKeyAttached:!1,initialize:function(){this.disableAnimation=!!t.config.has("_disableAnimation")&&t.config.get("_disableAnimation"),this.setupEventListeners(),this.model.set("_globals",t.course.get("_globals")),this.render()},setupEventListeners:function(){this.listenTo(t,"remove",this.remove),this.listenTo(t,"device:resize",this.resetNotifySize),this.listenTo(t,"accessibility:toggle",this.onAccessibilityToggle),this._onKeyUp=_.bind(this.onKeyUp,this),this.setupEscapeKey()},setupEscapeKey:function(){var e=t.config.has("_accessibility")&&t.config.get("_accessibility")._isActive;e||this.escapeKeyAttached?($(window).off("keyup",this._onKeyUp),this.escapeKeyAttached=!1):($(window).on("keyup",this._onKeyUp),this.escapeKeyAttached=!0)},onAccessibilityToggle:function(){this.setupEscapeKey()},onKeyUp:function(e){27==e.which&&(e.preventDefault(),this.closeNotify())},events:{"click .notify-popup-alert-button":"onAlertButtonClicked","click .notify-popup-prompt-button":"onPromptButtonClicked","click .notify-popup-done":"onCloseButtonClicked","click .notify-shadow":"onCloseButtonClicked"},render:function(){var e=this.model.toJSON(),t=Handlebars.templates.notify;return this.$el.css("visibility","hidden"),this.$el.html(t(e)).prependTo("body"),this.$(".notify-popup").css("visibility","hidden"),this.$el.css("visibility","visible"),this.showNotify(),this},onAlertButtonClicked:function(e){e.preventDefault(),this.closeNotify(),t.trigger(this.model.get("_callbackEvent"),this)},onPromptButtonClicked:function(e){e.preventDefault(),this.closeNotify(),t.trigger($(e.currentTarget).attr("data-event"))},onCloseButtonClicked:function(e){e.preventDefault(),this.closeNotify(),t.trigger("notify:cancelled")},resetNotifySize:function(){$(".notify-popup").removeAttr("style"),this.resizeNotify()},resizeNotify:function(){var e=$(window).height(),t=this.$(".notify-popup").outerHeight();t>e?this.$(".notify-popup").css({height:"100%",top:0,"overflow-y":"scroll","-webkit-overflow-scrolling":"touch"}):this.$(".notify-popup").css({"margin-top":-(t/2)})},showNotify:function(){function e(){function e(){t.trigger("popup:opened",this.$(".notify-popup")),$("body").scrollDisable(),this.$(".notify-popup").a11y_focus()}this.disableAnimation?this.$(".notify-shadow").css("display","block"):this.$(".notify-shadow").velocity({opacity:0},{duration:0}).velocity({opacity:1},{duration:400,begin:_.bind(function(){this.$(".notify-shadow").css("display","block")},this)}),this.resizeNotify(),this.disableAnimation?(this.$(".notify-popup").css("visibility","visible"),e.call(this)):this.$(".notify-popup").velocity({opacity:0},{duration:0}).velocity({opacity:1},{duration:400,begin:_.bind(function(){this.$(".notify-popup").css("visibility","visible"),e.call(this)},this)})}t.trigger("notify:opened",this),this.$("img").length>0?this.$el.imageready(_.bind(e,this)):e.call(this)},closeNotify:function(e){this.disableAnimation?(this.$(".notify-popup").css("visibility","hidden"),this.$el.css("visibility","hidden"),this.remove()):(this.$(".notify-popup").velocity({opacity:0},{duration:400,complete:_.bind(function(){this.$(".notify-popup").css("visibility","hidden")},this)}),this.$(".notify-shadow").velocity({opacity:0},{duration:400,complete:_.bind(function(){this.$el.css("visibility","hidden"),this.remove()},this)})),$("body").scrollEnable(),t.trigger("popup:closed"),t.trigger("notify:closed")}});return i}),define("core/js/views/notifyPushView",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.View.extend({className:"notify-push",initialize:function(){this.listenTo(i,"notify:pushShown notify:pushRemoved",this.updateIndexPosition),this.listenTo(this.model.collection,"remove",this.updateIndexPosition),this.listenTo(this.model.collection,"change:_index",this.updatePushPosition),this.model.set("_globals",i.course.get("_globals")),this.listenTo(i,"remove",this.remove),this.preRender(),this.render()},events:{"click .notify-push-close":"closePush","click .notify-push-inner":"triggerEvent"},preRender:function(){this.hasBeenRemoved=!1},render:function(){var e=this.model.toJSON(),t=Handlebars.templates.notifyPush;return this.$el.html(t(e)).appendTo("#wrapper"),_.defer(_.bind(function(){this.postRender()},this)),this},postRender:function(){this.$el.addClass("show"),_.delay(_.bind(function(){this.closePush()},this),this.model.get("_timeout")),i.trigger("notify:pushShown")},closePush:function(e){e&&e.preventDefault(),this.hasBeenRemoved===!1&&(this.hasBeenRemoved=!0,this.$el.removeClass("show"),_.delay(_.bind(function(){this.model.collection.remove(this.model),i.trigger("notify:pushRemoved",this),this.remove()},this),600))},triggerEvent:function(e){i.trigger(this.model.get("_callbackEvent")),this.closePush()},updateIndexPosition:function(){if(!this.hasBeenRemoved)for(var e=this.model.collection.models,t=0,i=e.length;t<i;t++){var s=t,n=e[t];n.get("_isActive")===!0&&(n.set("_index",s),this.updatePushPosition())}},updatePushPosition:function(){if(!this.hasBeenRemoved&&void 0!=this.model.get("_index")){var e=this.$el.height(),t=20,i=$(".navigation").height(),s=this.model.get("_index"),n=0==s?1:0;1===this.model.collection.where({_isActive:!0}).length&&(n=0);var o=(e+t)*n+i+t;this.$el.css("top",o)}}});return s}),define("core/js/models/notifyModel",["require","backbone"],function(e){var t=e("backbone"),i=t.Model.extend({defaults:{_isActive:!1,_showIcon:!1,_timeout:3e3}});return i}),define("core/js/notify",["require","coreJS/adapt","coreViews/notifyView","coreViews/notifyPushView","coreModels/notifyModel"],function(e){function t(e,t){if(t._type=e,"push"===e)return void r.push(t);new s({model:new o(t)})}var i=e("coreJS/adapt"),s=e("coreViews/notifyView"),n=e("coreViews/notifyPushView"),o=e("coreModels/notifyModel"),a=Backbone.Collection.extend({model:o,initialize:function(){this.listenTo(this,"add",this.onPushAdded),this.listenTo(i,"notify:pushRemoved",this.onRemovePush)},onPushAdded:function(e){this.checkPushCanShow(e)},checkPushCanShow:function(e){this.canShowPush()&&(e.set("_isActive",!0),this.showPush(e))},canShowPush:function(){var e=this.where({_isActive:!0});return!(e.length>=2)},showPush:function(e){new n({model:e})},onRemovePush:function(e){var t=this.where({_isActive:!1});t.length>0&&this.checkPushCanShow(t[0])}}),r=new a;i.on("notify:alert",function(e){t("alert",e)}),i.on("notify:prompt",function(e){t("prompt",e)}),i.on("notify:popup",function(e){t("popup",e)}),i.on("notify:push",function(e){t("push",e)})}),define("core/js/offlineStorage",["core/js/adapt"],function(e){return e.offlineStorage={ready:!0,initialize:function(e){this.ready=!1,this._handler=e},set:function(e,t){if(this._handler&&this._handler.set)return this._handler.set.apply(this._handler,arguments)},get:function(e){if(this._handler&&this._handler.get)return this._handler.get.apply(this._handler,arguments)},setReadyStatus:function(){this.ready=!0,e.trigger("offlineStorage:ready")}},e.offlineStorage}),define("core/js/popupManager",["require","coreJS/adapt"],function(e){
var t=e("coreJS/adapt");t.on("popup:opened",function(e){var t=e||$(document.activeElement);t.a11y_popup()}),t.on("popup:closed",function(){$.a11y_popdown()})}),define("core/js/models/routerModel",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=(e("coreJS/adapt"),t.Model.extend({defaults:{_canNavigate:!0},lockedAttributes:{_canNavigate:!1}}));return i}),define("core/js/views/adaptView",["coreJS/adapt"],function(e){var t=Backbone.View.extend({initialize:function(){this.listenTo(e,"remove",this.remove),this.listenTo(this.model,"change:_isVisible",this.toggleVisibility),this.model.set("_globals",e.course.get("_globals")),this.model.set("_isReady",!1),this._isRemoved=!1,this.preRender(),this.render()},preRender:function(){},postRender:function(){this.addChildren()},render:function(){e.trigger(this.constructor.type+"View:preRender",this);var t=this.model.toJSON(),i=Handlebars.templates[this.constructor.template];return this.$el.html(i(t)),_.defer(_.bind(function(){this._isRemoved||(this.postRender(),e.trigger(this.constructor.type+"View:postRender",this))},this)),this},addChildren:function(){for(var t=0,i=this.model.getChildren(),s=i.models,n=0,o=s.length;n<o;n++){var a=s[n];if(a.get("_isAvailable")){t++;var r,c=this.constructor.childView||e.componentStore[a.get("_component")];if(r=c.view?c.view:c,!r)throw"The component '"+s[n].attributes._id+"' ('"+s[n].attributes._component+"') has not been installed, and so is not available in your project.";var l=this.$(this.constructor.childContainer);a.set("_nthChild",t),l.append(new r({model:a}).$el)}}},setReadyStatus:function(){this.model.set("_isReady",!0)},setCompletionStatus:function(){this.model.get("_isVisible")&&(this.model.set("_isComplete",!0),this.model.set("_isInteractionComplete",!0))},resetCompletionStatus:function(e){if(this.model.get("_canReset")){var t=this.model.findDescendants("components");0===t.length?this.model.reset(e):t.each(function(t){t.reset(e)})}},remove:function(){return this._isRemoved=!0,this.model.setOnChildren("_isReady",!1),this.model.set("_isReady",!1),this.$el.remove(),this.stopListening(),this},setVisibility:function(){var e="visibility-hidden";return this.model.get("_isVisible")&&(e=""),e},toggleVisibility:function(){return this.model.get("_isVisible")?this.$el.removeClass("visibility-hidden"):void this.$el.addClass("visibility-hidden")}});return t}),define("core/js/views/blockView",["require","coreViews/adaptView"],function(e){var t=e("coreViews/adaptView"),i=t.extend({className:function(){return"block "+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()+" nth-child-"+this.model.get("_nthChild")}},{childContainer:".component-container",type:"block",template:"block"});return i}),define("core/js/views/articleView",["require","coreViews/adaptView","coreViews/blockView"],function(e){var t=e("coreViews/adaptView"),i=e("coreViews/blockView"),s=t.extend({className:function(){return"article "+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()+" nth-child-"+this.model.get("_nthChild")}},{childContainer:".block-container",childView:i,type:"article",template:"article"});return s}),define("core/js/views/pageView",["require","coreViews/adaptView","coreViews/articleView","coreJS/adapt"],function(e){var t=e("coreViews/adaptView"),i=e("coreViews/articleView"),s=e("coreJS/adapt"),n=t.extend({className:function(){return"page "+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()},preRender:function(){this.disableAnimation=!!s.config.has("_disableAnimation")&&s.config.get("_disableAnimation"),this.$el.css("opacity",0),this.listenTo(this.model,"change:_isReady",this.isReady)},isReady:function(){this.model.get("_isReady")&&_.defer(_.bind(function(){$(".loading").hide(),$(window).scrollTop(0),s.trigger("pageView:ready",this);var e={opacity:1};this.disableAnimation?this.$el.css(e):this.$el.velocity(e,"fast"),$(window).scroll()},this))}},{childContainer:".article-container",childView:i,type:"page",template:"page"});return n}),define("core/js/startController",["core/js/adapt"],function(e){var t=function(){this.initialize()};return _.extend(t.prototype,{model:null,initialize:function(){this.model=new Backbone.Model(e.course.get("_start"))},setStartLocation:function(){this.isEnabled()&&(window.location.hash=this.getStartHash())},getStartHash:function(t){var i=this.getStartId(),s=!!i,n=_.indexOf(window.location.href,"#")>-1,o=t||this.model.get("_force"),a=s&&(!n||o),r="#/";if(a)i!==e.course.get("_id")&&(r="#/id/"+i);else{var c=!!window.location.hash;r=c?window.location.hash:r}return r},isEnabled:function(){return!(!this.model||!this.model.get("_isEnabled"))},getStartId:function(){var t=this.model.get("_id"),i=this.model.get("_startIds"),s=i&&i.length>0;if(s)for(var n=0,o=i.length;n<o;n++){var a=i[n],r=a._className,c=a._skipIfComplete,l=e.findById(a._id);if(l){if((!c||!l.get("_isComplete"))&&(!r||$("html").is(r))){t=a._id;break}}else console.log("startController: cannot find id",a._id)}return t}}),e.once("adapt:start",function(){var e=new t;e.setStartLocation()}),t}),define("core/js/router",["coreJS/adapt","coreModels/routerModel","coreViews/pageView","coreJS/startController"],function(e,t,i){e.router=new t(null,{reset:!0});var s=Backbone.Router.extend({initialize:function(){this.showLoading(),this.$wrapper=$("#wrapper"),e.once("app:dataReady",function(){document.title=e.course.get("title")}),this.listenTo(e,"navigation:backButton",this.navigateToPreviousRoute),this.listenTo(e,"navigation:homeButton",this.navigateToHomeRoute),this.listenTo(e,"navigation:parentButton",this.navigateToParent),this.listenTo(e,"router:navigateTo",this.navigateToArguments)},routes:{"":"handleRoute","id/:id":"handleRoute",":pluginName(/*location)(/*action)":"handleRoute"},handleRoute:function(){var t=[].slice.call(arguments,0,arguments.length);if(null===arguments[arguments.length-1]&&t.pop(),this._isCircularNavigationInProgress||e.trigger("router:navigate",arguments),e.router.get("_canNavigate")){switch(e.router.set("_canNavigate",!1,{pluginName:"adapt"}),t.length){case 1:return this.handleId.apply(this,arguments);case 2:return this.handlePluginRouter.apply(this,arguments)}return this.handleCourse()}return this._isCircularNavigationInProgress?void delete this._isCircularNavigationInProgress:(this._isCircularNavigationInProgress=!0,e.trigger("router:navigationCancelled",arguments),void this.navigateToCurrentRoute(!0))},handlePluginRouter:function(t,i,s){var n=t;i&&(n=n+"-"+i,s&&(n=n+"-"+s)),this.updateLocation(n),e.trigger("router:plugin:"+t,t,i,s),e.trigger("router:plugin",t,i,s)},handleCourse:function(){if(e.course.has("_start")){var t=e.course.get("_start");if(1==t._isEnabled&&1==t._isMenuDisabled)return}this.showLoading(),this.removeViews(),e.course.set("_isReady",!1),this.setContentObjectToVisited(e.course),this.updateLocation("course"),e.once("menuView:ready",function(){e.router.set("_canNavigate",!0,{pluginName:"adapt"})}),e.trigger("router:menu",e.course)},handleId:function(t){var s=e.findById(t),n="";if(!s)return void e.router.set("_canNavigate",!0,{pluginName:"adapt"});switch(n=s.get("_type")){case"page":case"menu":if(s.get("_isLocked")&&e.config.get("_forceRouteLocking"))return console.log("Unable to navigate to locked id: "+t),e.router.set("_canNavigate",!0,{pluginName:"adapt"}),void 0===e.location._previousId?this.navigate("#/",{trigger:!0,replace:!0}):Backbone.history.history.back();if(this.showLoading(),this.removeViews(),this.setContentObjectToVisited(s),"page"==n){var o="page-"+t;this.updateLocation(o,"page",t),e.once("pageView:ready",function(){e.router.set("_canNavigate",!0,{pluginName:"adapt"})}),e.trigger("router:page",s),this.$wrapper.append(new i({model:s}).$el)}else{var o="menu-"+t;this.updateLocation(o,"menu",t),e.once("menuView:ready",function(){e.router.set("_canNavigate",!0,{pluginName:"adapt"})}),e.trigger("router:menu",s)}break;default:e.router.set("_canNavigate",!0,{pluginName:"adapt"}),e.navigateToElement("."+t,{replace:!0})}},removeViews:function(){e.remove()},showLoading:function(){$(".loading").show()},navigateToArguments:function(t){switch(t=[].slice.call(t,0,t.length),null===t[t.length-1]&&t.pop(),t.length){case 0:this.navigate("#/",{trigger:!1,replace:!1});break;case 1:e.findById(t[0])?this.navigate("#/id/"+t[0],{trigger:!1,replace:!1}):this.navigate("#/"+t[0],{trigger:!1,replace:!1});break;case 2:this.navigate("#/"+t[0]+"/"+t[1],{trigger:!1,replace:!1});break;case 3:this.navigate("#/"+t[0]+"/"+t[1]+"/"+t[2],{trigger:!1,replace:!1})}this.handleRoute.apply(this,t)},navigateToPreviousRoute:function(t){if(e.router.get("_canNavigate")||t){if(!e.location._currentId)return Backbone.history.history.back();if("page"===e.location._previousContentType&&"menu"===e.location._contentType)return this.navigateToParent();if("page"===e.location._previousContentType)return Backbone.history.history.back();if("course"===e.location._currentLocation)return;this.navigateToParent()}},navigateToHomeRoute:function(t){(e.router.get("_canNavigate")||t)&&this.navigate("#/",{trigger:!0})},navigateToCurrentRoute:function(t){if(e.router.get("_canNavigate")||t){if(!e.location._currentId)return;var i=e.location._currentId,s=i===e.course.get("_id")?"#/":"#/id/"+i;this.navigate(s,{trigger:!0,replace:!0})}},navigateToParent:function(t){if(e.router.get("_canNavigate")||t){var i=e.contentObjects.findWhere({_id:e.location._currentId}).get("_parentId"),s=i===e.course.get("_id")?"#/":"#/id/"+i;this.navigate(s,{trigger:!0})}},setContentObjectToVisited:function(e){e.set("_isVisited",!0)},updateLocation:function(t,i,s){e.location._previousId=e.location._currentId,e.location._previousContentType=e.location._contentType,"course"===t?(e.location._currentId=e.course.get("_id"),e.location._contentType="menu",e.location._lastVisitedMenu=t):i?3===arguments.length&&(e.location._currentId=s,e.location._contentType=i,"menu"===i?(e.location._lastVisitedType="menu",e.location._lastVisitedMenu=s):"page"===i&&(e.location._lastVisitedType="page",e.location._lastVisitedPage=s)):(e.location._currentId=null,e.location._contentType=null),e.location._currentLocation=t;var n=e.location._currentId?"location-"+e.location._contentType+" location-id-"+e.location._currentId:"location-"+e.location._currentLocation;this.$wrapper.removeClass().addClass(n).attr("data-location",e.location._currentLocation),this.setDocumentTitle(),e.trigger("router:location",e.location)},setDocumentTitle:function(){if(e.location._currentId){var t=e.findById(e.location._currentId),i="";if(t&&"course"!==t.get("_type")){var s=t.get("title");s&&(i=" | "+s)}var n=e.course.get("title"),o=$("<div>"+n+i+"</div>").text();e.once("pageView:ready menuView:ready",function(){document.title=o})}}});return new s({model:new Backbone.Model})}),define("core/js/models/adaptModel",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.Model.extend({defaults:{_canShowFeedback:!0,_classes:"",_canReset:!1,_isComplete:!1,_isInteractionComplete:!1,_requireCompletionOf:-1,_isEnabled:!0,_isResetOnRevisit:!1,_isAvailable:!0,_isOptional:!1,_isReady:!1,_isVisible:!0,_isLocked:!1},initialize:function(){this.listenToOnce(i,"app:dataLoaded",this.setupModel)},setupModel:function(){"page"===this.get("_type")&&(this._children="articles"),"contentObjects"===this._siblings&&this.get("_parentId")!==i.course.get("_id")&&(this._parent="contentObjects"),this._children&&(this.get("_isOptional")&&this.setOptional(!0),this.setupChildListeners()),this.init(),_.defer(_.bind(function(){this._children&&(this.checkCompletionStatus(),this.checkInteractionCompletionStatus(),this.checkLocking())},this))},setupChildListeners:function(){this.getChildren()&&this.listenTo(i[this._children],{"change:_isReady":this.checkReadyStatus,"change:_isComplete":this.onIsComplete,"change:_isInteractionComplete":this.checkInteractionCompletionStatus})},init:function(){},reset:function(e,t){if(this.get("_canReset")||t)switch(e=e||!0){case"hard":case!0:this.set({_isEnabled:!0,_isComplete:!1,_isInteractionComplete:!1});break;case"soft":this.set({_isEnabled:!0,_isInteractionComplete:!1})}},checkReadyStatus:function(){var e=new t.Collection(this.getChildren().where({_isAvailable:!0}));e.findWhere({_isReady:!1})||this.set({_isReady:!0})},setCompletionStatus:function(){this.get("_isVisible")&&(this.set("_isComplete",!0),this.set("_isInteractionComplete",!0))},checkCompletionStatus:function(){i.checkingCompletion(),_.defer(_.bind(function(){var e=new t.Collection(this.getChildren().where({_isAvailable:!0})),s=!1,n=this.get("_requireCompletionOf");s=n===-1?void 0===e.findWhere({_isComplete:!1,_isOptional:!1}):e.where({_isComplete:!0,_isOptional:!1}).length>=n,this.set({_isComplete:s}),i.checkedCompletion()},this))},checkInteractionCompletionStatus:function(){i.checkingCompletion(),_.defer(_.bind(function(){var e=new t.Collection(this.getChildren().where({_isAvailable:!0})),s=!1,n=this.get("_requireCompletionOf");s=n===-1?void 0===e.findWhere({_isInteractionComplete:!1,_isOptional:!1}):e.where({_isInteractionComplete:!0,_isOptional:!1}).length>=n,this.set({_isInteractionComplete:s}),i.checkedCompletion()},this))},findAncestor:function(e){var t=this.getParent();if(this._parent===e)return t;var i=t.getParent();return t._parent!==e&&(i=i.getParent()),i},findDescendants:function(e){function i(a){for(var r=a.models,c=0,l=r.length;c<l;c++){var d=r[c],u=d.getChildren().models;o.push(u),s=_.flatten(o)}n=new t.Collection(s),0!==a.models.length&&a.models[0]._children!==e&&(o=[],i(n))}if(this._children===e)return this.getChildren();var s,n,o=[],a=this.getChildren();return i(a),n},getChildren:function(){if(this.get("_children"))return this.get("_children");var e;if(this._children){var s=i[this._children].where({_parentId:this.get("_id")});e=new t.Collection(s)}else e=new t.Collection;return"block"==this.get("_type")&&2==e.length&&"left"!==e.models[0].get("_layout")&&this.get("_sortComponents")!==!1&&(e.comparator="_layout",e.sort()),this.set("_children",e),e},getParent:function(){if(this.get("_parent"))return this.get("_parent");if("course"===this._parent)return i.course;var e=i.findById(this.get("_parentId"));return this.set("_parent",e),e},getParents:function(e){var i=[],s=this;for(e&&i.push(s);s.has("_parentId");)s=s.getParent(),i.push(s);return i.length?new t.Collection(i):null},getSiblings:function(e){var s;if(e){if(this._hasSiblingsAndSelf)return this.get("_siblings");s=i[this._siblings].where({_parentId:this.get("_parentId")}),this._hasSiblingsAndSelf=!0}else{if(this._hasSiblingsAndSelf===!1)return this.get("_siblings");s=_.reject(i[this._siblings].where({_parentId:this.get("_parentId")}),_.bind(function(e){return e.get("_id")==this.get("_id")},this)),this._hasSiblingsAndSelf=!1}var n=new t.Collection(s);return this.set("_siblings",n),n},setOnChildren:function(e,t,i){var s=arguments;if(this.set.apply(this,s),this._children)for(var n=this.getChildren(),o=n.models,a=0,r=o.length;a<r;a++){var c=o[a];c.setOnChildren.apply(c,s)}},setOptional:function(e){this.set({_isOptional:e})},checkLocking:function(){var e=this.get("_lockType");if(e)switch(e){case"sequential":this.setSequentialLocking();break;case"unlockFirst":this.setUnlockFirstLocking();break;case"lockLast":this.setLockLastLocking();break;case"custom":this.setCustomLocking();break;default:console.warn('AdaptModel.checkLocking: unknown _lockType "'+e+'" found on '+this.get("_id"))}},setSequentialLocking:function(){for(var e=this.getChildren().models,t=1,i=e.length;t<i;t++)e[t].set("_isLocked",!e[t-1].get("_isComplete"))},setUnlockFirstLocking:function(){for(var e=this.getChildren().models,t=e[0].get("_isComplete"),i=1,s=e.length;i<s;i++)e[i].set("_isLocked",!t)},setLockLastLocking:function(){for(var e=this.getChildren().models,t=e.length-1,i=t-1;i>=0;i--)if(!e[i].get("_isComplete"))return e[t].set("_isLocked",!0);e[t].set("_isLocked",!1)},setCustomLocking:function(){for(var e=this.getChildren().models,t=0,i=e.length;t<i;t++){var s=e[t];s.set("_isLocked",this.shouldLock(s))}},shouldLock:function(e){var t=e.get("_lockedBy");if(!t)return!1;for(var s=t.length-1;s>=0;s--){var n=t[s];try{if(!i.findById(n).get("_isComplete"))return!0}catch(t){console.warn('AdaptModel.shouldLock: unknown _lockedBy ID "'+n+'" found on '+e.get("_id"))}}return!1},onIsComplete:function(){this.checkCompletionStatus(),this.checkLocking()}});return s}),define("core/js/models/articleModel",["require","coreModels/adaptModel","coreJS/adapt"],function(e){var t=e("coreModels/adaptModel"),i=(e("coreJS/adapt"),t.extend({_parent:"contentObjects",_siblings:"articles",_children:"blocks"}));return i}),define("core/js/models/blockModel",["require","coreModels/adaptModel"],function(e){var t=e("coreModels/adaptModel"),i=t.extend({_parent:"articles",_siblings:"blocks",_children:"components",defaults:function(){return _.extend({_sortComponents:!0},t.prototype.defaults)}});return i}),define("core/js/models/componentModel",["coreJS/adapt","coreModels/adaptModel"],function(e,t){var i=t.extend({_parent:"blocks",_siblings:"components"});return i}),define("core/js/models/configModel",["require","backbone","coreJS/adapt"],function(e){var t=e("backbone"),i=e("coreJS/adapt"),s=t.Model.extend({defaults:{screenSize:{small:520,medium:760,large:1024},_forceRouteLocking:!1,_canLoadData:!0,_disableAnimation:!1},initialize:function(e,t){this.url=t.url,this.fetch({success:_.bind(function(){i.trigger("configModel:dataLoaded"),this.get("_canLoadData")&&i.trigger("configModel:loadCourseData"),"rtl"==this.get("_defaultDirection")&&$("html").addClass("dir-rtl");var e=this.get("_disableAnimationFor");if(e&&e.length>0)for(var t=0;t<e.length;t++)$("html").is(e[t])&&(this.set("_disableAnimation",!0),console.log("Animation disabled."))},this),error:function(){console.log("Unable to load course/config.json")}})},loadData:function(){}});return s}),define("core/js/models/contentObjectModel",["require","coreModels/adaptModel","coreJS/adapt"],function(e){var t=e("coreModels/adaptModel"),i=(e("coreJS/adapt"),t.extend({_parent:"course",_siblings:"contentObjects",_children:"contentObjects"}));return i}),define("core/js/models/courseModel",["require","coreModels/adaptModel","coreJS/adapt"],function(e){var t=e("coreModels/adaptModel"),i=e("coreJS/adapt"),s=t.extend({initialize:function(e,s){t.prototype.initialize.apply(this,arguments),i.trigger("courseModel:dataLoading"),this.url=s.url,this.on("sync",this.loadedData,this),this.url&&this.fetch({error:_.bind(function(e,t,i){console.error("ERROR: unable to load file "+this.url)},this)})},loadedData:function(){i.trigger("courseModel:dataLoaded")},_children:"contentObjects"});return s}),define("core/js/models/questionModel",["coreJS/adapt","coreModels/componentModel"],function(e,t){var i=t.extend({defaults:function(){return _.extend({_isQuestionType:!0,_shouldDisplayAttempts:!1,_canShowModelAnswer:!0,_canShowFeedback:!0,_canShowMarking:!0,_questionWeight:e.config.get("_questionWeight")},t.prototype.defaults)},init:function(){this.setupDefaultSettings(),this.listenToOnce(e,"adapt:initialize",this.onAdaptInitialize)},setupDefaultSettings:function(){this.setupWeightSettings(),this.setupButtonSettings()},setupButtonSettings:function(){var t=e.course.get("_buttons");if(this.has("_buttons")){var i=this.get("_buttons");if("undefined"==typeof i.submit)for(var s in i)"object"==typeof i[s]&&(!i[s].buttonText&&t[s].buttonText&&(i[s].buttonText=t[s].buttonText),!i[s].ariaLabel&&t[s].ariaLabel&&(i[s].ariaLabel=t[s].ariaLabel)),!i[s]&&t[s]&&(i[s]=t[s]);else{var n=[];for(var s in i){var o="_"+s;i[s]?n[o]={buttonText:i[s],ariaLabel:i[s]}:n[o]=t[o]}n._showFeedback={buttonText:"Show feedback",ariaLabel:"Show feedback"},this.set("_buttons",n)}}else this.set("_buttons",t)},setupWeightSettings:function(){},onAdaptInitialize:function(){this.restoreUserAnswers()},restoreUserAnswers:function(){},canSubmit:function(){},updateAttempts:function(){this.get("_attemptsLeft")||this.set("_attemptsLeft",this.get("_attempts")),this.set("_attemptsLeft",this.get("_attemptsLeft")-1)},setQuestionAsSubmitted:function(){this.set({_isEnabled:!1,_isSubmitted:!0})},storeUserAnswer:function(){},markQuestion:function(){this.isCorrect()?this.set("_isCorrect",!0):this.set("_isCorrect",!1)},isCorrect:function(){},setScore:function(){},checkQuestionCompletion:function(){var e=this.get("_isCorrect")||0===this.get("_attemptsLeft");return e&&this.setCompletionStatus(),e},updateButtons:function(){var e=this.get("_isInteractionComplete"),t=this.get("_isCorrect"),i=this.get("_isEnabled"),s=this.get("_buttonState"),n=this.get("_canShowModelAnswer");if(e)if(t||!n)this.set("_buttonState","correct");else switch(s){case"submit":case"hideCorrectAnswer":this.set("_buttonState","showCorrectAnswer");break;default:this.set("_buttonState","hideCorrectAnswer")}else i?this.set("_buttonState","submit"):this.set("_buttonState","reset")},setupFeedback:function(){this.get("_isCorrect")?this.setupCorrectFeedback():this.isPartlyCorrect()?this.setupPartlyCorrectFeedback():this.setupIncorrectFeedback()},isPartlyCorrect:function(){},setupCorrectFeedback:function(){this.set({feedbackTitle:this.get("title"),feedbackMessage:this.get("_feedback")?this.get("_feedback").correct:""})},setupPartlyCorrectFeedback:function(){this.get("_feedback")&&this.get("_feedback")._partlyCorrect?0!==this.get("_attemptsLeft")&&this.get("_feedback")._partlyCorrect.notFinal?this.set({feedbackTitle:this.get("title"),feedbackMessage:this.get("_feedback")?this.get("_feedback")._partlyCorrect.notFinal:""}):this.get("_feedback")._partlyCorrect.final?this.set({feedbackTitle:this.get("title"),feedbackMessage:this.get("_feedback")?this.get("_feedback")._partlyCorrect.final:""}):this.setupIncorrectFeedback():this.setupIncorrectFeedback()},setupIncorrectFeedback:function(){0===this.get("_attemptsLeft")||this.get("_feedback")&&!this.get("_feedback")._incorrect.notFinal?this.set({feedbackTitle:this.get("title"),feedbackMessage:this.get("_feedback")?this.get("_feedback")._incorrect.final:""}):this.set({feedbackTitle:this.get("title"),feedbackMessage:this.get("_feedback")?this.get("_feedback")._incorrect.notFinal:""})},reset:function(e,i){if(this.get("_canReset")||i){e=e||!0,t.prototype.reset.call(this,e,i);var s=this.get("_attempts");this.set({_attemptsLeft:s,_isCorrect:void 0,_isSubmitted:!1,_buttonState:"submit"})}},setQuestionAsReset:function(){this.set({_isEnabled:!0,_isSubmitted:!1})},resetUserAnswer:function(){}});return i}),define("core/js/views/buttonsView",["coreJS/adapt"],function(){var e=require("coreJS/adapt"),t=Backbone.View.extend({initialize:function(){this.listenTo(e,"remove",this.remove),this.listenTo(this.model,"change:_buttonState",this.onButtonStateChanged),this.listenTo(this.model,"change:feedbackMessage",this.onFeedbackMessageChanged),this.listenTo(this.model,"change:_attemptsLeft",this.onAttemptsChanged),this.render()},events:{"click .buttons-action":"onActionClicked","click .buttons-feedback":"onFeedbackClicked"},render:function(){var t=this.model.toJSON(),i=Handlebars.templates.buttons;_.defer(_.bind(function(){this.postRender(),e.trigger("buttonsView:postRender",this)},this)),this.$el.html(i(t))},postRender:function(){this.updateAttemptsCount(),this.checkResetSubmittedState(),this.checkFeedbackState(),this.onButtonStateChanged(null,this.model.get("_buttonState")),this.onFeedbackMessageChanged(null,this.model.get("feedbackMessage"))},checkResetSubmittedState:function(){var e=this.model.get("_isSubmitted");if(e)this.$el.addClass("submitted");else{var t=this.$(".buttons-marking-icon");t.removeClass("icon-cross"),t.removeClass("icon-tick"),t.addClass("display-none"),this.$el.removeClass("submitted"),this.model.set("feedbackMessage",void 0),this.$(".buttons-feedback").a11y_cntrl_enabled(!1)}},onActionClicked:function(){var e=this.model.get("_buttonState");this.trigger("buttons:"+e),this.checkResetSubmittedState()},onFeedbackClicked:function(){this.trigger("buttons:showFeedback")},onFeedbackMessageChanged:function(e,t){t&&this.model.get("_canShowFeedback")?this.$(".buttons-feedback").a11y_cntrl_enabled(!0):this.$(".buttons-feedback").a11y_cntrl_enabled(!1)},onButtonStateChanged:function(e,t){if("correct"===t)this.$(".buttons-action").a11y_cntrl_enabled(!1),this.model.get("_canShowFeedback")||this.$el.is(".no-state")||_.defer(_.bind(function(){$("."+this.model.get("_id")+" .accessibility-state [tabindex]").focusNoScroll()},this));else{var i=this.model.get("_buttons")["_"+t].ariaLabel,s=this.model.get("_buttons")["_"+t].buttonText;switch(t){case"showCorrectAnswer":case"hideCorrectAnswer":this.$(".buttons-action").a11y_cntrl(!1).html(s).attr("aria-label",i);break;default:this.$(".buttons-action").a11y_cntrl_enabled(!0).html(s).attr("aria-label",i)}}this.updateAttemptsCount()},checkFeedbackState:function(){this.model.get("_canShowFeedback")||(this.$(".buttons-action").addClass("buttons-action-fullwidth"),this.$(".buttons-feedback").addClass("no-feedback"))},updateAttemptsCount:function(e,t){var i,s=this.model.get("_isInteractionComplete"),n=this.model.get("_attemptsLeft")?this.model.get("_attemptsLeft"):this.model.get("_attempts"),o=(this.model.get("_isCorrect"),this.model.get("_shouldDisplayAttempts"));this.checkResetSubmittedState(),s||0==n?(this.$(".buttons-display-inner").addClass("visibility-hidden"),this.showMarking()):(i=n+" ",n>1?i+=this.model.get("_buttons").remainingAttemptsText:1===n&&(i+=this.model.get("_buttons").remainingAttemptText)),o&&this.$(".buttons-display-inner").html(i)},showMarking:function(){this.model.get("_canShowMarking")&&this.$(".buttons-marking-icon").removeClass("display-none").addClass(this.model.get("_isCorrect")?"icon-tick":"icon-cross")}});return t}),define("core/js/views/componentView",["require","coreJS/adapt","coreViews/adaptView"],function(e){var t=(e("coreJS/adapt"),e("coreViews/adaptView")),i=t.extend({className:function(){return"component "+this.model.get("_component")+"-component "+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()+" component-"+this.model.get("_layout")+" nth-child-"+this.model.get("_nthChild")},initialize:function(){t.prototype.initialize.apply(this,arguments),this.renderState()},renderState:function(){if(Handlebars.partials.state&&!this.$el.is(".not-accessible")&&!this.$el.is(".no-state")){var e=this.$(".accessibility-state").remove(),t=$(Handlebars.partials.state(this.model.toJSON())),i=e.find(".aria-label").attr("tabindex");"-1"==i&&t.find(".aria-label").attr("tabindex",i),this.$el.append(t),this.listenToOnce(this.model,"change:_isComplete",this.renderState)}},postRender:function(){}},{type:"component"});return i}),define("core/js/views/menuView",["require","coreViews/adaptView","coreJS/adapt"],function(e){var t=e("coreViews/adaptView"),i=e("coreJS/adapt"),s=t.extend({className:function(){var e="visibility-hidden";return this.model.get("_isVisible")&&(e=""),"menu menu-"+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()},preRender:function(){this.disableAnimation=!!i.config.has("_disableAnimation")&&i.config.get("_disableAnimation"),this.$el.css("opacity",0),this.listenTo(this.model,"change:_isReady",this.isReady)},postRender:function(){},isReady:function(){this.model.get("_isReady")&&_.defer(_.bind(function(){$(".loading").hide(),$(window).scrollTop(0),i.trigger("menuView:ready",this);var e={opacity:1};this.disableAnimation?this.$el.css(e):this.$el.velocity(e,"fast"),$(window).scroll()},this))}},{type:"menu"});return s}),define("core/js/views/navigationView",["require","backbone","handlebars","coreJS/adapt"],function(e){var t=e("backbone"),i=e("handlebars"),s=e("coreJS/adapt"),n=t.View.extend({className:"navigation",initialize:function(){this.listenToOnce(s,"courseModel:dataLoading",this.remove),this.listenTo(s,"router:menu router:page",this.hideNavigationButton),this.template="navigation",this.preRender()},events:{"click [data-event]":"triggerEvent"},preRender:function(){s.trigger("navigationView:preRender",this),this.render()},render:function(){var e=i.templates[this.template];return this.$el.html(e({_globals:s.course.get("_globals")})).appendTo("#wrapper"),_.defer(_.bind(function(){s.trigger("navigationView:postRender",this)},this)),this},triggerEvent:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-event");s.trigger("navigation:"+t)},hideNavigationButton:function(e){"course"===e.get("_type")?$(".navigation-back-button").addClass("display-none"):this.showNavigationButton()},showNavigationButton:function(){$(".navigation-back-button").removeClass("display-none")}});return n}),define("core/js/views/questionView",["coreJS/adapt","coreViews/componentView","coreViews/buttonsView","coreModels/questionModel"],function(e,t,i,s){var n=!1,o=t.extend({className:function(){return"component question-component "+this.model.get("_component")+"-component "+this.model.get("_id")+" "+this.model.get("_classes")+" "+this.setVisibility()+" component-"+this.model.get("_layout")+" nth-child-"+this.model.get("_nthChild")},preRender:function(){this.listenTo(this.model,"change:_isEnabled",this.onEnabledChanged),this.checkIfResetOnRevisit(),this._runModelCompatibleFunction("setupDefaultSettings"),this.setupQuestion()},onEnabledChanged:function(e,t){t?(this.$(".component-widget").removeClass("disabled"),this.enableQuestion()):(this.$(".component-widget").addClass("disabled"),this.disableQuestion())},disableQuestion:function(){},enableQuestion:function(){},checkIfResetOnRevisit:function(){var e=this.model.get("_isResetOnRevisit");if(e)this.model.reset(e,!0),_.defer(_.bind(function(){this.resetQuestionOnRevisit(e)},this));else{var t=this.model.get("_isInteractionComplete");t?(this.model.set("_buttonState","hideCorrectAnswer"),_.defer(_.bind(function(){this.onHideCorrectAnswerClicked()},this))):(this.model.set("_buttonState","submit"),_.defer(_.bind(function(){this.onResetClicked()},this)))}},resetQuestionOnRevisit:function(e){},setupQuestion:function(){},postRender:function(){this.addButtonsView(),this.onQuestionRendered()},addButtonsView:function(){this.buttonsView=new i({model:this.model,el:this.$(".buttons")}),this.listenTo(this.buttonsView,"buttons:submit",this.onSubmitClicked),this.listenTo(this.buttonsView,"buttons:reset",this.onResetClicked),this.listenTo(this.buttonsView,"buttons:showCorrectAnswer",this.onShowCorrectAnswerClicked),this.listenTo(this.buttonsView,"buttons:hideCorrectAnswer",this.onHideCorrectAnswerClicked),this.listenTo(this.buttonsView,"buttons:showFeedback",this.showFeedback)},onQuestionRendered:function(){},onSubmitClicked:function(){var e=this._runModelCompatibleFunction("canSubmit");return e?(this._runModelCompatibleFunction("updateAttempts"),this._runModelCompatibleFunction("setQuestionAsSubmitted"),this.removeInstructionError(),this._runModelCompatibleFunction("storeUserAnswer"),this._runModelCompatibleFunction("markQuestion","isCorrect"),this._runModelCompatibleFunction("setScore"),this.showMarking(),this._runModelCompatibleFunction("checkQuestionCompletion"),this.recordInteraction(),this._runModelCompatibleFunction("setupFeedback"),this._runModelCompatibleFunction("updateButtons"),this.showFeedback(),void this.onSubmitted()):(this.showInstructionError(),void this.onCannotSubmit())},showInstructionError:function(){this.$(".component-instruction-inner").addClass("validation-error"),this.$el.a11y_focus()},onCannotSubmit:function(){},onSubmitted:function(){},setQuestionAsSubmitted:function(){this.model.setQuestionAsSubmitted(),this.$(".component-widget").addClass("submitted")},removeInstructionError:function(){this.$(".component-instruction-inner").removeClass("validation-error")},showMarking:function(){},checkQuestionCompletion:function(){var e=this.model.checkQuestionCompletion();e&&this.$(".component-widget").addClass("complete show-user-answer")},recordInteraction:function(){this.model.get("_recordInteraction")!==!0&&this.model.has("_recordInteraction")||e.trigger("questionView:recordInteraction",this)},showFeedback:function(){
this.model.get("_canShowFeedback")?e.trigger("questionView:showFeedback",this):e.trigger("questionView:disabledFeedback",this)},onResetClicked:function(){this.setQuestionAsReset(),this._runModelCompatibleFunction("updateButtons"),this._runModelCompatibleFunction("resetUserAnswer"),this.resetQuestion(),this.model.get("_isReady")&&_.defer(_.bind(function(){this.$el.a11y_focus()},this))},setQuestionAsReset:function(){this.model.setQuestionAsReset(),this.$(".component-widget").removeClass("submitted");var t=e.findById(e.location._currentId);t&&t.get("_isReady")&&this.$el.a11y_focus()},resetQuestion:function(){},onShowCorrectAnswerClicked:function(){this.setQuestionAsShowCorrect(),this._runModelCompatibleFunction("updateButtons"),this.showCorrectAnswer()},setQuestionAsShowCorrect:function(){this.$(".component-widget").addClass("submitted show-correct-answer").removeClass("show-user-answer")},showCorrectAnswer:function(){},onHideCorrectAnswerClicked:function(){this.setQuestionAsHideCorrect(),this._runModelCompatibleFunction("updateButtons"),this.hideCorrectAnswer()},setQuestionAsHideCorrect:function(){this.$(".component-widget").addClass("submitted show-user-answer").removeClass("show-correct-answer")},hideCorrectAnswer:function(){},getLatency:function(){return null},getResponse:function(){},getResponseType:function(){},_runModelCompatibleFunction:function(e,t){return this.model[e]()}},{_isQuestionType:!0});if(n)return o;var a={setupDefaultSettings:function(){return this.model.setupDefaultSettings()},setupButtonSettings:function(){return this.model.setupButtonSettings()},setupWeightSettings:function(){return this.model.setupWeightSettings()},canSubmit:function(){return this.model.canSubmit()},updateAttempts:function(){return this.model.updateAttempts()},storeUserAnswer:function(){return this.model.storeUserAnswer()},resetUserAnswer:function(){return this.model.resetUserAnswer()},markQuestion:function(){return this._isInViewOnlyCompatibleMode("isCorrect")?void(this.isCorrect()?this.model.set("_isCorrect",!0):this.model.set("_isCorrect",!1)):this.model.markQuestion()},isCorrect:function(){return this.model.isCorrect()},setScore:function(){return this.model.setScore()},updateButtons:function(){return this.model.updateButtons()},setupFeedback:function(){this._isInViewOnlyCompatibleMode("isPartlyCorrect")?this.model.get("_isCorrect")?this._runModelCompatibleFunction("setupCorrectFeedback"):this.isPartlyCorrect()?this._runModelCompatibleFunction("setupPartlyCorrectFeedback"):this._runModelCompatibleFunction("setupIncorrectFeedback"):this.model.setupFeedback()},isPartlyCorrect:function(){return this.model.isPartlyCorrect()},setupCorrectFeedback:function(){return this.model.setupCorrectFeedback()},setupPartlyCorrectFeedback:function(){return this.model.setupPartlyCorrectFeedback()},setupIncorrectFeedback:function(){return this.model.setupIncorrectFeedback()},_runModelCompatibleFunction:function(e,t){return this._isInViewOnlyCompatibleMode(e,t)?this[e]():this.model[e]()},_isInViewOnlyCompatibleMode:function(e,t){var i=t||e;if(!this.constructor.prototype[i])return!1;if(this.constructor.prototype[i]===a[i]){switch(i){case"setupFeedback":case"markQuestion":return!0}return!1}return!0}};return o.extend(a,{_isQuestionType:!0})}),require(["core/js/adapt","core/js/adaptCollection","core/js/startController","core/js/models/articleModel","core/js/models/blockModel","core/js/models/configModel","core/js/models/contentObjectModel","core/js/models/componentModel","core/js/models/courseModel","core/js/models/questionModel","core/js/views/navigationView","core/js/accessibility","core/js/offlineStorage","core/js/device","core/js/drawer","core/js/notify","core/js/popupManager","core/js/router","core/js/models/lockingModel","plugins"],function(e,t,i,s,n,o,a,r,c,l,d){function u(e){console.error(e)}function h(){e.contentObjects._byAdaptID=e.contentObjects.groupBy("_id"),e.articles._byAdaptID=e.articles.groupBy("_id"),e.blocks._byAdaptID=e.blocks.groupBy("_id"),e.components._byAdaptID=e.components.groupBy("_id")}function g(t,i){e.offlineStorage.set("lang",i),e.loadCourseData(!0)}function p(e,t){"rtl"===t?$("html").removeClass("dir-ltr").addClass("dir-rtl"):$("html").removeClass("dir-rtl").addClass("dir-ltr")}function f(){e.config.get("_activeLanguage")?e.loadCourseData():e.config.set("_activeLanguage",e.config.get("_defaultLanguage"))}window.Handlebars=_.extend(require("handlebars"),window.Handlebars);var b=Handlebars.templates.loading;$("#wrapper").append(b()),e.config=new o(null,{url:"course/config.json",reset:!0}),e.config.on({"change:_activeLanguage":g,"change:_defaultDirection":p}),e.checkDataIsLoaded=function(t){var s=e.config.get("_activeLanguage");if(e.contentObjects.models.length>0&&e.articles.models.length>0&&e.blocks.models.length>0&&e.components.models.length>0&&e.course.get("_id")){if(h(),t&&(e.trigger("app:languageChanged",s),_.defer(function(){var e=new i,t="#/";e.isEnabled()&&(t=e.getStartHash(!0)),Backbone.history.navigate(t,{trigger:!0,replace:!0})})),"undefined"!=typeof e.course.get("_buttons").submit){var n=e.course.get("_buttons"),o=[];for(var a in n)o["_"+a]={buttonText:n[a],ariaLabel:n[a]};o._showFeedback={buttonText:"Show feedback",ariaLabel:"Show feedback"},e.course.set("_buttons",o)}try{e.trigger("app:dataLoaded")}catch(e){u(e)}e.setupMapping();try{e.trigger("app:dataReady")}catch(e){u(e)}e.navigation=new d,e.initialize(),e.off("adaptCollection:dataLoaded courseModel:dataLoaded")}},e.loadCourseData=function(i){e.on("adaptCollection:dataLoaded courseModel:dataLoaded",function(){e.checkDataIsLoaded(i)});var o=e.config.get("_activeLanguage"),d="course/"+o+"/";$("html").attr("lang",o),e.course=new c(null,{url:d+"course.json",reset:!0}),e.contentObjects=new t(null,{model:a,url:d+"contentObjects.json"}),e.articles=new t(null,{model:s,url:d+"articles.json"}),e.blocks=new t(null,{model:n,url:d+"blocks.json"}),e.components=new t(null,{model:function(t){var i=e.componentStore[t._component];if(!i)throw new Error(t._component+" component not found. Is it installed and included?");if(i.model)return new i.model(t);var s=i.view||i;return s._isQuestionType?new l(t):new r(t)},url:d+"components.json"})},e.once("configModel:loadCourseData",f)}),define("core/js/app",["core/js/accessibility","core/js/adapt","core/js/adaptCollection","core/js/device","core/js/drawer","core/js/helpers","core/js/notify","core/js/offlineStorage","core/js/popupManager","core/js/router","core/js/startController","core/js/models/adaptModel","core/js/models/articleModel","core/js/models/blockModel","core/js/models/componentModel","core/js/models/configModel","core/js/models/contentObjectModel","core/js/models/courseModel","core/js/models/lockingModel","core/js/models/notifyModel","core/js/models/questionModel","core/js/models/routerModel","core/js/views/accessibilityView","core/js/views/adaptView","core/js/views/articleView","core/js/views/blockView","core/js/views/buttonsView","core/js/views/componentView","core/js/views/drawerView","core/js/views/menuView","core/js/views/navigationView","core/js/views/notifyPushView","core/js/views/notifyView","core/js/views/pageView","core/js/views/questionView"],function(){});